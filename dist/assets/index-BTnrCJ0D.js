(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function IT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var s_={exports:{}},Sc={},o_={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=Symbol.for("react.element"),TT=Symbol.for("react.portal"),ST=Symbol.for("react.fragment"),RT=Symbol.for("react.strict_mode"),AT=Symbol.for("react.profiler"),PT=Symbol.for("react.provider"),xT=Symbol.for("react.context"),CT=Symbol.for("react.forward_ref"),kT=Symbol.for("react.suspense"),DT=Symbol.for("react.memo"),VT=Symbol.for("react.lazy"),sg=Symbol.iterator;function NT(t){return t===null||typeof t!="object"?null:(t=sg&&t[sg]||t["@@iterator"],typeof t=="function"?t:null)}var a_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l_=Object.assign,u_={};function ho(t,e,n){this.props=t,this.context=e,this.refs=u_,this.updater=n||a_}ho.prototype.isReactComponent={};ho.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ho.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function c_(){}c_.prototype=ho.prototype;function Cf(t,e,n){this.props=t,this.context=e,this.refs=u_,this.updater=n||a_}var kf=Cf.prototype=new c_;kf.constructor=Cf;l_(kf,ho.prototype);kf.isPureReactComponent=!0;var og=Array.isArray,h_=Object.prototype.hasOwnProperty,Df={current:null},d_={key:!0,ref:!0,__self:!0,__source:!0};function f_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)h_.call(e,r)&&!d_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:tl,type:t,key:s,ref:o,props:i,_owner:Df.current}}function bT(t,e){return{$$typeof:tl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vf(t){return typeof t=="object"&&t!==null&&t.$$typeof===tl}function MT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ag=/\/+/g;function ph(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MT(""+t.key):e.toString(36)}function lu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tl:case TT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ph(o,0):r,og(i)?(n="",t!=null&&(n=t.replace(ag,"$&/")+"/"),lu(i,e,n,"",function(c){return c})):i!=null&&(Vf(i)&&(i=bT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ag,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",og(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+ph(s,a);o+=lu(s,e,n,u,i)}else if(u=NT(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+ph(s,a++),o+=lu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ol(t,e,n){if(t==null)return t;var r=[],i=0;return lu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function LT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},uu={transition:null},OT={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:uu,ReactCurrentOwner:Df};function p_(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Ol,forEach:function(t,e,n){Ol(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ol(t,function(){e++}),e},toArray:function(t){return Ol(t,function(e){return e})||[]},only:function(t){if(!Vf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=ho;me.Fragment=ST;me.Profiler=AT;me.PureComponent=Cf;me.StrictMode=RT;me.Suspense=kT;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OT;me.act=p_;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=l_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Df.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)h_.call(e,u)&&!d_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:tl,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:xT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PT,_context:t},t.Consumer=t};me.createElement=f_;me.createFactory=function(t){var e=f_.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:CT,render:t}};me.isValidElement=Vf;me.lazy=function(t){return{$$typeof:VT,_payload:{_status:-1,_result:t},_init:LT}};me.memo=function(t,e){return{$$typeof:DT,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=uu.transition;uu.transition={};try{t()}finally{uu.transition=e}};me.unstable_act=p_;me.useCallback=function(t,e){return Bt.current.useCallback(t,e)};me.useContext=function(t){return Bt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Bt.current.useEffect(t,e)};me.useId=function(){return Bt.current.useId()};me.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Bt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};me.useRef=function(t){return Bt.current.useRef(t)};me.useState=function(t){return Bt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Bt.current.useTransition()};me.version="18.3.1";o_.exports=me;var F=o_.exports;const m_=IT(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT=F,BT=Symbol.for("react.element"),zT=Symbol.for("react.fragment"),UT=Object.prototype.hasOwnProperty,jT=FT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$T={key:!0,ref:!0,__self:!0,__source:!0};function g_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)UT.call(e,r)&&!$T.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:BT,type:t,key:s,ref:o,props:i,_owner:jT.current}}Sc.Fragment=zT;Sc.jsx=g_;Sc.jsxs=g_;s_.exports=Sc;var Y=s_.exports,td={},y_={exports:{}},ln={},v_={exports:{}},__={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,re){var oe=q.length;q.push(re);e:for(;0<oe;){var we=oe-1>>>1,Se=q[we];if(0<i(Se,re))q[we]=re,q[oe]=Se,oe=we;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var re=q[0],oe=q.pop();if(oe!==re){q[0]=oe;e:for(var we=0,Se=q.length,Ae=Se>>>1;we<Ae;){var mt=2*(we+1)-1,Ut=q[mt],gt=mt+1,_n=q[gt];if(0>i(Ut,oe))gt<Se&&0>i(_n,Ut)?(q[we]=_n,q[gt]=oe,we=gt):(q[we]=Ut,q[mt]=oe,we=mt);else if(gt<Se&&0>i(_n,oe))q[we]=_n,q[gt]=oe,we=gt;else break e}}return re}function i(q,re){var oe=q.sortIndex-re.sortIndex;return oe!==0?oe:q.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,f=null,m=3,_=!1,R=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(q){for(var re=n(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=q)r(c),re.sortIndex=re.expirationTime,e(u,re);else break;re=n(c)}}function V(q){if(C=!1,I(q),!R)if(n(u)!==null)R=!0,ye(B);else{var re=n(c);re!==null&&Xe(V,re.startTime-q)}}function B(q,re){R=!1,C&&(C=!1,w(y),y=-1),_=!0;var oe=m;try{for(I(re),f=n(u);f!==null&&(!(f.expirationTime>re)||q&&!k());){var we=f.callback;if(typeof we=="function"){f.callback=null,m=f.priorityLevel;var Se=we(f.expirationTime<=re);re=t.unstable_now(),typeof Se=="function"?f.callback=Se:f===n(u)&&r(u),I(re)}else r(u);f=n(u)}if(f!==null)var Ae=!0;else{var mt=n(c);mt!==null&&Xe(V,mt.startTime-re),Ae=!1}return Ae}finally{f=null,m=oe,_=!1}}var P=!1,E=null,y=-1,T=5,A=-1;function k(){return!(t.unstable_now()-A<T)}function b(){if(E!==null){var q=t.unstable_now();A=q;var re=!0;try{re=E(!0,q)}finally{re?S():(P=!1,E=null)}}else P=!1}var S;if(typeof g=="function")S=function(){g(b)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Je=ge.port2;ge.port1.onmessage=b,S=function(){Je.postMessage(null)}}else S=function(){D(b,0)};function ye(q){E=q,P||(P=!0,S())}function Xe(q,re){y=D(function(){q(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){R||_||(R=!0,ye(B))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var oe=m;m=re;try{return q()}finally{m=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,re){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var oe=m;m=q;try{return re()}finally{m=oe}},t.unstable_scheduleCallback=function(q,re,oe){var we=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?we+oe:we):oe=we,q){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=oe+Se,q={id:d++,callback:re,priorityLevel:q,startTime:oe,expirationTime:Se,sortIndex:-1},oe>we?(q.sortIndex=oe,e(c,q),n(u)===null&&q===n(c)&&(C?(w(y),y=-1):C=!0,Xe(V,oe-we))):(q.sortIndex=Se,e(u,q),R||_||(R=!0,ye(B))),q},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(q){var re=m;return function(){var oe=m;m=re;try{return q.apply(this,arguments)}finally{m=oe}}}})(__);v_.exports=__;var KT=v_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT=F,on=KT;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w_=new Set,Ia={};function Gi(t,e){Gs(t,e),Gs(t+"Capture",e)}function Gs(t,e){for(Ia[t]=e,t=0;t<e.length;t++)w_.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nd=Object.prototype.hasOwnProperty,GT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lg={},ug={};function HT(t){return nd.call(ug,t)?!0:nd.call(lg,t)?!1:GT.test(t)?ug[t]=!0:(lg[t]=!0,!1)}function WT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QT(t,e,n,r){if(e===null||typeof e>"u"||WT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nf=/[\-:]([a-z])/g;function bf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nf,bf);Et[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nf,bf);Et[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nf,bf);Et[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mf(t,e,n,r){var i=Et.hasOwnProperty(e)?Et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QT(e,n,i,r)&&(n=null),r||i===null?HT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=qT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fl=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),Lf=Symbol.for("react.strict_mode"),rd=Symbol.for("react.profiler"),E_=Symbol.for("react.provider"),I_=Symbol.for("react.context"),Of=Symbol.for("react.forward_ref"),id=Symbol.for("react.suspense"),sd=Symbol.for("react.suspense_list"),Ff=Symbol.for("react.memo"),Ar=Symbol.for("react.lazy"),T_=Symbol.for("react.offscreen"),cg=Symbol.iterator;function bo(t){return t===null||typeof t!="object"?null:(t=cg&&t[cg]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,mh;function Yo(t){if(mh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mh=e&&e[1]||""}return`
`+mh+t}var gh=!1;function yh(t,e){if(!t||gh)return"";gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{gh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function YT(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=yh(t.type,!1),t;case 11:return t=yh(t.type.render,!1),t;case 1:return t=yh(t.type,!0),t;default:return""}}function od(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case As:return"Fragment";case Rs:return"Portal";case rd:return"Profiler";case Lf:return"StrictMode";case id:return"Suspense";case sd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I_:return(t.displayName||"Context")+".Consumer";case E_:return(t._context.displayName||"Context")+".Provider";case Of:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ff:return e=t.displayName||null,e!==null?e:od(t.type)||"Memo";case Ar:e=t._payload,t=t._init;try{return od(t(e))}catch{}}return null}function JT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return od(e);case 8:return e===Lf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function S_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XT(t){var e=S_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bl(t){t._valueTracker||(t._valueTracker=XT(t))}function R_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=S_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ad(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function A_(t,e){e=e.checked,e!=null&&Mf(t,"checked",e,!1)}function ld(t,e){A_(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ud(t,e.type,n):e.hasOwnProperty("defaultValue")&&ud(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ud(t,e,n){(e!=="number"||Vu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jo=Array.isArray;function Os(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Jo(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function P_(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function x_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?x_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zl,C_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zl=zl||document.createElement("div"),zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ta(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var aa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZT=["Webkit","ms","Moz","O"];Object.keys(aa).forEach(function(t){ZT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),aa[e]=aa[t]})});function k_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||aa.hasOwnProperty(t)&&aa[t]?(""+e).trim():e+"px"}function D_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=k_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var eS=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dd(t,e){if(e){if(eS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function fd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pd=null;function Bf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var md=null,Fs=null,Bs=null;function mg(t){if(t=il(t)){if(typeof md!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Cc(e),md(t.stateNode,t.type,e))}}function V_(t){Fs?Bs?Bs.push(t):Bs=[t]:Fs=t}function N_(){if(Fs){var t=Fs,e=Bs;if(Bs=Fs=null,mg(t),e)for(t=0;t<e.length;t++)mg(e[t])}}function b_(t,e){return t(e)}function M_(){}var vh=!1;function L_(t,e,n){if(vh)return t(e,n);vh=!0;try{return b_(t,e,n)}finally{vh=!1,(Fs!==null||Bs!==null)&&(M_(),N_())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=Cc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var gd=!1;if(ur)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){gd=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{gd=!1}function tS(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var la=!1,Nu=null,bu=!1,yd=null,nS={onError:function(t){la=!0,Nu=t}};function rS(t,e,n,r,i,s,o,a,u){la=!1,Nu=null,tS.apply(nS,arguments)}function iS(t,e,n,r,i,s,o,a,u){if(rS.apply(this,arguments),la){if(la){var c=Nu;la=!1,Nu=null}else throw Error(K(198));bu||(bu=!0,yd=c)}}function Hi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function O_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gg(t){if(Hi(t)!==t)throw Error(K(188))}function sS(t){var e=t.alternate;if(!e){if(e=Hi(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return gg(i),t;if(s===r)return gg(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function F_(t){return t=sS(t),t!==null?B_(t):null}function B_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=B_(t);if(e!==null)return e;t=t.sibling}return null}var z_=on.unstable_scheduleCallback,yg=on.unstable_cancelCallback,oS=on.unstable_shouldYield,aS=on.unstable_requestPaint,nt=on.unstable_now,lS=on.unstable_getCurrentPriorityLevel,zf=on.unstable_ImmediatePriority,U_=on.unstable_UserBlockingPriority,Mu=on.unstable_NormalPriority,uS=on.unstable_LowPriority,j_=on.unstable_IdlePriority,Rc=null,jn=null;function cS(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Rc,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:fS,hS=Math.log,dS=Math.LN2;function fS(t){return t>>>=0,t===0?32:31-(hS(t)/dS|0)|0}var Ul=64,jl=4194304;function Xo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Xo(a):(s&=o,s!==0&&(r=Xo(s)))}else o=n&~i,o!==0?r=Xo(o):s!==0&&(r=Xo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cn(e),i=1<<n,r|=t[n],e&=~i;return r}function pS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Cn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=pS(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function vd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $_(){var t=Ul;return Ul<<=1,!(Ul&4194240)&&(Ul=64),t}function _h(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function gS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Cn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Uf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var De=0;function K_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var q_,jf,G_,H_,W_,_d=!1,$l=[],Lr=null,Or=null,Fr=null,Ra=new Map,Aa=new Map,Cr=[],yS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vg(t,e){switch(t){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Ra.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Aa.delete(e.pointerId)}}function Lo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=il(e),e!==null&&jf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function vS(t,e,n,r,i){switch(e){case"focusin":return Lr=Lo(Lr,t,e,n,r,i),!0;case"dragenter":return Or=Lo(Or,t,e,n,r,i),!0;case"mouseover":return Fr=Lo(Fr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ra.set(s,Lo(Ra.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Aa.set(s,Lo(Aa.get(s)||null,t,e,n,r,i)),!0}return!1}function Q_(t){var e=Si(t.target);if(e!==null){var n=Hi(e);if(n!==null){if(e=n.tag,e===13){if(e=O_(n),e!==null){t.blockedOn=e,W_(t.priority,function(){G_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pd=r,n.target.dispatchEvent(r),pd=null}else return e=il(n),e!==null&&jf(e),t.blockedOn=n,!1;e.shift()}return!0}function _g(t,e,n){cu(t)&&n.delete(e)}function _S(){_d=!1,Lr!==null&&cu(Lr)&&(Lr=null),Or!==null&&cu(Or)&&(Or=null),Fr!==null&&cu(Fr)&&(Fr=null),Ra.forEach(_g),Aa.forEach(_g)}function Oo(t,e){t.blockedOn===e&&(t.blockedOn=null,_d||(_d=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,_S)))}function Pa(t){function e(i){return Oo(i,t)}if(0<$l.length){Oo($l[0],t);for(var n=1;n<$l.length;n++){var r=$l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Lr!==null&&Oo(Lr,t),Or!==null&&Oo(Or,t),Fr!==null&&Oo(Fr,t),Ra.forEach(e),Aa.forEach(e),n=0;n<Cr.length;n++)r=Cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)Q_(n),n.blockedOn===null&&Cr.shift()}var zs=mr.ReactCurrentBatchConfig,Ou=!0;function wS(t,e,n,r){var i=De,s=zs.transition;zs.transition=null;try{De=1,$f(t,e,n,r)}finally{De=i,zs.transition=s}}function ES(t,e,n,r){var i=De,s=zs.transition;zs.transition=null;try{De=4,$f(t,e,n,r)}finally{De=i,zs.transition=s}}function $f(t,e,n,r){if(Ou){var i=wd(t,e,n,r);if(i===null)Ch(t,e,r,Fu,n),vg(t,r);else if(vS(i,t,e,n,r))r.stopPropagation();else if(vg(t,r),e&4&&-1<yS.indexOf(t)){for(;i!==null;){var s=il(i);if(s!==null&&q_(s),s=wd(t,e,n,r),s===null&&Ch(t,e,r,Fu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ch(t,e,r,null,n)}}var Fu=null;function wd(t,e,n,r){if(Fu=null,t=Bf(r),t=Si(t),t!==null)if(e=Hi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=O_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fu=t,null}function Y_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lS()){case zf:return 1;case U_:return 4;case Mu:case uS:return 16;case j_:return 536870912;default:return 16}default:return 16}}var Nr=null,Kf=null,hu=null;function J_(){if(hu)return hu;var t,e=Kf,n=e.length,r,i="value"in Nr?Nr.value:Nr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return hu=i.slice(t,1<r?1-r:void 0)}function du(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Kl(){return!0}function wg(){return!1}function un(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Kl:wg,this.isPropagationStopped=wg,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kl)},persist:function(){},isPersistent:Kl}),e}var fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qf=un(fo),rl=Ye({},fo,{view:0,detail:0}),IS=un(rl),wh,Eh,Fo,Ac=Ye({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fo&&(Fo&&t.type==="mousemove"?(wh=t.screenX-Fo.screenX,Eh=t.screenY-Fo.screenY):Eh=wh=0,Fo=t),wh)},movementY:function(t){return"movementY"in t?t.movementY:Eh}}),Eg=un(Ac),TS=Ye({},Ac,{dataTransfer:0}),SS=un(TS),RS=Ye({},rl,{relatedTarget:0}),Ih=un(RS),AS=Ye({},fo,{animationName:0,elapsedTime:0,pseudoElement:0}),PS=un(AS),xS=Ye({},fo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CS=un(xS),kS=Ye({},fo,{data:0}),Ig=un(kS),DS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NS[t])?!!e[t]:!1}function Gf(){return bS}var MS=Ye({},rl,{key:function(t){if(t.key){var e=DS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gf,charCode:function(t){return t.type==="keypress"?du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LS=un(MS),OS=Ye({},Ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tg=un(OS),FS=Ye({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gf}),BS=un(FS),zS=Ye({},fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),US=un(zS),jS=Ye({},Ac,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$S=un(jS),KS=[9,13,27,32],Hf=ur&&"CompositionEvent"in window,ua=null;ur&&"documentMode"in document&&(ua=document.documentMode);var qS=ur&&"TextEvent"in window&&!ua,X_=ur&&(!Hf||ua&&8<ua&&11>=ua),Sg=" ",Rg=!1;function Z_(t,e){switch(t){case"keyup":return KS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ew(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function GS(t,e){switch(t){case"compositionend":return ew(e);case"keypress":return e.which!==32?null:(Rg=!0,Sg);case"textInput":return t=e.data,t===Sg&&Rg?null:t;default:return null}}function HS(t,e){if(Ps)return t==="compositionend"||!Hf&&Z_(t,e)?(t=J_(),hu=Kf=Nr=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X_&&e.locale!=="ko"?null:e.data;default:return null}}var WS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ag(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WS[t.type]:e==="textarea"}function tw(t,e,n,r){V_(r),e=Bu(e,"onChange"),0<e.length&&(n=new qf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ca=null,xa=null;function QS(t){dw(t,0)}function Pc(t){var e=ks(t);if(R_(e))return t}function YS(t,e){if(t==="change")return e}var nw=!1;if(ur){var Th;if(ur){var Sh="oninput"in document;if(!Sh){var Pg=document.createElement("div");Pg.setAttribute("oninput","return;"),Sh=typeof Pg.oninput=="function"}Th=Sh}else Th=!1;nw=Th&&(!document.documentMode||9<document.documentMode)}function xg(){ca&&(ca.detachEvent("onpropertychange",rw),xa=ca=null)}function rw(t){if(t.propertyName==="value"&&Pc(xa)){var e=[];tw(e,xa,t,Bf(t)),L_(QS,e)}}function JS(t,e,n){t==="focusin"?(xg(),ca=e,xa=n,ca.attachEvent("onpropertychange",rw)):t==="focusout"&&xg()}function XS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pc(xa)}function ZS(t,e){if(t==="click")return Pc(e)}function eR(t,e){if(t==="input"||t==="change")return Pc(e)}function tR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dn=typeof Object.is=="function"?Object.is:tR;function Ca(t,e){if(Dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!nd.call(e,i)||!Dn(t[i],e[i]))return!1}return!0}function Cg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kg(t,e){var n=Cg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cg(n)}}function iw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sw(){for(var t=window,e=Vu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vu(t.document)}return e}function Wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nR(t){var e=sw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iw(n.ownerDocument.documentElement,n)){if(r!==null&&Wf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=kg(n,s);var o=kg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rR=ur&&"documentMode"in document&&11>=document.documentMode,xs=null,Ed=null,ha=null,Id=!1;function Dg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Id||xs==null||xs!==Vu(r)||(r=xs,"selectionStart"in r&&Wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ha&&Ca(ha,r)||(ha=r,r=Bu(Ed,"onSelect"),0<r.length&&(e=new qf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xs)))}function ql(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cs={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionend:ql("Transition","TransitionEnd")},Rh={},ow={};ur&&(ow=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function xc(t){if(Rh[t])return Rh[t];if(!Cs[t])return t;var e=Cs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ow)return Rh[t]=e[n];return t}var aw=xc("animationend"),lw=xc("animationiteration"),uw=xc("animationstart"),cw=xc("transitionend"),hw=new Map,Vg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(t,e){hw.set(t,e),Gi(e,[t])}for(var Ah=0;Ah<Vg.length;Ah++){var Ph=Vg[Ah],iR=Ph.toLowerCase(),sR=Ph[0].toUpperCase()+Ph.slice(1);Zr(iR,"on"+sR)}Zr(aw,"onAnimationEnd");Zr(lw,"onAnimationIteration");Zr(uw,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(cw,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function Ng(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iS(r,e,void 0,t),t.currentTarget=null}function dw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Ng(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Ng(i,a,c),s=u}}}if(bu)throw t=yd,bu=!1,yd=null,t}function ze(t,e){var n=e[Pd];n===void 0&&(n=e[Pd]=new Set);var r=t+"__bubble";n.has(r)||(fw(e,t,2,!1),n.add(r))}function xh(t,e,n){var r=0;e&&(r|=4),fw(n,t,r,e)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[Gl]){t[Gl]=!0,w_.forEach(function(n){n!=="selectionchange"&&(oR.has(n)||xh(n,!1,t),xh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gl]||(e[Gl]=!0,xh("selectionchange",!1,e))}}function fw(t,e,n,r){switch(Y_(e)){case 1:var i=wS;break;case 4:i=ES;break;default:i=$f}n=i.bind(null,e,n,t),i=void 0,!gd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ch(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Si(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}L_(function(){var c=s,d=Bf(n),f=[];e:{var m=hw.get(t);if(m!==void 0){var _=qf,R=t;switch(t){case"keypress":if(du(n)===0)break e;case"keydown":case"keyup":_=LS;break;case"focusin":R="focus",_=Ih;break;case"focusout":R="blur",_=Ih;break;case"beforeblur":case"afterblur":_=Ih;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=SS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=BS;break;case aw:case lw:case uw:_=PS;break;case cw:_=US;break;case"scroll":_=IS;break;case"wheel":_=$S;break;case"copy":case"cut":case"paste":_=CS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Tg}var C=(e&4)!==0,D=!C&&t==="scroll",w=C?m!==null?m+"Capture":null:m;C=[];for(var g=c,I;g!==null;){I=g;var V=I.stateNode;if(I.tag===5&&V!==null&&(I=V,w!==null&&(V=Sa(g,w),V!=null&&C.push(Da(g,V,I)))),D)break;g=g.return}0<C.length&&(m=new _(m,R,null,n,d),f.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==pd&&(R=n.relatedTarget||n.fromElement)&&(Si(R)||R[cr]))break e;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(R=n.relatedTarget||n.toElement,_=c,R=R?Si(R):null,R!==null&&(D=Hi(R),R!==D||R.tag!==5&&R.tag!==6)&&(R=null)):(_=null,R=c),_!==R)){if(C=Eg,V="onMouseLeave",w="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(C=Tg,V="onPointerLeave",w="onPointerEnter",g="pointer"),D=_==null?m:ks(_),I=R==null?m:ks(R),m=new C(V,g+"leave",_,n,d),m.target=D,m.relatedTarget=I,V=null,Si(d)===c&&(C=new C(w,g+"enter",R,n,d),C.target=I,C.relatedTarget=D,V=C),D=V,_&&R)t:{for(C=_,w=R,g=0,I=C;I;I=ps(I))g++;for(I=0,V=w;V;V=ps(V))I++;for(;0<g-I;)C=ps(C),g--;for(;0<I-g;)w=ps(w),I--;for(;g--;){if(C===w||w!==null&&C===w.alternate)break t;C=ps(C),w=ps(w)}C=null}else C=null;_!==null&&bg(f,m,_,C,!1),R!==null&&D!==null&&bg(f,D,R,C,!0)}}e:{if(m=c?ks(c):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var B=YS;else if(Ag(m))if(nw)B=eR;else{B=XS;var P=JS}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(B=ZS);if(B&&(B=B(t,c))){tw(f,B,n,d);break e}P&&P(t,m,c),t==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&ud(m,"number",m.value)}switch(P=c?ks(c):window,t){case"focusin":(Ag(P)||P.contentEditable==="true")&&(xs=P,Ed=c,ha=null);break;case"focusout":ha=Ed=xs=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,Dg(f,n,d);break;case"selectionchange":if(rR)break;case"keydown":case"keyup":Dg(f,n,d)}var E;if(Hf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ps?Z_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(X_&&n.locale!=="ko"&&(Ps||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ps&&(E=J_()):(Nr=d,Kf="value"in Nr?Nr.value:Nr.textContent,Ps=!0)),P=Bu(c,y),0<P.length&&(y=new Ig(y,t,null,n,d),f.push({event:y,listeners:P}),E?y.data=E:(E=ew(n),E!==null&&(y.data=E)))),(E=qS?GS(t,n):HS(t,n))&&(c=Bu(c,"onBeforeInput"),0<c.length&&(d=new Ig("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=E))}dw(f,e)})}function Da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sa(t,n),s!=null&&r.unshift(Da(t,s,i)),s=Sa(t,e),s!=null&&r.push(Da(t,s,i))),t=t.return}return r}function ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=Sa(n,s),u!=null&&o.unshift(Da(n,u,a))):i||(u=Sa(n,s),u!=null&&o.push(Da(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aR=/\r\n?/g,lR=/\u0000|\uFFFD/g;function Mg(t){return(typeof t=="string"?t:""+t).replace(aR,`
`).replace(lR,"")}function Hl(t,e,n){if(e=Mg(e),Mg(t)!==e&&n)throw Error(K(425))}function zu(){}var Td=null,Sd=null;function Rd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ad=typeof setTimeout=="function"?setTimeout:void 0,uR=typeof clearTimeout=="function"?clearTimeout:void 0,Lg=typeof Promise=="function"?Promise:void 0,cR=typeof queueMicrotask=="function"?queueMicrotask:typeof Lg<"u"?function(t){return Lg.resolve(null).then(t).catch(hR)}:Ad;function hR(t){setTimeout(function(){throw t})}function kh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pa(e)}function Br(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Og(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var po=Math.random().toString(36).slice(2),Bn="__reactFiber$"+po,Va="__reactProps$"+po,cr="__reactContainer$"+po,Pd="__reactEvents$"+po,dR="__reactListeners$"+po,fR="__reactHandles$"+po;function Si(t){var e=t[Bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cr]||n[Bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Og(t);t!==null;){if(n=t[Bn])return n;t=Og(t)}return e}t=n,n=t.parentNode}return null}function il(t){return t=t[Bn]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Cc(t){return t[Va]||null}var xd=[],Ds=-1;function ei(t){return{current:t}}function Ue(t){0>Ds||(t.current=xd[Ds],xd[Ds]=null,Ds--)}function be(t,e){Ds++,xd[Ds]=t.current,t.current=e}var Wr={},Vt=ei(Wr),Wt=ei(!1),Ni=Wr;function Hs(t,e){var n=t.type.contextTypes;if(!n)return Wr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qt(t){return t=t.childContextTypes,t!=null}function Uu(){Ue(Wt),Ue(Vt)}function Fg(t,e,n){if(Vt.current!==Wr)throw Error(K(168));be(Vt,e),be(Wt,n)}function pw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,JT(t)||"Unknown",i));return Ye({},n,r)}function ju(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wr,Ni=Vt.current,be(Vt,t),be(Wt,Wt.current),!0}function Bg(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=pw(t,e,Ni),r.__reactInternalMemoizedMergedChildContext=t,Ue(Wt),Ue(Vt),be(Vt,t)):Ue(Wt),be(Wt,n)}var rr=null,kc=!1,Dh=!1;function mw(t){rr===null?rr=[t]:rr.push(t)}function pR(t){kc=!0,mw(t)}function ti(){if(!Dh&&rr!==null){Dh=!0;var t=0,e=De;try{var n=rr;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rr=null,kc=!1}catch(i){throw rr!==null&&(rr=rr.slice(t+1)),z_(zf,ti),i}finally{De=e,Dh=!1}}return null}var Vs=[],Ns=0,$u=null,Ku=0,dn=[],fn=0,bi=null,sr=1,or="";function pi(t,e){Vs[Ns++]=Ku,Vs[Ns++]=$u,$u=t,Ku=e}function gw(t,e,n){dn[fn++]=sr,dn[fn++]=or,dn[fn++]=bi,bi=t;var r=sr;t=or;var i=32-Cn(r)-1;r&=~(1<<i),n+=1;var s=32-Cn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,sr=1<<32-Cn(e)+i|n<<i|r,or=s+t}else sr=1<<s|n<<i|r,or=t}function Qf(t){t.return!==null&&(pi(t,1),gw(t,1,0))}function Yf(t){for(;t===$u;)$u=Vs[--Ns],Vs[Ns]=null,Ku=Vs[--Ns],Vs[Ns]=null;for(;t===bi;)bi=dn[--fn],dn[fn]=null,or=dn[--fn],dn[fn]=null,sr=dn[--fn],dn[fn]=null}var rn=null,tn=null,Ke=!1,xn=null;function yw(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rn=t,tn=Br(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rn=t,tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bi!==null?{id:sr,overflow:or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rn=t,tn=null,!0):!1;default:return!1}}function Cd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kd(t){if(Ke){var e=tn;if(e){var n=e;if(!zg(t,e)){if(Cd(t))throw Error(K(418));e=Br(n.nextSibling);var r=rn;e&&zg(t,e)?yw(r,n):(t.flags=t.flags&-4097|2,Ke=!1,rn=t)}}else{if(Cd(t))throw Error(K(418));t.flags=t.flags&-4097|2,Ke=!1,rn=t}}}function Ug(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function Wl(t){if(t!==rn)return!1;if(!Ke)return Ug(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rd(t.type,t.memoizedProps)),e&&(e=tn)){if(Cd(t))throw vw(),Error(K(418));for(;e;)yw(t,e),e=Br(e.nextSibling)}if(Ug(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tn=Br(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tn=null}}else tn=rn?Br(t.stateNode.nextSibling):null;return!0}function vw(){for(var t=tn;t;)t=Br(t.nextSibling)}function Ws(){tn=rn=null,Ke=!1}function Jf(t){xn===null?xn=[t]:xn.push(t)}var mR=mr.ReactCurrentBatchConfig;function Bo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Ql(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jg(t){var e=t._init;return e(t._payload)}function _w(t){function e(w,g){if(t){var I=w.deletions;I===null?(w.deletions=[g],w.flags|=16):I.push(g)}}function n(w,g){if(!t)return null;for(;g!==null;)e(w,g),g=g.sibling;return null}function r(w,g){for(w=new Map;g!==null;)g.key!==null?w.set(g.key,g):w.set(g.index,g),g=g.sibling;return w}function i(w,g){return w=$r(w,g),w.index=0,w.sibling=null,w}function s(w,g,I){return w.index=I,t?(I=w.alternate,I!==null?(I=I.index,I<g?(w.flags|=2,g):I):(w.flags|=2,g)):(w.flags|=1048576,g)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,g,I,V){return g===null||g.tag!==6?(g=Fh(I,w.mode,V),g.return=w,g):(g=i(g,I),g.return=w,g)}function u(w,g,I,V){var B=I.type;return B===As?d(w,g,I.props.children,V,I.key):g!==null&&(g.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Ar&&jg(B)===g.type)?(V=i(g,I.props),V.ref=Bo(w,g,I),V.return=w,V):(V=_u(I.type,I.key,I.props,null,w.mode,V),V.ref=Bo(w,g,I),V.return=w,V)}function c(w,g,I,V){return g===null||g.tag!==4||g.stateNode.containerInfo!==I.containerInfo||g.stateNode.implementation!==I.implementation?(g=Bh(I,w.mode,V),g.return=w,g):(g=i(g,I.children||[]),g.return=w,g)}function d(w,g,I,V,B){return g===null||g.tag!==7?(g=Ci(I,w.mode,V,B),g.return=w,g):(g=i(g,I),g.return=w,g)}function f(w,g,I){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Fh(""+g,w.mode,I),g.return=w,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Fl:return I=_u(g.type,g.key,g.props,null,w.mode,I),I.ref=Bo(w,null,g),I.return=w,I;case Rs:return g=Bh(g,w.mode,I),g.return=w,g;case Ar:var V=g._init;return f(w,V(g._payload),I)}if(Jo(g)||bo(g))return g=Ci(g,w.mode,I,null),g.return=w,g;Ql(w,g)}return null}function m(w,g,I,V){var B=g!==null?g.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return B!==null?null:a(w,g,""+I,V);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Fl:return I.key===B?u(w,g,I,V):null;case Rs:return I.key===B?c(w,g,I,V):null;case Ar:return B=I._init,m(w,g,B(I._payload),V)}if(Jo(I)||bo(I))return B!==null?null:d(w,g,I,V,null);Ql(w,I)}return null}function _(w,g,I,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return w=w.get(I)||null,a(g,w,""+V,B);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Fl:return w=w.get(V.key===null?I:V.key)||null,u(g,w,V,B);case Rs:return w=w.get(V.key===null?I:V.key)||null,c(g,w,V,B);case Ar:var P=V._init;return _(w,g,I,P(V._payload),B)}if(Jo(V)||bo(V))return w=w.get(I)||null,d(g,w,V,B,null);Ql(g,V)}return null}function R(w,g,I,V){for(var B=null,P=null,E=g,y=g=0,T=null;E!==null&&y<I.length;y++){E.index>y?(T=E,E=null):T=E.sibling;var A=m(w,E,I[y],V);if(A===null){E===null&&(E=T);break}t&&E&&A.alternate===null&&e(w,E),g=s(A,g,y),P===null?B=A:P.sibling=A,P=A,E=T}if(y===I.length)return n(w,E),Ke&&pi(w,y),B;if(E===null){for(;y<I.length;y++)E=f(w,I[y],V),E!==null&&(g=s(E,g,y),P===null?B=E:P.sibling=E,P=E);return Ke&&pi(w,y),B}for(E=r(w,E);y<I.length;y++)T=_(E,w,y,I[y],V),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?y:T.key),g=s(T,g,y),P===null?B=T:P.sibling=T,P=T);return t&&E.forEach(function(k){return e(w,k)}),Ke&&pi(w,y),B}function C(w,g,I,V){var B=bo(I);if(typeof B!="function")throw Error(K(150));if(I=B.call(I),I==null)throw Error(K(151));for(var P=B=null,E=g,y=g=0,T=null,A=I.next();E!==null&&!A.done;y++,A=I.next()){E.index>y?(T=E,E=null):T=E.sibling;var k=m(w,E,A.value,V);if(k===null){E===null&&(E=T);break}t&&E&&k.alternate===null&&e(w,E),g=s(k,g,y),P===null?B=k:P.sibling=k,P=k,E=T}if(A.done)return n(w,E),Ke&&pi(w,y),B;if(E===null){for(;!A.done;y++,A=I.next())A=f(w,A.value,V),A!==null&&(g=s(A,g,y),P===null?B=A:P.sibling=A,P=A);return Ke&&pi(w,y),B}for(E=r(w,E);!A.done;y++,A=I.next())A=_(E,w,y,A.value,V),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?y:A.key),g=s(A,g,y),P===null?B=A:P.sibling=A,P=A);return t&&E.forEach(function(b){return e(w,b)}),Ke&&pi(w,y),B}function D(w,g,I,V){if(typeof I=="object"&&I!==null&&I.type===As&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Fl:e:{for(var B=I.key,P=g;P!==null;){if(P.key===B){if(B=I.type,B===As){if(P.tag===7){n(w,P.sibling),g=i(P,I.props.children),g.return=w,w=g;break e}}else if(P.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Ar&&jg(B)===P.type){n(w,P.sibling),g=i(P,I.props),g.ref=Bo(w,P,I),g.return=w,w=g;break e}n(w,P);break}else e(w,P);P=P.sibling}I.type===As?(g=Ci(I.props.children,w.mode,V,I.key),g.return=w,w=g):(V=_u(I.type,I.key,I.props,null,w.mode,V),V.ref=Bo(w,g,I),V.return=w,w=V)}return o(w);case Rs:e:{for(P=I.key;g!==null;){if(g.key===P)if(g.tag===4&&g.stateNode.containerInfo===I.containerInfo&&g.stateNode.implementation===I.implementation){n(w,g.sibling),g=i(g,I.children||[]),g.return=w,w=g;break e}else{n(w,g);break}else e(w,g);g=g.sibling}g=Bh(I,w.mode,V),g.return=w,w=g}return o(w);case Ar:return P=I._init,D(w,g,P(I._payload),V)}if(Jo(I))return R(w,g,I,V);if(bo(I))return C(w,g,I,V);Ql(w,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,g!==null&&g.tag===6?(n(w,g.sibling),g=i(g,I),g.return=w,w=g):(n(w,g),g=Fh(I,w.mode,V),g.return=w,w=g),o(w)):n(w,g)}return D}var Qs=_w(!0),ww=_w(!1),qu=ei(null),Gu=null,bs=null,Xf=null;function Zf(){Xf=bs=Gu=null}function ep(t){var e=qu.current;Ue(qu),t._currentValue=e}function Dd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){Gu=t,Xf=bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function gn(t){var e=t._currentValue;if(Xf!==t)if(t={context:t,memoizedValue:e,next:null},bs===null){if(Gu===null)throw Error(K(308));bs=t,Gu.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var Ri=null;function tp(t){Ri===null?Ri=[t]:Ri.push(t)}function Ew(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,tp(e)):(n.next=i.next,i.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pr=!1;function np(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,hr(t,n)}return i=r.interleaved,i===null?(e.next=e,tp(r)):(e.next=i.next,i.next=e),r.interleaved=e,hr(t,n)}function fu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Uf(t,n)}}function $g(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hu(t,e,n,r){var i=t.updateQueue;Pr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,d=c=u=null,a=s;do{var m=a.lane,_=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var R=t,C=a;switch(m=e,_=n,C.tag){case 1:if(R=C.payload,typeof R=="function"){f=R.call(_,f,m);break e}f=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=C.payload,m=typeof R=="function"?R.call(_,f,m):R,m==null)break e;f=Ye({},f,m);break e;case 2:Pr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else _={eventTime:_,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=_,u=f):d=d.next=_,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Li|=o,t.lanes=o,t.memoizedState=f}}function Kg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var sl={},$n=ei(sl),Na=ei(sl),ba=ei(sl);function Ai(t){if(t===sl)throw Error(K(174));return t}function rp(t,e){switch(be(ba,e),be(Na,t),be($n,sl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hd(e,t)}Ue($n),be($n,e)}function Ys(){Ue($n),Ue(Na),Ue(ba)}function Tw(t){Ai(ba.current);var e=Ai($n.current),n=hd(e,t.type);e!==n&&(be(Na,t),be($n,n))}function ip(t){Na.current===t&&(Ue($n),Ue(Na))}var Ge=ei(0);function Wu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vh=[];function sp(){for(var t=0;t<Vh.length;t++)Vh[t]._workInProgressVersionPrimary=null;Vh.length=0}var pu=mr.ReactCurrentDispatcher,Nh=mr.ReactCurrentBatchConfig,Mi=0,We=null,ut=null,ft=null,Qu=!1,da=!1,Ma=0,gR=0;function At(){throw Error(K(321))}function op(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dn(t[n],e[n]))return!1;return!0}function ap(t,e,n,r,i,s){if(Mi=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pu.current=t===null||t.memoizedState===null?wR:ER,t=n(r,i),da){s=0;do{if(da=!1,Ma=0,25<=s)throw Error(K(301));s+=1,ft=ut=null,e.updateQueue=null,pu.current=IR,t=n(r,i)}while(da)}if(pu.current=Yu,e=ut!==null&&ut.next!==null,Mi=0,ft=ut=We=null,Qu=!1,e)throw Error(K(300));return t}function lp(){var t=Ma!==0;return Ma=0,t}function Fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?We.memoizedState=ft=t:ft=ft.next=t,ft}function yn(){if(ut===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var e=ft===null?We.memoizedState:ft.next;if(e!==null)ft=e,ut=t;else{if(t===null)throw Error(K(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},ft===null?We.memoizedState=ft=t:ft=ft.next=t}return ft}function La(t,e){return typeof e=="function"?e(t):e}function bh(t){var e=yn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=ut,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Mi&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,We.lanes|=d,Li|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Dn(r,e.memoizedState)||(Kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,We.lanes|=s,Li|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mh(t){var e=yn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Dn(s,e.memoizedState)||(Kt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Sw(){}function Rw(t,e){var n=We,r=yn(),i=e(),s=!Dn(r.memoizedState,i);if(s&&(r.memoizedState=i,Kt=!0),r=r.queue,up(xw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Oa(9,Pw.bind(null,n,r,i,e),void 0,null),pt===null)throw Error(K(349));Mi&30||Aw(n,e,i)}return i}function Aw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Pw(t,e,n,r){e.value=n,e.getSnapshot=r,Cw(e)&&kw(t)}function xw(t,e,n){return n(function(){Cw(e)&&kw(t)})}function Cw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dn(t,n)}catch{return!0}}function kw(t){var e=hr(t,1);e!==null&&kn(e,t,1,-1)}function qg(t){var e=Fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=_R.bind(null,We,t),[e.memoizedState,t]}function Oa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dw(){return yn().memoizedState}function mu(t,e,n,r){var i=Fn();We.flags|=t,i.memoizedState=Oa(1|e,n,void 0,r===void 0?null:r)}function Dc(t,e,n,r){var i=yn();r=r===void 0?null:r;var s=void 0;if(ut!==null){var o=ut.memoizedState;if(s=o.destroy,r!==null&&op(r,o.deps)){i.memoizedState=Oa(e,n,s,r);return}}We.flags|=t,i.memoizedState=Oa(1|e,n,s,r)}function Gg(t,e){return mu(8390656,8,t,e)}function up(t,e){return Dc(2048,8,t,e)}function Vw(t,e){return Dc(4,2,t,e)}function Nw(t,e){return Dc(4,4,t,e)}function bw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mw(t,e,n){return n=n!=null?n.concat([t]):null,Dc(4,4,bw.bind(null,e,t),n)}function cp(){}function Lw(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&op(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ow(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&op(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Fw(t,e,n){return Mi&21?(Dn(n,e)||(n=$_(),We.lanes|=n,Li|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function yR(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=Nh.transition;Nh.transition={};try{t(!1),e()}finally{De=n,Nh.transition=r}}function Bw(){return yn().memoizedState}function vR(t,e,n){var r=jr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zw(t))Uw(e,n);else if(n=Ew(t,e,n,r),n!==null){var i=Mt();kn(n,t,r,i),jw(n,e,r)}}function _R(t,e,n){var r=jr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zw(t))Uw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Dn(a,o)){var u=e.interleaved;u===null?(i.next=i,tp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Ew(t,e,i,r),n!==null&&(i=Mt(),kn(n,t,r,i),jw(n,e,r))}}function zw(t){var e=t.alternate;return t===We||e!==null&&e===We}function Uw(t,e){da=Qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Uf(t,n)}}var Yu={readContext:gn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},wR={readContext:gn,useCallback:function(t,e){return Fn().memoizedState=[t,e===void 0?null:e],t},useContext:gn,useEffect:Gg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,mu(4194308,4,bw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return mu(4194308,4,t,e)},useInsertionEffect:function(t,e){return mu(4,2,t,e)},useMemo:function(t,e){var n=Fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vR.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=Fn();return t={current:t},e.memoizedState=t},useState:qg,useDebugValue:cp,useDeferredValue:function(t){return Fn().memoizedState=t},useTransition:function(){var t=qg(!1),e=t[0];return t=yR.bind(null,t[1]),Fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,i=Fn();if(Ke){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),pt===null)throw Error(K(349));Mi&30||Aw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Gg(xw.bind(null,r,s,t),[t]),r.flags|=2048,Oa(9,Pw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Fn(),e=pt.identifierPrefix;if(Ke){var n=or,r=sr;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ER={readContext:gn,useCallback:Lw,useContext:gn,useEffect:up,useImperativeHandle:Mw,useInsertionEffect:Vw,useLayoutEffect:Nw,useMemo:Ow,useReducer:bh,useRef:Dw,useState:function(){return bh(La)},useDebugValue:cp,useDeferredValue:function(t){var e=yn();return Fw(e,ut.memoizedState,t)},useTransition:function(){var t=bh(La)[0],e=yn().memoizedState;return[t,e]},useMutableSource:Sw,useSyncExternalStore:Rw,useId:Bw,unstable_isNewReconciler:!1},IR={readContext:gn,useCallback:Lw,useContext:gn,useEffect:up,useImperativeHandle:Mw,useInsertionEffect:Vw,useLayoutEffect:Nw,useMemo:Ow,useReducer:Mh,useRef:Dw,useState:function(){return Mh(La)},useDebugValue:cp,useDeferredValue:function(t){var e=yn();return ut===null?e.memoizedState=t:Fw(e,ut.memoizedState,t)},useTransition:function(){var t=Mh(La)[0],e=yn().memoizedState;return[t,e]},useMutableSource:Sw,useSyncExternalStore:Rw,useId:Bw,unstable_isNewReconciler:!1};function An(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vc={isMounted:function(t){return(t=t._reactInternals)?Hi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mt(),i=jr(t),s=lr(r,i);s.payload=e,n!=null&&(s.callback=n),e=zr(t,s,i),e!==null&&(kn(e,t,i,r),fu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mt(),i=jr(t),s=lr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=zr(t,s,i),e!==null&&(kn(e,t,i,r),fu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mt(),r=jr(t),i=lr(n,r);i.tag=2,e!=null&&(i.callback=e),e=zr(t,i,r),e!==null&&(kn(e,t,r,n),fu(e,t,r))}};function Hg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ca(n,r)||!Ca(i,s):!0}function $w(t,e,n){var r=!1,i=Wr,s=e.contextType;return typeof s=="object"&&s!==null?s=gn(s):(i=Qt(e)?Ni:Vt.current,r=e.contextTypes,s=(r=r!=null)?Hs(t,i):Wr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Wg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vc.enqueueReplaceState(e,e.state,null)}function Nd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},np(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gn(s):(s=Qt(e)?Ni:Vt.current,i.context=Hs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Vd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vc.enqueueReplaceState(i,i.state,null),Hu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",r=e;do n+=YT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Lh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TR=typeof WeakMap=="function"?WeakMap:Map;function Kw(t,e,n){n=lr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xu||(Xu=!0,Kd=r),bd(t,e)},n}function qw(t,e,n){n=lr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){bd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bd(t,e),typeof r!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Qg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=OR.bind(null,t,e,n),e.then(t,t))}function Yg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=lr(-1,1),e.tag=2,zr(n,e,1))),n.lanes|=1),t)}var SR=mr.ReactCurrentOwner,Kt=!1;function bt(t,e,n,r){e.child=t===null?ww(e,null,n,r):Qs(e,t.child,n,r)}function Xg(t,e,n,r,i){n=n.render;var s=e.ref;return Us(e,i),r=ap(t,e,n,r,s,i),n=lp(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(Ke&&n&&Qf(e),e.flags|=1,bt(t,e,r,i),e.child)}function Zg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!vp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Gw(t,e,s,r,i)):(t=_u(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ca,n(o,r)&&t.ref===e.ref)return dr(t,e,i)}return e.flags|=1,t=$r(s,r),t.ref=e.ref,t.return=e,e.child=t}function Gw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ca(s,r)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,dr(t,e,i)}return Md(t,e,n,r,i)}function Hw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Ls,Xt),Xt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Ls,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,be(Ls,Xt),Xt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,be(Ls,Xt),Xt|=r;return bt(t,e,i,n),e.child}function Ww(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Md(t,e,n,r,i){var s=Qt(n)?Ni:Vt.current;return s=Hs(e,s),Us(e,i),n=ap(t,e,n,r,s,i),r=lp(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(Ke&&r&&Qf(e),e.flags|=1,bt(t,e,n,i),e.child)}function ey(t,e,n,r,i){if(Qt(n)){var s=!0;ju(e)}else s=!1;if(Us(e,i),e.stateNode===null)gu(t,e),$w(e,n,r),Nd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gn(c):(c=Qt(n)?Ni:Vt.current,c=Hs(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Wg(e,o,r,c),Pr=!1;var m=e.memoizedState;o.state=m,Hu(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Wt.current||Pr?(typeof d=="function"&&(Vd(e,n,d,r),u=e.memoizedState),(a=Pr||Hg(e,n,a,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Iw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:An(e.type,a),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=gn(u):(u=Qt(n)?Ni:Vt.current,u=Hs(e,u));var _=n.getDerivedStateFromProps;(d=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&Wg(e,o,r,u),Pr=!1,m=e.memoizedState,o.state=m,Hu(e,r,o,i);var R=e.memoizedState;a!==f||m!==R||Wt.current||Pr?(typeof _=="function"&&(Vd(e,n,_,r),R=e.memoizedState),(c=Pr||Hg(e,n,c,r,m,R,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ld(t,e,n,r,s,i)}function Ld(t,e,n,r,i,s){Ww(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Bg(e,n,!1),dr(t,e,s);r=e.stateNode,SR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Qs(e,t.child,null,s),e.child=Qs(e,null,a,s)):bt(t,e,a,s),e.memoizedState=r.state,i&&Bg(e,n,!0),e.child}function Qw(t){var e=t.stateNode;e.pendingContext?Fg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fg(t,e.context,!1),rp(t,e.containerInfo)}function ty(t,e,n,r,i){return Ws(),Jf(i),e.flags|=256,bt(t,e,n,r),e.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function Fd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yw(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),be(Ge,i&1),t===null)return kd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Mc(o,r,0,null),t=Ci(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Fd(n),e.memoizedState=Od,t):hp(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return RR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=$r(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$r(a,s):(s=Ci(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Fd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Od,r}return s=t.child,t=s.sibling,r=$r(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hp(t,e){return e=Mc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yl(t,e,n,r){return r!==null&&Jf(r),Qs(e,t.child,null,n),t=hp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Lh(Error(K(422))),Yl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Mc({mode:"visible",children:r.children},i,0,null),s=Ci(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Qs(e,t.child,null,o),e.child.memoizedState=Fd(o),e.memoizedState=Od,s);if(!(e.mode&1))return Yl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=Lh(s,r,void 0),Yl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Kt||a){if(r=pt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,hr(t,i),kn(r,t,i,-1))}return yp(),r=Lh(Error(K(421))),Yl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=FR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,tn=Br(i.nextSibling),rn=e,Ke=!0,xn=null,t!==null&&(dn[fn++]=sr,dn[fn++]=or,dn[fn++]=bi,sr=t.id,or=t.overflow,bi=e),e=hp(e,r.children),e.flags|=4096,e)}function ny(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dd(t.return,e,n)}function Oh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Jw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(bt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ny(t,n,e);else if(t.tag===19)ny(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Oh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Oh(e,!0,n,null,s);break;case"together":Oh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Li|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=$r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AR(t,e,n){switch(e.tag){case 3:Qw(e),Ws();break;case 5:Tw(e);break;case 1:Qt(e.type)&&ju(e);break;case 4:rp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;be(qu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?Yw(t,e,n):(be(Ge,Ge.current&1),t=dr(t,e,n),t!==null?t.sibling:null);be(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Jw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,Hw(t,e,n)}return dr(t,e,n)}var Xw,Bd,Zw,eE;Xw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bd=function(){};Zw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ai($n.current);var s=null;switch(n){case"input":i=ad(t,i),r=ad(t,r),s=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),s=[];break;case"textarea":i=cd(t,i),r=cd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zu)}dd(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ia.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ze("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};eE=function(t,e,n,r){n!==r&&(e.flags|=4)};function zo(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PR(t,e,n){var r=e.pendingProps;switch(Yf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return Qt(e.type)&&Uu(),Pt(e),null;case 3:return r=e.stateNode,Ys(),Ue(Wt),Ue(Vt),sp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xn!==null&&(Hd(xn),xn=null))),Bd(t,e),Pt(e),null;case 5:ip(e);var i=Ai(ba.current);if(n=e.type,t!==null&&e.stateNode!=null)Zw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Pt(e),null}if(t=Ai($n.current),Wl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Bn]=e,r[Va]=s,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(i=0;i<Zo.length;i++)ze(Zo[i],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":hg(r,s),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ze("invalid",r);break;case"textarea":fg(r,s),ze("invalid",r)}dd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Hl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Hl(r.textContent,a,t),i=["children",""+a]):Ia.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":Bl(r),dg(r,s,!0);break;case"textarea":Bl(r),pg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=zu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=x_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bn]=e,t[Va]=r,Xw(t,e,!1,!1),e.stateNode=t;e:{switch(o=fd(n,r),n){case"dialog":ze("cancel",t),ze("close",t),i=r;break;case"iframe":case"object":case"embed":ze("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zo.length;i++)ze(Zo[i],t);i=r;break;case"source":ze("error",t),i=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),i=r;break;case"details":ze("toggle",t),i=r;break;case"input":hg(t,r),i=ad(t,r),ze("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),ze("invalid",t);break;case"textarea":fg(t,r),i=cd(t,r),ze("invalid",t);break;default:i=r}dd(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?D_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&C_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ta(t,u):typeof u=="number"&&Ta(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ia.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ze("scroll",t):u!=null&&Mf(t,s,u,o))}switch(n){case"input":Bl(t),dg(t,r,!1);break;case"textarea":Bl(t),pg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Os(t,!!r.multiple,s,!1):r.defaultValue!=null&&Os(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=zu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)eE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Ai(ba.current),Ai($n.current),Wl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bn]=e,(s=r.nodeValue!==n)&&(t=rn,t!==null))switch(t.tag){case 3:Hl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=e,e.stateNode=r}return Pt(e),null;case 13:if(Ue(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&tn!==null&&e.mode&1&&!(e.flags&128))vw(),Ws(),e.flags|=98560,s=!1;else if(s=Wl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Bn]=e}else Ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),s=!1}else xn!==null&&(Hd(xn),xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?ct===0&&(ct=3):yp())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return Ys(),Bd(t,e),t===null&&ka(e.stateNode.containerInfo),Pt(e),null;case 10:return ep(e.type._context),Pt(e),null;case 17:return Qt(e.type)&&Uu(),Pt(e),null;case 19:if(Ue(Ge),s=e.memoizedState,s===null)return Pt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)zo(s,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wu(t),o!==null){for(e.flags|=128,zo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&nt()>Xs&&(e.flags|=128,r=!0,zo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Wu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ke)return Pt(e),null}else 2*nt()-s.renderingStartTime>Xs&&n!==1073741824&&(e.flags|=128,r=!0,zo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nt(),e.sibling=null,n=Ge.current,be(Ge,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return gp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xt&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function xR(t,e){switch(Yf(e),e.tag){case 1:return Qt(e.type)&&Uu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ys(),Ue(Wt),Ue(Vt),sp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ip(e),null;case 13:if(Ue(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Ge),null;case 4:return Ys(),null;case 10:return ep(e.type._context),null;case 22:case 23:return gp(),null;case 24:return null;default:return null}}var Jl=!1,kt=!1,CR=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ms(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function zd(t,e,n){try{n()}catch(r){et(t,e,r)}}var ry=!1;function kR(t,e){if(Td=Ou,t=sw(),Wf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,f=t,m=null;t:for(;;){for(var _;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(_=f.firstChild)!==null;)m=f,f=_;for(;;){if(f===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(u=o),(_=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=_}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sd={focusedElem:t,selectionRange:n},Ou=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var C=R.memoizedProps,D=R.memoizedState,w=e.stateNode,g=w.getSnapshotBeforeUpdate(e.elementType===e.type?C:An(e.type,C),D);w.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(V){et(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return R=ry,ry=!1,R}function fa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&zd(e,n,s)}i=i.next}while(i!==r)}}function Nc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ud(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tE(t){var e=t.alternate;e!==null&&(t.alternate=null,tE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bn],delete e[Va],delete e[Pd],delete e[dR],delete e[fR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nE(t){return t.tag===5||t.tag===3||t.tag===4}function iy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zu));else if(r!==4&&(t=t.child,t!==null))for(jd(t,e,n),t=t.sibling;t!==null;)jd(t,e,n),t=t.sibling}function $d(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($d(t,e,n),t=t.sibling;t!==null;)$d(t,e,n),t=t.sibling}var vt=null,Pn=!1;function Ir(t,e,n){for(n=n.child;n!==null;)rE(t,e,n),n=n.sibling}function rE(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Rc,n)}catch{}switch(n.tag){case 5:kt||Ms(n,e);case 6:var r=vt,i=Pn;vt=null,Ir(t,e,n),vt=r,Pn=i,vt!==null&&(Pn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(Pn?(t=vt,n=n.stateNode,t.nodeType===8?kh(t.parentNode,n):t.nodeType===1&&kh(t,n),Pa(t)):kh(vt,n.stateNode));break;case 4:r=vt,i=Pn,vt=n.stateNode.containerInfo,Pn=!0,Ir(t,e,n),vt=r,Pn=i;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&zd(n,e,o),i=i.next}while(i!==r)}Ir(t,e,n);break;case 1:if(!kt&&(Ms(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){et(n,e,a)}Ir(t,e,n);break;case 21:Ir(t,e,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,Ir(t,e,n),kt=r):Ir(t,e,n);break;default:Ir(t,e,n)}}function sy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CR),e.forEach(function(r){var i=BR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,Pn=!1;break e;case 3:vt=a.stateNode.containerInfo,Pn=!0;break e;case 4:vt=a.stateNode.containerInfo,Pn=!0;break e}a=a.return}if(vt===null)throw Error(K(160));rE(s,o,i),vt=null,Pn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){et(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iE(e,t),e=e.sibling}function iE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rn(e,t),On(t),r&4){try{fa(3,t,t.return),Nc(3,t)}catch(C){et(t,t.return,C)}try{fa(5,t,t.return)}catch(C){et(t,t.return,C)}}break;case 1:Rn(e,t),On(t),r&512&&n!==null&&Ms(n,n.return);break;case 5:if(Rn(e,t),On(t),r&512&&n!==null&&Ms(n,n.return),t.flags&32){var i=t.stateNode;try{Ta(i,"")}catch(C){et(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&A_(i,s),fd(a,o);var c=fd(a,s);for(o=0;o<u.length;o+=2){var d=u[o],f=u[o+1];d==="style"?D_(i,f):d==="dangerouslySetInnerHTML"?C_(i,f):d==="children"?Ta(i,f):Mf(i,d,f,c)}switch(a){case"input":ld(i,s);break;case"textarea":P_(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Os(i,!!s.multiple,_,!1):m!==!!s.multiple&&(s.defaultValue!=null?Os(i,!!s.multiple,s.defaultValue,!0):Os(i,!!s.multiple,s.multiple?[]:"",!1))}i[Va]=s}catch(C){et(t,t.return,C)}}break;case 6:if(Rn(e,t),On(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){et(t,t.return,C)}}break;case 3:if(Rn(e,t),On(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pa(e.containerInfo)}catch(C){et(t,t.return,C)}break;case 4:Rn(e,t),On(t);break;case 13:Rn(e,t),On(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(pp=nt())),r&4&&sy(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(kt=(c=kt)||d,Rn(e,t),kt=c):Rn(e,t),On(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(J=t,d=t.child;d!==null;){for(f=J=d;J!==null;){switch(m=J,_=m.child,m.tag){case 0:case 11:case 14:case 15:fa(4,m,m.return);break;case 1:Ms(m,m.return);var R=m.stateNode;if(typeof R.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(C){et(r,n,C)}}break;case 5:Ms(m,m.return);break;case 22:if(m.memoizedState!==null){ay(f);continue}}_!==null?(_.return=m,J=_):ay(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=k_("display",o))}catch(C){et(t,t.return,C)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(C){et(t,t.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Rn(e,t),On(t),r&4&&sy(t);break;case 21:break;default:Rn(e,t),On(t)}}function On(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nE(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ta(i,""),r.flags&=-33);var s=iy(t);$d(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=iy(t);jd(t,a,o);break;default:throw Error(K(161))}}catch(u){et(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DR(t,e,n){J=t,sE(t)}function sE(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Jl;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||kt;a=Jl;var c=kt;if(Jl=o,(kt=u)&&!c)for(J=i;J!==null;)o=J,u=o.child,o.tag===22&&o.memoizedState!==null?ly(i):u!==null?(u.return=o,J=u):ly(i);for(;s!==null;)J=s,sE(s),s=s.sibling;J=i,Jl=a,kt=c}oy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):oy(t)}}function oy(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kt||Nc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:An(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Kg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Kg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Pa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}kt||e.flags&512&&Ud(e)}catch(m){et(e,e.return,m)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function ay(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function ly(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nc(4,e)}catch(u){et(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){et(e,i,u)}}var s=e.return;try{Ud(e)}catch(u){et(e,s,u)}break;case 5:var o=e.return;try{Ud(e)}catch(u){et(e,o,u)}}}catch(u){et(e,e.return,u)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var VR=Math.ceil,Ju=mr.ReactCurrentDispatcher,dp=mr.ReactCurrentOwner,mn=mr.ReactCurrentBatchConfig,Re=0,pt=null,at=null,wt=0,Xt=0,Ls=ei(0),ct=0,Fa=null,Li=0,bc=0,fp=0,pa=null,$t=null,pp=0,Xs=1/0,nr=null,Xu=!1,Kd=null,Ur=null,Xl=!1,br=null,Zu=0,ma=0,qd=null,yu=-1,vu=0;function Mt(){return Re&6?nt():yu!==-1?yu:yu=nt()}function jr(t){return t.mode&1?Re&2&&wt!==0?wt&-wt:mR.transition!==null?(vu===0&&(vu=$_()),vu):(t=De,t!==0||(t=window.event,t=t===void 0?16:Y_(t.type)),t):1}function kn(t,e,n,r){if(50<ma)throw ma=0,qd=null,Error(K(185));nl(t,n,r),(!(Re&2)||t!==pt)&&(t===pt&&(!(Re&2)&&(bc|=n),ct===4&&kr(t,wt)),Yt(t,r),n===1&&Re===0&&!(e.mode&1)&&(Xs=nt()+500,kc&&ti()))}function Yt(t,e){var n=t.callbackNode;mS(t,e);var r=Lu(t,t===pt?wt:0);if(r===0)n!==null&&yg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yg(n),e===1)t.tag===0?pR(uy.bind(null,t)):mw(uy.bind(null,t)),cR(function(){!(Re&6)&&ti()}),n=null;else{switch(K_(r)){case 1:n=zf;break;case 4:n=U_;break;case 16:n=Mu;break;case 536870912:n=j_;break;default:n=Mu}n=fE(n,oE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oE(t,e){if(yu=-1,vu=0,Re&6)throw Error(K(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var r=Lu(t,t===pt?wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ec(t,r);else{e=r;var i=Re;Re|=2;var s=lE();(pt!==t||wt!==e)&&(nr=null,Xs=nt()+500,xi(t,e));do try{MR();break}catch(a){aE(t,a)}while(!0);Zf(),Ju.current=s,Re=i,at!==null?e=0:(pt=null,wt=0,e=ct)}if(e!==0){if(e===2&&(i=vd(t),i!==0&&(r=i,e=Gd(t,i))),e===1)throw n=Fa,xi(t,0),kr(t,r),Yt(t,nt()),n;if(e===6)kr(t,r);else{if(i=t.current.alternate,!(r&30)&&!NR(i)&&(e=ec(t,r),e===2&&(s=vd(t),s!==0&&(r=s,e=Gd(t,s))),e===1))throw n=Fa,xi(t,0),kr(t,r),Yt(t,nt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:mi(t,$t,nr);break;case 3:if(kr(t,r),(r&130023424)===r&&(e=pp+500-nt(),10<e)){if(Lu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ad(mi.bind(null,t,$t,nr),e);break}mi(t,$t,nr);break;case 4:if(kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Cn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VR(r/1960))-r,10<r){t.timeoutHandle=Ad(mi.bind(null,t,$t,nr),r);break}mi(t,$t,nr);break;case 5:mi(t,$t,nr);break;default:throw Error(K(329))}}}return Yt(t,nt()),t.callbackNode===n?oE.bind(null,t):null}function Gd(t,e){var n=pa;return t.current.memoizedState.isDehydrated&&(xi(t,e).flags|=256),t=ec(t,e),t!==2&&(e=$t,$t=n,e!==null&&Hd(e)),t}function Hd(t){$t===null?$t=t:$t.push.apply($t,t)}function NR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Dn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kr(t,e){for(e&=~fp,e&=~bc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),r=1<<n;t[n]=-1,e&=~r}}function uy(t){if(Re&6)throw Error(K(327));js();var e=Lu(t,0);if(!(e&1))return Yt(t,nt()),null;var n=ec(t,e);if(t.tag!==0&&n===2){var r=vd(t);r!==0&&(e=r,n=Gd(t,r))}if(n===1)throw n=Fa,xi(t,0),kr(t,e),Yt(t,nt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,$t,nr),Yt(t,nt()),null}function mp(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Xs=nt()+500,kc&&ti())}}function Oi(t){br!==null&&br.tag===0&&!(Re&6)&&js();var e=Re;Re|=1;var n=mn.transition,r=De;try{if(mn.transition=null,De=1,t)return t()}finally{De=r,mn.transition=n,Re=e,!(Re&6)&&ti()}}function gp(){Xt=Ls.current,Ue(Ls)}function xi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uR(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(Yf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uu();break;case 3:Ys(),Ue(Wt),Ue(Vt),sp();break;case 5:ip(r);break;case 4:Ys();break;case 13:Ue(Ge);break;case 19:Ue(Ge);break;case 10:ep(r.type._context);break;case 22:case 23:gp()}n=n.return}if(pt=t,at=t=$r(t.current,null),wt=Xt=e,ct=0,Fa=null,fp=bc=Li=0,$t=pa=null,Ri!==null){for(e=0;e<Ri.length;e++)if(n=Ri[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ri=null}return t}function aE(t,e){do{var n=at;try{if(Zf(),pu.current=Yu,Qu){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Qu=!1}if(Mi=0,ft=ut=We=null,da=!1,Ma=0,dp.current=null,n===null||n.return===null){ct=1,Fa=e,at=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=wt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var _=Yg(o);if(_!==null){_.flags&=-257,Jg(_,o,a,s,e),_.mode&1&&Qg(s,c,e),e=_,u=c;var R=e.updateQueue;if(R===null){var C=new Set;C.add(u),e.updateQueue=C}else R.add(u);break e}else{if(!(e&1)){Qg(s,c,e),yp();break e}u=Error(K(426))}}else if(Ke&&a.mode&1){var D=Yg(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Jg(D,o,a,s,e),Jf(Js(u,a));break e}}s=u=Js(u,a),ct!==4&&(ct=2),pa===null?pa=[s]:pa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Kw(s,u,e);$g(s,w);break e;case 1:a=u;var g=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ur===null||!Ur.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=qw(s,a,e);$g(s,V);break e}}s=s.return}while(s!==null)}cE(n)}catch(B){e=B,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function lE(){var t=Ju.current;return Ju.current=Yu,t===null?Yu:t}function yp(){(ct===0||ct===3||ct===2)&&(ct=4),pt===null||!(Li&268435455)&&!(bc&268435455)||kr(pt,wt)}function ec(t,e){var n=Re;Re|=2;var r=lE();(pt!==t||wt!==e)&&(nr=null,xi(t,e));do try{bR();break}catch(i){aE(t,i)}while(!0);if(Zf(),Re=n,Ju.current=r,at!==null)throw Error(K(261));return pt=null,wt=0,ct}function bR(){for(;at!==null;)uE(at)}function MR(){for(;at!==null&&!oS();)uE(at)}function uE(t){var e=dE(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?cE(t):at=e,dp.current=null}function cE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xR(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,at=null;return}}else if(n=PR(n,e,Xt),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ct===0&&(ct=5)}function mi(t,e,n){var r=De,i=mn.transition;try{mn.transition=null,De=1,LR(t,e,n,r)}finally{mn.transition=i,De=r}return null}function LR(t,e,n,r){do js();while(br!==null);if(Re&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(gS(t,s),t===pt&&(at=pt=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xl||(Xl=!0,fE(Mu,function(){return js(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=De;De=1;var a=Re;Re|=4,dp.current=null,kR(t,n),iE(n,t),nR(Sd),Ou=!!Td,Sd=Td=null,t.current=n,DR(n),aS(),Re=a,De=o,mn.transition=s}else t.current=n;if(Xl&&(Xl=!1,br=t,Zu=i),s=t.pendingLanes,s===0&&(Ur=null),cS(n.stateNode),Yt(t,nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xu)throw Xu=!1,t=Kd,Kd=null,t;return Zu&1&&t.tag!==0&&js(),s=t.pendingLanes,s&1?t===qd?ma++:(ma=0,qd=t):ma=0,ti(),null}function js(){if(br!==null){var t=K_(Zu),e=mn.transition,n=De;try{if(mn.transition=null,De=16>t?16:t,br===null)var r=!1;else{if(t=br,br=null,Zu=0,Re&6)throw Error(K(331));var i=Re;for(Re|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(J=c;J!==null;){var d=J;switch(d.tag){case 0:case 11:case 15:fa(8,d,s)}var f=d.child;if(f!==null)f.return=d,J=f;else for(;J!==null;){d=J;var m=d.sibling,_=d.return;if(tE(d),d===c){J=null;break}if(m!==null){m.return=_,J=m;break}J=_}}}var R=s.alternate;if(R!==null){var C=R.child;if(C!==null){R.child=null;do{var D=C.sibling;C.sibling=null,C=D}while(C!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fa(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,J=w;break e}J=s.return}}var g=t.current;for(J=g;J!==null;){o=J;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,J=I;else e:for(o=g;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nc(9,a)}}catch(B){et(a,a.return,B)}if(a===o){J=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,J=V;break e}J=a.return}}if(Re=i,ti(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Rc,t)}catch{}r=!0}return r}finally{De=n,mn.transition=e}}return!1}function cy(t,e,n){e=Js(n,e),e=Kw(t,e,1),t=zr(t,e,1),e=Mt(),t!==null&&(nl(t,1,e),Yt(t,e))}function et(t,e,n){if(t.tag===3)cy(t,t,n);else for(;e!==null;){if(e.tag===3){cy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ur===null||!Ur.has(r))){t=Js(n,t),t=qw(e,t,1),e=zr(e,t,1),t=Mt(),e!==null&&(nl(e,1,t),Yt(e,t));break}}e=e.return}}function OR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(wt&n)===n&&(ct===4||ct===3&&(wt&130023424)===wt&&500>nt()-pp?xi(t,0):fp|=n),Yt(t,e)}function hE(t,e){e===0&&(t.mode&1?(e=jl,jl<<=1,!(jl&130023424)&&(jl=4194304)):e=1);var n=Mt();t=hr(t,e),t!==null&&(nl(t,e,n),Yt(t,n))}function FR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hE(t,n)}function BR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),hE(t,n)}var dE;dE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,AR(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,Ke&&e.flags&1048576&&gw(e,Ku,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;gu(t,e),t=e.pendingProps;var i=Hs(e,Vt.current);Us(e,n),i=ap(null,e,r,t,i,n);var s=lp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(r)?(s=!0,ju(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,np(e),i.updater=Vc,e.stateNode=i,i._reactInternals=e,Nd(e,r,t,n),e=Ld(null,e,r,!0,s,n)):(e.tag=0,Ke&&s&&Qf(e),bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(gu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=UR(r),t=An(r,t),i){case 0:e=Md(null,e,r,t,n);break e;case 1:e=ey(null,e,r,t,n);break e;case 11:e=Xg(null,e,r,t,n);break e;case 14:e=Zg(null,e,r,An(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),Md(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),ey(t,e,r,i,n);case 3:e:{if(Qw(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Iw(t,e),Hu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Js(Error(K(423)),e),e=ty(t,e,r,n,i);break e}else if(r!==i){i=Js(Error(K(424)),e),e=ty(t,e,r,n,i);break e}else for(tn=Br(e.stateNode.containerInfo.firstChild),rn=e,Ke=!0,xn=null,n=ww(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ws(),r===i){e=dr(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return Tw(e),t===null&&kd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Rd(r,i)?o=null:s!==null&&Rd(r,s)&&(e.flags|=32),Ww(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&kd(e),null;case 13:return Yw(t,e,n);case 4:return rp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qs(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),Xg(t,e,r,i,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,be(qu,r._currentValue),r._currentValue=o,s!==null)if(Dn(s.value,o)){if(s.children===i.children&&!Wt.current){e=dr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=lr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Dd(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Dd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Us(e,n),i=gn(i),r=r(i),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,i=An(r,e.pendingProps),i=An(r.type,i),Zg(t,e,r,i,n);case 15:return Gw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),gu(t,e),e.tag=1,Qt(r)?(t=!0,ju(e)):t=!1,Us(e,n),$w(e,r,i),Nd(e,r,i,n),Ld(null,e,r,!0,t,n);case 19:return Jw(t,e,n);case 22:return Hw(t,e,n)}throw Error(K(156,e.tag))};function fE(t,e){return z_(t,e)}function zR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,r){return new zR(t,e,n,r)}function vp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UR(t){if(typeof t=="function")return vp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Of)return 11;if(t===Ff)return 14}return 2}function $r(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _u(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")vp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case As:return Ci(n.children,i,s,e);case Lf:o=8,i|=8;break;case rd:return t=pn(12,n,e,i|2),t.elementType=rd,t.lanes=s,t;case id:return t=pn(13,n,e,i),t.elementType=id,t.lanes=s,t;case sd:return t=pn(19,n,e,i),t.elementType=sd,t.lanes=s,t;case T_:return Mc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E_:o=10;break e;case I_:o=9;break e;case Of:o=11;break e;case Ff:o=14;break e;case Ar:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=pn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ci(t,e,n,r){return t=pn(7,t,r,e),t.lanes=n,t}function Mc(t,e,n,r){return t=pn(22,t,r,e),t.elementType=T_,t.lanes=n,t.stateNode={isHidden:!1},t}function Fh(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function Bh(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_h(0),this.expirationTimes=_h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_h(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _p(t,e,n,r,i,s,o,a,u){return t=new jR(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},np(s),t}function $R(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pE(t){if(!t)return Wr;t=t._reactInternals;e:{if(Hi(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Qt(n))return pw(t,n,e)}return e}function mE(t,e,n,r,i,s,o,a,u){return t=_p(n,r,!0,t,i,s,o,a,u),t.context=pE(null),n=t.current,r=Mt(),i=jr(n),s=lr(r,i),s.callback=e??null,zr(n,s,i),t.current.lanes=i,nl(t,i,r),Yt(t,r),t}function Lc(t,e,n,r){var i=e.current,s=Mt(),o=jr(i);return n=pE(n),e.context===null?e.context=n:e.pendingContext=n,e=lr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zr(i,e,o),t!==null&&(kn(t,i,o,s),fu(t,i,o)),o}function tc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wp(t,e){hy(t,e),(t=t.alternate)&&hy(t,e)}function KR(){return null}var gE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ep(t){this._internalRoot=t}Oc.prototype.render=Ep.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Lc(t,e,null,null)};Oc.prototype.unmount=Ep.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oi(function(){Lc(null,t,null,null)}),e[cr]=null}};function Oc(t){this._internalRoot=t}Oc.prototype.unstable_scheduleHydration=function(t){if(t){var e=H_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&Q_(t)}};function Ip(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dy(){}function qR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=tc(o);s.call(c)}}var o=mE(e,r,t,0,null,!1,!1,"",dy);return t._reactRootContainer=o,t[cr]=o.current,ka(t.nodeType===8?t.parentNode:t),Oi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=tc(u);a.call(c)}}var u=_p(t,0,!1,null,null,!1,!1,"",dy);return t._reactRootContainer=u,t[cr]=u.current,ka(t.nodeType===8?t.parentNode:t),Oi(function(){Lc(e,u,n,r)}),u}function Bc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=tc(o);a.call(u)}}Lc(e,o,t,i)}else o=qR(n,e,t,i,r);return tc(o)}q_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xo(e.pendingLanes);n!==0&&(Uf(e,n|1),Yt(e,nt()),!(Re&6)&&(Xs=nt()+500,ti()))}break;case 13:Oi(function(){var r=hr(t,1);if(r!==null){var i=Mt();kn(r,t,1,i)}}),wp(t,1)}};jf=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=Mt();kn(e,t,134217728,n)}wp(t,134217728)}};G_=function(t){if(t.tag===13){var e=jr(t),n=hr(t,e);if(n!==null){var r=Mt();kn(n,t,e,r)}wp(t,e)}};H_=function(){return De};W_=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};md=function(t,e,n){switch(e){case"input":if(ld(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Cc(r);if(!i)throw Error(K(90));R_(r),ld(r,i)}}}break;case"textarea":P_(t,n);break;case"select":e=n.value,e!=null&&Os(t,!!n.multiple,e,!1)}};b_=mp;M_=Oi;var GR={usingClientEntryPoint:!1,Events:[il,ks,Cc,V_,N_,mp]},Uo={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HR={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=F_(t),t===null?null:t.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||KR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zl.isDisabled&&Zl.supportsFiber)try{Rc=Zl.inject(HR),jn=Zl}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GR;ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ip(e))throw Error(K(200));return $R(t,e,null,n)};ln.createRoot=function(t,e){if(!Ip(t))throw Error(K(299));var n=!1,r="",i=gE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_p(t,1,!1,null,null,n,!1,r,i),t[cr]=e.current,ka(t.nodeType===8?t.parentNode:t),new Ep(e)};ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=F_(e),t=t===null?null:t.stateNode,t};ln.flushSync=function(t){return Oi(t)};ln.hydrate=function(t,e,n){if(!Fc(e))throw Error(K(200));return Bc(null,t,e,!0,n)};ln.hydrateRoot=function(t,e,n){if(!Ip(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=gE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mE(e,null,t,1,n??null,i,!1,s,o),t[cr]=e.current,ka(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Oc(e)};ln.render=function(t,e,n){if(!Fc(e))throw Error(K(200));return Bc(null,t,e,!1,n)};ln.unmountComponentAtNode=function(t){if(!Fc(t))throw Error(K(40));return t._reactRootContainer?(Oi(function(){Bc(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};ln.unstable_batchedUpdates=mp;ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fc(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Bc(t,e,n,!1,r)};ln.version="18.3.1-next-f1338f8080-20240426";function yE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yE)}catch(t){console.error(t)}}yE(),y_.exports=ln;var vE=y_.exports,fy=vE;td.createRoot=fy.createRoot,td.hydrateRoot=fy.hydrateRoot;var Tp={};Object.defineProperty(Tp,"__esModule",{value:!0});Tp.parse=eA;Tp.serialize=tA;const WR=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,QR=/^[\u0021-\u003A\u003C-\u007E]*$/,YR=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,JR=/^[\u0020-\u003A\u003D-\u007E]*$/,XR=Object.prototype.toString,ZR=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function eA(t,e){const n=new ZR,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||nA;let s=0;do{const o=t.indexOf("=",s);if(o===-1)break;const a=t.indexOf(";",s),u=a===-1?r:a;if(o>u){s=t.lastIndexOf(";",o-1)+1;continue}const c=py(t,s,o),d=my(t,o,c),f=t.slice(c,d);if(n[f]===void 0){let m=py(t,o+1,u),_=my(t,u,m);const R=i(t.slice(m,_));n[f]=R}s=u+1}while(s<r);return n}function py(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function my(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function tA(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!WR.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!QR.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!YR.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!JR.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!rA(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function nA(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function rA(t){return XR.call(t)==="[object Date]"}/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _E=t=>{throw TypeError(t)},iA=(t,e,n)=>e.has(t)||_E("Cannot "+n),zh=(t,e,n)=>(iA(t,e,"read from private field"),n?n.call(t):e.get(t)),sA=(t,e,n)=>e.has(t)?_E("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),gy="popstate";function oA(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Ba("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Qr(i)}return lA(e,n,null,t)}function fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aA(){return Math.random().toString(36).substring(2,10)}function yy(t,e){return{usr:t.state,key:t.key,idx:e}}function Ba(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ni(e):e,state:n,key:e&&e.key||r||aA()}}function Qr({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ni(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function lA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function f(){a="POP";let D=d(),w=D==null?null:D-c;c=D,u&&u({action:a,location:C.location,delta:w})}function m(D,w){a="PUSH";let g=Ba(C.location,D,w);c=d()+1;let I=yy(g,c),V=C.createHref(g);try{o.pushState(I,"",V)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(V)}s&&u&&u({action:a,location:C.location,delta:1})}function _(D,w){a="REPLACE";let g=Ba(C.location,D,w);c=d();let I=yy(g,c),V=C.createHref(g);o.replaceState(I,"",V),s&&u&&u({action:a,location:C.location,delta:0})}function R(D){let w=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof D=="string"?D:Qr(D);return g=g.replace(/ $/,"%20"),fe(w,`No window.location.(origin|href) available to create URL for href: ${g}`),new URL(g,w)}let C={get action(){return a},get location(){return t(i,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(gy,f),u=D,()=>{i.removeEventListener(gy,f),u=null}},createHref(D){return e(i,D)},createURL:R,encodeLocation(D){let w=R(D);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:_,go(D){return o.go(D)}};return C}var ea,vy=class{constructor(t){if(sA(this,ea,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(zh(this,ea).has(t))return zh(this,ea).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){zh(this,ea).set(t,e)}};ea=new WeakMap;var uA=new Set(["lazy","caseSensitive","path","id","index","children"]);function cA(t){return uA.has(t)}var hA=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function dA(t){return hA.has(t)}function fA(t){return t.index===!0}function nc(t,e,n=[],r={}){return t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(fe(i.index!==!0||!i.children,"Cannot specify children on an index route"),fe(!r[a],`Found a route id collision on id "${a}".  Route id's must be globally unique within Data Router usages`),fA(i)){let u={...i,...e(i),id:a};return r[a]=u,u}else{let u={...i,...e(i),id:a,children:void 0};return r[a]=u,i.children&&(u.children=nc(i.children,e,o,r)),u}})}function Dr(t,e,n="/"){return wu(t,e,n,!1)}function wu(t,e,n,r){let i=typeof e=="string"?ni(e):e,s=vn(i.pathname||"/",n);if(s==null)return null;let o=wE(t);mA(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=AA(s);a=SA(o[u],c,r)}return a}function pA(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function wE(t,e=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(fe(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let c=Kn([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(fe(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),wE(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:IA(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of EE(s.path))i(s,o,u)}),e}function EE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=EE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function mA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var gA=/^:[\w-]+$/,yA=3,vA=2,_A=1,wA=10,EA=-2,_y=t=>t==="*";function IA(t,e){let n=t.split("/"),r=n.length;return n.some(_y)&&(r+=EA),e&&(r+=vA),n.filter(i=>!_y(i)).reduce((i,s)=>i+(gA.test(s)?yA:s===""?_A:wA),r)}function TA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function SA(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=rc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),m=u.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=rc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Kn([s,f.pathname]),pathnameBase:CA(Kn([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Kn([s,f.pathnameBase]))}return o}function rc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:f},m)=>{if(d==="*"){let R=a[m]||"";o=s.slice(0,s.length-R.length).replace(/(.)\/+$/,"$1")}const _=a[m];return f&&!_?c[d]=void 0:c[d]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function RA(t,e=!1,n=!0){lt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function AA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function PA(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ni(t):t;return{pathname:n?n.startsWith("/")?n:xA(n,e):e,search:kA(r),hash:DA(i)}}function xA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Uh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Sp(t){let e=IE(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Rp(t,e,n,r=!1){let i;typeof t=="string"?i=ni(t):(i={...t},fe(!i.pathname||!i.pathname.includes("?"),Uh("?","pathname","search",i)),fe(!i.pathname||!i.pathname.includes("#"),Uh("#","pathname","hash",i)),fe(!i.search||!i.search.includes("#"),Uh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}a=f>=0?e[f]:"/"}let u=PA(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}var Kn=t=>t.join("/").replace(/\/\/+/g,"/"),CA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,ic=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function za(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var TE=["POST","PUT","PATCH","DELETE"],VA=new Set(TE),NA=["GET",...TE],bA=new Set(NA),MA=new Set([301,302,303,307,308]),LA=new Set([307,308]),jh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},OA={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},jo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ap=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FA=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),SE="remix-router-transitions",RE=Symbol("ResetLoaderData");function BA(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";fe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||FA,s={},o=nc(t.routes,i,void 0,s),a,u=t.basename||"/",c=t.dataStrategy||KA,d={unstable_middleware:!1,...t.future},f=null,m=new Set,_=null,R=null,C=null,D=t.hydrationData!=null,w=Dr(o,t.history.location,u),g=!1,I=null;if(w==null&&!t.patchRoutesOnNavigation){let x=hn(404,{pathname:t.history.location.pathname}),{matches:N,route:O}=Dy(o);w=N,I={[O.id]:x}}w&&!t.hydrationData&&cn(w,o,t.history.location.pathname).active&&(w=null);let V;if(w)if(w.some(x=>x.route.lazy))V=!1;else if(!w.some(x=>x.route.loader))V=!0;else{let x=t.hydrationData?t.hydrationData.loaderData:null,N=t.hydrationData?t.hydrationData.errors:null;if(N){let O=w.findIndex($=>N[$.route.id]!==void 0);V=w.slice(0,O+1).every($=>!Qd($.route,x,N))}else V=w.every(O=>!Qd(O.route,x,N))}else{V=!1,w=[];let x=cn(null,o,t.history.location.pathname);x.active&&x.matches&&(g=!0,w=x.matches)}let B,P={historyAction:t.history.action,location:t.history.location,matches:w,initialized:V,navigation:jh,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||I,fetchers:new Map,blockers:new Map},E="POP",y=!1,T,A=!1,k=new Map,b=null,S=!1,ge=!1,Je=new Set,ye=new Map,Xe=0,q=-1,re=new Map,oe=new Set,we=new Map,Se=new Map,Ae=new Set,mt=new Map,Ut,gt=null;function _n(){if(f=t.history.listen(({action:x,location:N,delta:O})=>{if(Ut){Ut(),Ut=void 0;return}lt(mt.size===0||O!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let $=is({currentLocation:P.location,nextLocation:N,historyAction:x});if($&&O!=null){let W=new Promise(te=>{Ut=te});t.history.go(O*-1),rs($,{state:"blocked",location:N,proceed(){rs($,{state:"proceeding",proceed:void 0,reset:void 0,location:N}),W.then(()=>t.history.go(O))},reset(){let te=new Map(P.blockers);te.set($,jo),st({blockers:te})}});return}return En(x,N)}),n){tP(e,k);let x=()=>nP(e,k);e.addEventListener("pagehide",x),b=()=>e.removeEventListener("pagehide",x)}return P.initialized||En("POP",P.location,{initialHydration:!0}),B}function oh(){f&&f(),b&&b(),m.clear(),T&&T.abort(),P.fetchers.forEach((x,N)=>ns(N)),P.blockers.forEach((x,N)=>Il(N))}function ah(x){return m.add(x),()=>m.delete(x)}function st(x,N={}){P={...P,...x};let O=[],$=[];P.fetchers.forEach((W,te)=>{W.state==="idle"&&(Ae.has(te)?O.push(te):$.push(te))}),Ae.forEach(W=>{!P.fetchers.has(W)&&!ye.has(W)&&O.push(W)}),[...m].forEach(W=>W(P,{deletedFetchers:O,viewTransitionOpts:N.viewTransitionOpts,flushSync:N.flushSync===!0})),O.forEach(W=>ns(W)),$.forEach(W=>P.fetchers.delete(W))}function wn(x,N,{flushSync:O}={}){var ae,ce;let $=P.actionData!=null&&P.navigation.formMethod!=null&&en(P.navigation.formMethod)&&P.navigation.state==="loading"&&((ae=x.state)==null?void 0:ae._isRedirect)!==!0,W;N.actionData?Object.keys(N.actionData).length>0?W=N.actionData:W=null:$?W=P.actionData:W=null;let te=N.loaderData?Cy(P.loaderData,N.loaderData,N.matches||[],N.errors):P.loaderData,ue=P.blockers;ue.size>0&&(ue=new Map(ue),ue.forEach((ie,de)=>ue.set(de,jo)));let X=y===!0||P.navigation.formMethod!=null&&en(P.navigation.formMethod)&&((ce=x.state)==null?void 0:ce._isRedirect)!==!0;a&&(o=a,a=void 0),S||E==="POP"||(E==="PUSH"?t.history.push(x,x.state):E==="REPLACE"&&t.history.replace(x,x.state));let ne;if(E==="POP"){let ie=k.get(P.location.pathname);ie&&ie.has(x.pathname)?ne={currentLocation:P.location,nextLocation:x}:k.has(x.pathname)&&(ne={currentLocation:x,nextLocation:P.location})}else if(A){let ie=k.get(P.location.pathname);ie?ie.add(x.pathname):(ie=new Set([x.pathname]),k.set(P.location.pathname,ie)),ne={currentLocation:P.location,nextLocation:x}}st({...N,actionData:W,loaderData:te,historyAction:E,location:x,initialized:!0,navigation:jh,revalidation:"idle",restoreScrollPosition:os(x,N.matches||P.matches),preventScrollReset:X,blockers:ue},{viewTransitionOpts:ne,flushSync:O===!0}),E="POP",y=!1,A=!1,S=!1,ge=!1,gt==null||gt.resolve(),gt=null}async function Zi(x,N){if(typeof x=="number"){t.history.go(x);return}let O=Wd(P.location,P.matches,u,x,N==null?void 0:N.fromRouteId,N==null?void 0:N.relative),{path:$,submission:W,error:te}=wy(!1,O,N),ue=P.location,X=Ba(P.location,$,N&&N.state);X={...X,...t.history.encodeLocation(X)};let ne=N&&N.replace!=null?N.replace:void 0,ae="PUSH";ne===!0?ae="REPLACE":ne===!1||W!=null&&en(W.formMethod)&&W.formAction===P.location.pathname+P.location.search&&(ae="REPLACE");let ce=N&&"preventScrollReset"in N?N.preventScrollReset===!0:void 0,ie=(N&&N.flushSync)===!0,de=is({currentLocation:ue,nextLocation:X,historyAction:ae});if(de){rs(de,{state:"blocked",location:X,proceed(){rs(de,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),Zi(x,N)},reset(){let xe=new Map(P.blockers);xe.set(de,jo),st({blockers:xe})}});return}await En(ae,X,{submission:W,pendingError:te,preventScrollReset:ce,replace:N&&N.replace,enableViewTransition:N&&N.viewTransition,flushSync:ie})}function wo(){gt||(gt=rP()),ts(),st({revalidation:"loading"});let x=gt.promise;return P.navigation.state==="submitting"?x:P.navigation.state==="idle"?(En(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),x):(En(E||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:A===!0}),x)}async function En(x,N,O){T&&T.abort(),T=null,E=x,S=(O&&O.startUninterruptedRevalidation)===!0,Ao(P.location,P.matches),y=(O&&O.preventScrollReset)===!0,A=(O&&O.enableViewTransition)===!0;let $=a||o,W=O&&O.overrideNavigation,te=O!=null&&O.initialHydration&&P.matches&&P.matches.length>0&&!g?P.matches:Dr($,N,u),ue=(O&&O.flushSync)===!0;if(te&&P.initialized&&!ge&&YA(P.location,N)&&!(O&&O.submission&&en(O.submission.formMethod))){wn(N,{matches:te},{flushSync:ue});return}let X=cn(te,$,N.pathname);if(X.active&&X.matches&&(te=X.matches),!te){let{error:Fe,notFoundMatches:It,route:Ee}=ss(N.pathname);wn(N,{matches:It,loaderData:{},errors:{[Ee.id]:Fe}},{flushSync:ue});return}T=new AbortController;let ne=_s(t.history,N,T.signal,O&&O.submission),ae=new vy(t.unstable_getContext?await t.unstable_getContext():void 0),ce;if(O&&O.pendingError)ce=[_i(te).route.id,{type:"error",error:O.pendingError}];else if(O&&O.submission&&en(O.submission.formMethod)){let Fe=await Eo(ne,N,O.submission,te,ae,X.active,O&&O.initialHydration===!0,{replace:O.replace,flushSync:ue});if(Fe.shortCircuited)return;if(Fe.pendingActionResult){let[It,Ee]=Fe.pendingActionResult;if(Zt(Ee)&&za(Ee.error)&&Ee.error.status===404){T=null,wn(N,{matches:Fe.matches,loaderData:{},errors:{[It]:Ee.error}});return}}te=Fe.matches||te,ce=Fe.pendingActionResult,W=$h(N,O.submission),ue=!1,X.active=!1,ne=_s(t.history,ne.url,ne.signal)}let{shortCircuited:ie,matches:de,loaderData:xe,errors:je}=await yl(ne,N,te,ae,X.active,W,O&&O.submission,O&&O.fetcherSubmission,O&&O.replace,O&&O.initialHydration===!0,ue,ce);ie||(T=null,wn(N,{matches:de||te,...ky(ce),loaderData:xe,errors:je}))}async function Eo(x,N,O,$,W,te,ue,X={}){ts();let ne=ZA(N,O);if(st({navigation:ne},{flushSync:X.flushSync===!0}),te){let ie=await li($,N.pathname,x.signal);if(ie.type==="aborted")return{shortCircuited:!0};if(ie.type==="error"){let de=_i(ie.partialMatches).route.id;return{matches:ie.partialMatches,pendingActionResult:[de,{type:"error",error:ie.error}]}}else if(ie.matches)$=ie.matches;else{let{notFoundMatches:de,error:xe,route:je}=ss(N.pathname);return{matches:de,pendingActionResult:[je.id,{type:"error",error:xe}]}}}let ae,ce=ta($,N);if(!ce.route.action&&!ce.route.lazy)ae={type:"error",error:hn(405,{method:x.method,pathname:N.pathname,routeId:ce.route.id})};else{let ie=$s(i,s,x,$,ce,ue?[]:r,W),de=await Xn(x,ie,W,null);if(ae=de[ce.route.id],!ae){for(let xe of $)if(de[xe.route.id]){ae=de[xe.route.id];break}}if(x.signal.aborted)return{shortCircuited:!0}}if(Pi(ae)){let ie;return X&&X.replace!=null?ie=X.replace:ie=Ay(ae.response.headers.get("Location"),new URL(x.url),u)===P.location.pathname+P.location.search,await Jn(x,ae,!0,{submission:O,replace:ie}),{shortCircuited:!0}}if(Zt(ae)){let ie=_i($,ce.route.id);return(X&&X.replace)!==!0&&(E="PUSH"),{matches:$,pendingActionResult:[ie.route.id,ae,ce.route.id]}}return{matches:$,pendingActionResult:[ce.route.id,ae]}}async function yl(x,N,O,$,W,te,ue,X,ne,ae,ce,ie){let de=te||$h(N,ue),xe=ue||X||Ny(de),je=!S&&!ae;if(W){if(je){let Tt=vl(ie);st({navigation:de,...Tt!==void 0?{actionData:Tt}:{}},{flushSync:ce})}let ve=await li(O,N.pathname,x.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){let Tt=_i(ve.partialMatches).route.id;return{matches:ve.partialMatches,loaderData:{},errors:{[Tt]:ve.error}}}else if(ve.matches)O=ve.matches;else{let{error:Tt,notFoundMatches:Mn,route:ci}=ss(N.pathname);return{matches:Mn,loaderData:{},errors:{[ci.id]:Tt}}}}let Fe=a||o,{dsMatches:It,revalidatingFetchers:Ee}=Ey(x,$,i,s,t.history,P,O,xe,N,ae?[]:r,ae===!0,ge,Je,Ae,we,oe,Fe,u,ie);if(q=++Xe,!t.dataStrategy&&!It.some(ve=>ve.shouldLoad)&&Ee.length===0){let ve=To();return wn(N,{matches:O,loaderData:{},errors:ie&&Zt(ie[1])?{[ie[0]]:ie[1].error}:null,...ky(ie),...ve?{fetchers:new Map(P.fetchers)}:{}},{flushSync:ce}),{shortCircuited:!0}}if(je){let ve={};if(!W){ve.navigation=de;let Tt=vl(ie);Tt!==void 0&&(ve.actionData=Tt)}Ee.length>0&&(ve.fetchers=lh(Ee)),st(ve,{flushSync:ce})}Ee.forEach(ve=>{Vn(ve.key),ve.controller&&ye.set(ve.key,ve.controller)});let Zn=()=>Ee.forEach(ve=>Vn(ve.key));T&&T.signal.addEventListener("abort",Zn);let{loaderResults:In,fetcherResults:_r}=await es(It,Ee,x,$);if(x.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",Zn),Ee.forEach(ve=>ye.delete(ve.key));let Nt=eu(In);if(Nt)return await Jn(x,Nt.result,!0,{replace:ne}),{shortCircuited:!0};if(Nt=eu(_r),Nt)return oe.add(Nt.key),await Jn(x,Nt.result,!0,{replace:ne}),{shortCircuited:!0};let{loaderData:ui,errors:Nn}=xy(P,O,In,ie,Ee,_r);ae&&P.errors&&(Nn={...P.errors,...Nn});let ls=To(),Tn=So(q),bn=ls||Tn||Ee.length>0;return{matches:O,loaderData:ui,errors:Nn,...bn?{fetchers:new Map(P.fetchers)}:{}}}function vl(x){if(x&&!Zt(x[1]))return{[x[0]]:x[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function lh(x){return x.forEach(N=>{let O=P.fetchers.get(N.key),$=$o(void 0,O?O.data:void 0);P.fetchers.set(N.key,$)}),new Map(P.fetchers)}async function _l(x,N,O,$){Vn(x);let W=($&&$.flushSync)===!0,te=a||o,ue=Wd(P.location,P.matches,u,O,N,$==null?void 0:$.relative),X=Dr(te,ue,u),ne=cn(X,te,ue);if(ne.active&&ne.matches&&(X=ne.matches),!X){Oe(x,N,hn(404,{pathname:ue}),{flushSync:W});return}let{path:ae,submission:ce,error:ie}=wy(!0,ue,$);if(ie){Oe(x,N,ie,{flushSync:W});return}let de=ta(X,ae),xe=new vy(t.unstable_getContext?await t.unstable_getContext():void 0),je=($&&$.preventScrollReset)===!0;if(ce&&en(ce.formMethod)){await Io(x,N,ae,de,X,xe,ne.active,W,je,ce);return}we.set(x,{routeId:N,path:ae}),await wl(x,N,ae,de,X,xe,ne.active,W,je,ce)}async function Io(x,N,O,$,W,te,ue,X,ne,ae){ts(),we.delete(x);function ce(qe){if(!qe.route.action&&!qe.route.lazy){let Ln=hn(405,{method:ae.formMethod,pathname:O,routeId:N});return Oe(x,N,Ln,{flushSync:X}),!0}return!1}if(!ue&&ce($))return;let ie=P.fetchers.get(x);Le(x,eP(ae,ie),{flushSync:X});let de=new AbortController,xe=_s(t.history,O,de.signal,ae);if(ue){let qe=await li(W,O,xe.signal,x);if(qe.type==="aborted")return;if(qe.type==="error"){Oe(x,N,qe.error,{flushSync:X});return}else if(qe.matches){if(W=qe.matches,$=ta(W,O),ce($))return}else{Oe(x,N,hn(404,{pathname:O}),{flushSync:X});return}}ye.set(x,de);let je=Xe,Fe=$s(i,s,xe,W,$,r,te),Ee=(await Xn(xe,Fe,te,x))[$.route.id];if(xe.signal.aborted){ye.get(x)===de&&ye.delete(x);return}if(Ae.has(x)){if(Pi(Ee)||Zt(Ee)){Le(x,Rr(void 0));return}}else{if(Pi(Ee))if(ye.delete(x),q>je){Le(x,Rr(void 0));return}else return oe.add(x),Le(x,$o(ae)),Jn(xe,Ee,!1,{fetcherSubmission:ae,preventScrollReset:ne});if(Zt(Ee)){Oe(x,N,Ee.error);return}}let Zn=P.navigation.location||P.location,In=_s(t.history,Zn,de.signal),_r=a||o,Nt=P.navigation.state!=="idle"?Dr(_r,P.navigation.location,u):P.matches;fe(Nt,"Didn't find any matches after fetcher action");let ui=++Xe;re.set(x,ui);let Nn=$o(ae,Ee.data);P.fetchers.set(x,Nn);let{dsMatches:ls,revalidatingFetchers:Tn}=Ey(In,te,i,s,t.history,P,Nt,ae,Zn,r,!1,ge,Je,Ae,we,oe,_r,u,[$.route.id,Ee]);Tn.filter(qe=>qe.key!==x).forEach(qe=>{let Ln=qe.key,cs=P.fetchers.get(Ln),Rl=$o(void 0,cs?cs.data:void 0);P.fetchers.set(Ln,Rl),Vn(Ln),qe.controller&&ye.set(Ln,qe.controller)}),st({fetchers:new Map(P.fetchers)});let bn=()=>Tn.forEach(qe=>Vn(qe.key));de.signal.addEventListener("abort",bn);let{loaderResults:ve,fetcherResults:Tt}=await es(ls,Tn,In,te);if(de.signal.aborted)return;de.signal.removeEventListener("abort",bn),re.delete(x),ye.delete(x),Tn.forEach(qe=>ye.delete(qe.key));let Mn=eu(ve);if(Mn)return Jn(In,Mn.result,!1,{preventScrollReset:ne});if(Mn=eu(Tt),Mn)return oe.add(Mn.key),Jn(In,Mn.result,!1,{preventScrollReset:ne});let{loaderData:ci,errors:us}=xy(P,Nt,ve,void 0,Tn,Tt);if(P.fetchers.has(x)){let qe=Rr(Ee.data);P.fetchers.set(x,qe)}So(ui),P.navigation.state==="loading"&&ui>q?(fe(E,"Expected pending action"),T&&T.abort(),wn(P.navigation.location,{matches:Nt,loaderData:ci,errors:us,fetchers:new Map(P.fetchers)})):(st({errors:us,loaderData:Cy(P.loaderData,ci,Nt,us),fetchers:new Map(P.fetchers)}),ge=!1)}async function wl(x,N,O,$,W,te,ue,X,ne,ae){let ce=P.fetchers.get(x);Le(x,$o(ae,ce?ce.data:void 0),{flushSync:X});let ie=new AbortController,de=_s(t.history,O,ie.signal);if(ue){let Ee=await li(W,O,de.signal,x);if(Ee.type==="aborted")return;if(Ee.type==="error"){Oe(x,N,Ee.error,{flushSync:X});return}else if(Ee.matches)W=Ee.matches,$=ta(W,O);else{Oe(x,N,hn(404,{pathname:O}),{flushSync:X});return}}ye.set(x,ie);let xe=Xe,je=$s(i,s,de,W,$,r,te),It=(await Xn(de,je,te,x))[$.route.id];if(ye.get(x)===ie&&ye.delete(x),!de.signal.aborted){if(Ae.has(x)){Le(x,Rr(void 0));return}if(Pi(It))if(q>xe){Le(x,Rr(void 0));return}else{oe.add(x),await Jn(de,It,!1,{preventScrollReset:ne});return}if(Zt(It)){Oe(x,N,It.error);return}Le(x,Rr(It.data))}}async function Jn(x,N,O,{submission:$,fetcherSubmission:W,preventScrollReset:te,replace:ue}={}){N.response.headers.has("X-Remix-Revalidate")&&(ge=!0);let X=N.response.headers.get("Location");fe(X,"Expected a Location header on the redirect Response"),X=Ay(X,new URL(x.url),u);let ne=Ba(P.location,X,{_isRedirect:!0});if(n){let je=!1;if(N.response.headers.has("X-Remix-Reload-Document"))je=!0;else if(Ap.test(X)){const Fe=t.history.createURL(X);je=Fe.origin!==e.location.origin||vn(Fe.pathname,u)==null}if(je){ue?e.location.replace(X):e.location.assign(X);return}}T=null;let ae=ue===!0||N.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ce,formAction:ie,formEncType:de}=P.navigation;!$&&!W&&ce&&ie&&de&&($=Ny(P.navigation));let xe=$||W;if(LA.has(N.response.status)&&xe&&en(xe.formMethod))await En(ae,ne,{submission:{...xe,formAction:X},preventScrollReset:te||y,enableViewTransition:O?A:void 0});else{let je=$h(ne,$);await En(ae,ne,{overrideNavigation:je,fetcherSubmission:W,preventScrollReset:te||y,enableViewTransition:O?A:void 0})}}async function Xn(x,N,O,$){let W,te={};try{W=await qA(c,x,N,$,O,!1)}catch(ue){return N.filter(X=>X.shouldLoad).forEach(X=>{te[X.route.id]={type:"error",error:ue}}),te}for(let[ue,X]of Object.entries(W))if(JA(X)){let ne=X.result;te[ue]={type:"redirect",response:WA(ne,x,ue,N,u)}}else te[ue]=await HA(X);return te}async function es(x,N,O,$){let W=Xn(O,x,$,null),te=Promise.all(N.map(async ne=>{if(ne.matches&&ne.match&&ne.request&&ne.controller){let ce=(await Xn(ne.request,ne.matches,$,ne.key))[ne.match.route.id];return{[ne.key]:ce}}else return Promise.resolve({[ne.key]:{type:"error",error:hn(404,{pathname:ne.path})}})})),ue=await W,X=(await te).reduce((ne,ae)=>Object.assign(ne,ae),{});return{loaderResults:ue,fetcherResults:X}}function ts(){ge=!0,we.forEach((x,N)=>{ye.has(N)&&Je.add(N),Vn(N)})}function Le(x,N,O={}){P.fetchers.set(x,N),st({fetchers:new Map(P.fetchers)},{flushSync:(O&&O.flushSync)===!0})}function Oe(x,N,O,$={}){let W=_i(P.matches,N);ns(x),st({errors:{[W.route.id]:O},fetchers:new Map(P.fetchers)},{flushSync:($&&$.flushSync)===!0})}function ai(x){return Se.set(x,(Se.get(x)||0)+1),Ae.has(x)&&Ae.delete(x),P.fetchers.get(x)||OA}function ns(x){let N=P.fetchers.get(x);ye.has(x)&&!(N&&N.state==="loading"&&re.has(x))&&Vn(x),we.delete(x),re.delete(x),oe.delete(x),Ae.delete(x),Je.delete(x),P.fetchers.delete(x)}function El(x){let N=(Se.get(x)||0)-1;N<=0?(Se.delete(x),Ae.add(x)):Se.set(x,N),st({fetchers:new Map(P.fetchers)})}function Vn(x){let N=ye.get(x);N&&(N.abort(),ye.delete(x))}function yr(x){for(let N of x){let O=ai(N),$=Rr(O.data);P.fetchers.set(N,$)}}function To(){let x=[],N=!1;for(let O of oe){let $=P.fetchers.get(O);fe($,`Expected fetcher: ${O}`),$.state==="loading"&&(oe.delete(O),x.push(O),N=!0)}return yr(x),N}function So(x){let N=[];for(let[O,$]of re)if($<x){let W=P.fetchers.get(O);fe(W,`Expected fetcher: ${O}`),W.state==="loading"&&(Vn(O),re.delete(O),N.push(O))}return yr(N),N.length>0}function Ro(x,N){let O=P.blockers.get(x)||jo;return mt.get(x)!==N&&mt.set(x,N),O}function Il(x){P.blockers.delete(x),mt.delete(x)}function rs(x,N){let O=P.blockers.get(x)||jo;fe(O.state==="unblocked"&&N.state==="blocked"||O.state==="blocked"&&N.state==="blocked"||O.state==="blocked"&&N.state==="proceeding"||O.state==="blocked"&&N.state==="unblocked"||O.state==="proceeding"&&N.state==="unblocked",`Invalid blocker state transition: ${O.state} -> ${N.state}`);let $=new Map(P.blockers);$.set(x,N),st({blockers:$})}function is({currentLocation:x,nextLocation:N,historyAction:O}){if(mt.size===0)return;mt.size>1&&lt(!1,"A router only supports one blocker at a time");let $=Array.from(mt.entries()),[W,te]=$[$.length-1],ue=P.blockers.get(W);if(!(ue&&ue.state==="proceeding")&&te({currentLocation:x,nextLocation:N,historyAction:O}))return W}function ss(x){let N=hn(404,{pathname:x}),O=a||o,{matches:$,route:W}=Dy(O);return{notFoundMatches:$,route:W,error:N}}function Tl(x,N,O){if(_=x,C=N,R=O||null,!D&&P.navigation===jh){D=!0;let $=os(P.location,P.matches);$!=null&&st({restoreScrollPosition:$})}return()=>{_=null,C=null,R=null}}function vr(x,N){return R&&R(x,N.map($=>pA($,P.loaderData)))||x.key}function Ao(x,N){if(_&&C){let O=vr(x,N);_[O]=C()}}function os(x,N){if(_){let O=vr(x,N),$=_[O];if(typeof $=="number")return $}return null}function cn(x,N,O){if(t.patchRoutesOnNavigation)if(x){if(Object.keys(x[0].params).length>0)return{active:!0,matches:wu(N,O,u,!0)}}else return{active:!0,matches:wu(N,O,u,!0)||[]};return{active:!1,matches:null}}async function li(x,N,O,$){if(!t.patchRoutesOnNavigation)return{type:"success",matches:x};let W=x;for(;;){let te=a==null,ue=a||o,X=s;try{await t.patchRoutesOnNavigation({signal:O,path:N,matches:W,fetcherKey:$,patch:(ce,ie)=>{O.aborted||Iy(ce,ie,ue,X,i)}})}catch(ce){return{type:"error",error:ce,partialMatches:W}}finally{te&&!O.aborted&&(o=[...o])}if(O.aborted)return{type:"aborted"};let ne=Dr(ue,N,u);if(ne)return{type:"success",matches:ne};let ae=wu(ue,N,u,!0);if(!ae||W.length===ae.length&&W.every((ce,ie)=>ce.route.id===ae[ie].route.id))return{type:"success",matches:null};W=ae}}function as(x){s={},a=nc(x,i,void 0,s)}function Sl(x,N){let O=a==null;Iy(x,N,a||o,s,i),O&&(o=[...o],st({}))}return B={get basename(){return u},get future(){return d},get state(){return P},get routes(){return o},get window(){return e},initialize:_n,subscribe:ah,enableScrollRestoration:Tl,navigate:Zi,fetch:_l,revalidate:wo,createHref:x=>t.history.createHref(x),encodeLocation:x=>t.history.encodeLocation(x),getFetcher:ai,deleteFetcher:El,dispose:oh,getBlocker:Ro,deleteBlocker:Il,patchRoutes:Sl,_internalFetchControllers:ye,_internalSetRoutes:as},B}function zA(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Wd(t,e,n,r,i,s){let o,a;if(i){o=[];for(let c of e)if(o.push(c),c.route.id===i){a=c;break}}else o=e,a=e[e.length-1];let u=Rp(r||".",Sp(o),vn(t.pathname,n)||t.pathname,s==="path");if(r==null&&(u.search=t.search,u.hash=t.hash),(r==null||r===""||r===".")&&a){let c=Pp(u.search);if(a.route.index&&!c)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&c){let d=new URLSearchParams(u.search),f=d.getAll("index");d.delete("index"),f.filter(_=>_).forEach(_=>d.append("index",_));let m=d.toString();u.search=m?`?${m}`:""}}return n!=="/"&&(u.pathname=u.pathname==="/"?n:Kn([n,u.pathname])),Qr(u)}function wy(t,e,n){if(!n||!zA(n))return{path:e};if(n.formMethod&&!XA(n.formMethod))return{path:e,error:hn(405,{method:n.formMethod})};let r=()=>({path:e,error:hn(400,{type:"invalid-body"})}),s=(n.formMethod||"get").toUpperCase(),o=DE(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!en(s))return r();let f=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((m,[_,R])=>`${m}${_}=${R}
`,""):String(n.body);return{path:e,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:f}}}else if(n.formEncType==="application/json"){if(!en(s))return r();try{let f=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:f,text:void 0}}}catch{return r()}}}fe(typeof FormData=="function","FormData is not available in this environment");let a,u;if(n.formData)a=Jd(n.formData),u=n.formData;else if(n.body instanceof FormData)a=Jd(n.body),u=n.body;else if(n.body instanceof URLSearchParams)a=n.body,u=Py(a);else if(n.body==null)a=new URLSearchParams,u=new FormData;else try{a=new URLSearchParams(n.body),u=Py(a)}catch{return r()}let c={formMethod:s,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(en(c.formMethod))return{path:e,submission:c};let d=ni(e);return t&&d.search&&Pp(d.search)&&a.append("index",""),d.search=`?${a}`,{path:Qr(d),submission:c}}function Ey(t,e,n,r,i,s,o,a,u,c,d,f,m,_,R,C,D,w,g){var b;let I=g?Zt(g[1])?g[1].error:g[1].data:void 0,V=i.createURL(s.location),B=i.createURL(u),P;if(d&&s.errors){let S=Object.keys(s.errors)[0];P=o.findIndex(ge=>ge.route.id===S)}else if(g&&Zt(g[1])){let S=g[0];P=o.findIndex(ge=>ge.route.id===S)-1}let E=g?g[1].statusCode:void 0,y=E&&E>=400,T={currentUrl:V,currentParams:((b=s.matches[0])==null?void 0:b.params)||{},nextUrl:B,nextParams:o[0].params,...a,actionResult:I,actionStatus:E},A=o.map((S,ge)=>{let{route:Je}=S,ye=null;if(P!=null&&ge>P?ye=!1:Je.lazy?ye=!0:Je.loader==null?ye=!1:d?ye=Qd(Je,s.loaderData,s.errors):UA(s.loaderData,s.matches[ge],S)&&(ye=!0),ye!==null)return Yd(n,r,t,S,c,e,ye);let Xe=y?!1:f||V.pathname+V.search===B.pathname+B.search||V.search!==B.search||jA(s.matches[ge],S),q={...T,defaultShouldRevalidate:Xe},re=sc(S,q);return Yd(n,r,t,S,c,e,re,q)}),k=[];return R.forEach((S,ge)=>{if(d||!o.some(we=>we.route.id===S.routeId)||_.has(ge))return;let Je=Dr(D,S.path,w);if(!Je){k.push({key:ge,routeId:S.routeId,path:S.path,matches:null,match:null,request:null,controller:null});return}if(C.has(ge))return;let ye=s.fetchers.get(ge),Xe=ta(Je,S.path),q=new AbortController,re=_s(i,S.path,q.signal),oe=null;if(m.has(ge))m.delete(ge),oe=$s(n,r,re,Je,Xe,c,e);else if(ye&&ye.state!=="idle"&&ye.data===void 0)f&&(oe=$s(n,r,re,Je,Xe,c,e));else{let we={...T,defaultShouldRevalidate:y?!1:f};sc(Xe,we)&&(oe=$s(n,r,re,Je,Xe,c,e,we))}oe&&k.push({key:ge,routeId:S.routeId,path:S.path,matches:oe,match:Xe,request:re,controller:q})}),{dsMatches:A,revalidatingFetchers:k}}function Qd(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function UA(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function jA(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function sc(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Iy(t,e,n,r,i){let s;if(t){let u=r[t];fe(u,`No route found to patch children into: routeId = ${t}`),u.children||(u.children=[]),s=u.children}else s=n;let o=e.filter(u=>!s.some(c=>AE(u,c))),a=nc(o,i,[t||"_","patch",String((s==null?void 0:s.length)||"0")],r);s.push(...a)}function AE(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>AE(n,s))}):!1}var Ty=new WeakMap,PE=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(fe(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[t];if(!s)return;let o=Ty.get(i);o||(o={},Ty.set(i,o));let a=o[t];if(a)return a;let u=(async()=>{let c=cA(t),f=i[t]!==void 0&&t!=="hasErrorBoundary";if(c)lt(!c,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),o[t]=Promise.resolve();else if(f)lt(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let m=await s();m!=null&&(Object.assign(i,{[t]:m}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(m=>m===void 0)&&(i.lazy=void 0))})();return o[t]=u,u},Sy=new WeakMap;function $A(t,e,n,r,i){let s=n[t.id];if(fe(s,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let d=Sy.get(s);if(d)return{lazyRoutePromise:d,lazyHandlerPromise:d};let f=(async()=>{fe(typeof t.lazy=="function","No lazy route function found");let m=await t.lazy(),_={};for(let R in m){let C=m[R];if(C===void 0)continue;let D=dA(R),g=s[R]!==void 0&&R!=="hasErrorBoundary";D?lt(!D,"Route property "+R+" is not a supported property to be returned from a lazy route function. This property will be ignored."):g?lt(!g,`Route "${s.id}" has a static property "${R}" defined but its lazy function is also returning a value for this property. The lazy route property "${R}" will be ignored.`):_[R]=C}Object.assign(s,_),Object.assign(s,{...r(s),lazy:void 0})})();return Sy.set(s,f),f.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:f}}let o=Object.keys(t.lazy),a=[],u;for(let d of o){if(i&&i.includes(d))continue;let f=PE({key:d,route:t,manifest:n,mapRouteProperties:r});f&&(a.push(f),d===e&&(u=f))}let c=a.length>0?Promise.all(a).then(()=>{}):void 0;return c==null||c.catch(()=>{}),u==null||u.catch(()=>{}),{lazyRoutePromise:c,lazyHandlerPromise:u}}async function Ry(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{n[e[s].route.id]=i}),n}async function KA(t){return t.matches.some(e=>e.route.unstable_middleware)?xE(t,!1,()=>Ry(t),(e,n)=>({[n]:{type:"error",result:e}})):Ry(t)}async function xE(t,e,n,r){let{matches:i,request:s,params:o,context:a}=t,u={handlerResult:void 0};try{let c=i.flatMap(f=>f.route.unstable_middleware?f.route.unstable_middleware.map(m=>[f.route.id,m]):[]),d=await CE({request:s,params:o,context:a},c,e,u,n);return e?d:u.handlerResult}catch(c){if(!u.middlewareError)throw c;let d=await r(u.middlewareError.error,u.middlewareError.routeId);return u.handlerResult?Object.assign(u.handlerResult,d):d}}async function CE(t,e,n,r,i,s=0){let{request:o}=t;if(o.signal.aborted)throw o.signal.reason?o.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${o.method} ${o.url}`);let a=e[s];if(!a)return r.handlerResult=await i(),r.handlerResult;let[u,c]=a,d=!1,f,m=async()=>{if(d)throw new Error("You may only call `next()` once per middleware");d=!0,await CE(t,e,n,r,i,s+1)};try{let _=await c({request:t.request,params:t.params,context:t.context},m);return d?_===void 0?f:_:m()}catch(_){throw r.middlewareError?r.middlewareError.error!==_&&(r.middlewareError={routeId:u,error:_}):r.middlewareError={routeId:u,error:_},_}}function kE(t,e,n,r,i){let s=PE({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:t}),o=$A(r.route,en(n.method)?"action":"loader",e,t,i);return{middleware:s,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function Yd(t,e,n,r,i,s,o,a=null){let u=!1,c=kE(t,e,n,r,i);return{...r,_lazyPromises:c,shouldLoad:o,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler(d){return u=!0,a?typeof d=="boolean"?sc(r,{...a,defaultShouldRevalidate:d}):sc(r,a):o},resolve(d){return u||o||d&&n.method==="GET"&&(r.route.lazy||r.route.loader)?GA({request:n,match:r,lazyHandlerPromise:c==null?void 0:c.handler,lazyRoutePromise:c==null?void 0:c.route,handlerOverride:d,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function $s(t,e,n,r,i,s,o,a=null){return r.map(u=>u.route.id!==i.route.id?{...u,shouldLoad:!1,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler:()=>!1,_lazyPromises:kE(t,e,n,u,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Yd(t,e,n,u,s,o,!0,a))}async function qA(t,e,n,r,i,s){n.some(c=>{var d;return(d=c._lazyPromises)==null?void 0:d.middleware})&&await Promise.all(n.map(c=>{var d;return(d=c._lazyPromises)==null?void 0:d.middleware}));let o={request:e,params:n[0].params,context:i,matches:n},u=await t({...o,fetcherKey:r,unstable_runClientMiddleware:c=>{let d=o;return xE(d,!1,()=>c({...d,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(f,m)=>({[m]:{type:"error",result:f}}))}});try{await Promise.all(n.flatMap(c=>{var d,f;return[(d=c._lazyPromises)==null?void 0:d.handler,(f=c._lazyPromises)==null?void 0:f.route]}))}catch{}return u}async function GA({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:i,scopedContext:s}){let o,a,u=en(t.method),c=u?"action":"loader",d=f=>{let m,_=new Promise((D,w)=>m=w);a=()=>m(),t.signal.addEventListener("abort",a);let R=D=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${c}" [routeId: ${e.route.id}]`)):f({request:t,params:e.params,context:s},...D!==void 0?[D]:[]),C=(async()=>{try{return{type:"data",result:await(i?i(w=>R(w)):R())}}catch(D){return{type:"error",result:D}}})();return Promise.race([C,_])};try{let f=u?e.route.action:e.route.loader;if(n||r)if(f){let m,[_]=await Promise.all([d(f).catch(R=>{m=R}),n,r]);if(m!==void 0)throw m;o=_}else{await n;let m=u?e.route.action:e.route.loader;if(m)[o]=await Promise.all([d(m),r]);else if(c==="action"){let _=new URL(t.url),R=_.pathname+_.search;throw hn(405,{method:t.method,pathname:R,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(f)o=await d(f);else{let m=new URL(t.url),_=m.pathname+m.search;throw hn(404,{pathname:_})}}catch(f){return{type:"error",result:f}}finally{a&&t.signal.removeEventListener("abort",a)}return o}async function HA(t){var r,i,s,o,a,u;let{result:e,type:n}=t;if(VE(e)){let c;try{let d=e.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(d){return{type:"error",error:d}}return n==="error"?{type:"error",error:new ic(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:"data",data:c,statusCode:e.status,headers:e.headers}}return n==="error"?Vy(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new ic(((s=e.init)==null?void 0:s.status)||500,void 0,e.data),statusCode:za(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:za(e)?e.status:void 0}:Vy(e)?{type:"data",data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function WA(t,e,n,r,i){let s=t.headers.get("Location");if(fe(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!Ap.test(s)){let o=r.slice(0,r.findIndex(a=>a.route.id===n)+1);s=Wd(new URL(e.url),o,i,s),t.headers.set("Location",s)}return t}function Ay(t,e,n){if(Ap.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=vn(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function _s(t,e,n,r){let i=t.createURL(DE(e)).toString(),s={signal:n};if(r&&en(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Jd(r.formData):s.body=r.formData}return new Request(i,s)}function Jd(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Py(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function QA(t,e,n,r=!1,i=!1){let s={},o=null,a,u=!1,c={},d=n&&Zt(n[1])?n[1].error:void 0;return t.forEach(f=>{if(!(f.route.id in e))return;let m=f.route.id,_=e[m];if(fe(!Pi(_),"Cannot handle redirect results in processLoaderData"),Zt(_)){let R=_.error;if(d!==void 0&&(R=d,d=void 0),o=o||{},i)o[m]=R;else{let C=_i(t,m);o[C.route.id]==null&&(o[C.route.id]=R)}r||(s[m]=RE),u||(u=!0,a=za(_.error)?_.error.status:500),_.headers&&(c[m]=_.headers)}else s[m]=_.data,_.statusCode&&_.statusCode!==200&&!u&&(a=_.statusCode),_.headers&&(c[m]=_.headers)}),d!==void 0&&n&&(o={[n[0]]:d},n[2]&&(s[n[2]]=void 0)),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function xy(t,e,n,r,i,s){let{loaderData:o,errors:a}=QA(e,n,r);return i.filter(u=>!u.matches||u.matches.some(c=>c.shouldLoad)).forEach(u=>{let{key:c,match:d,controller:f}=u,m=s[c];if(fe(m,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(Zt(m)){let _=_i(t.matches,d==null?void 0:d.route.id);a&&a[_.route.id]||(a={...a,[_.route.id]:m.error}),t.fetchers.delete(c)}else if(Pi(m))fe(!1,"Unhandled fetcher revalidation redirect");else{let _=Rr(m.data);t.fetchers.set(c,_)}}),{loaderData:o,errors:a}}function Cy(t,e,n,r){let i=Object.entries(e).filter(([,s])=>s!==RE).reduce((s,[o,a])=>(s[o]=a,s),{});for(let s of n){let o=s.route.id;if(!e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function ky(t){return t?Zt(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function _i(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Dy(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function hn(t,{pathname:e,routeId:n,method:r,type:i,message:s}={}){let o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",r&&e&&n?a=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a=`Route "${n}" does not match URL "${e}"`):t===404?(o="Not Found",a=`No route matches URL "${e}"`):t===405&&(o="Method Not Allowed",r&&e&&n?a=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(a=`Invalid request method "${r.toUpperCase()}"`)),new ic(t||500,o,new Error(a),!0)}function eu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Pi(i))return{key:r,result:i}}}function DE(t){let e=typeof t=="string"?ni(t):t;return Qr({...e,hash:""})}function YA(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function JA(t){return VE(t.result)&&MA.has(t.result.status)}function Zt(t){return t.type==="error"}function Pi(t){return(t&&t.type)==="redirect"}function Vy(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function VE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function XA(t){return bA.has(t.toUpperCase())}function en(t){return VA.has(t.toUpperCase())}function Pp(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ta(t,e){let n=typeof e=="string"?ni(e).search:e.search;if(t[t.length-1].route.index&&Pp(n||""))return t[t.length-1];let r=IE(t);return r[r.length-1]}function Ny(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function $h(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ZA(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function $o(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function eP(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Rr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function tP(t,e){try{let n=t.sessionStorage.getItem(SE);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function nP(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(SE,JSON.stringify(n))}catch(r){lt(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function rP(){let t,e,n=new Promise((r,i)=>{t=async s=>{r(s);try{await n}catch{}},e=async s=>{i(s);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var Wi=F.createContext(null);Wi.displayName="DataRouter";var ol=F.createContext(null);ol.displayName="DataRouterState";var xp=F.createContext({isTransitioning:!1});xp.displayName="ViewTransition";var NE=F.createContext(new Map);NE.displayName="Fetchers";var iP=F.createContext(null);iP.displayName="Await";var Qn=F.createContext(null);Qn.displayName="Navigation";var zc=F.createContext(null);zc.displayName="Location";var Yn=F.createContext({outlet:null,matches:[],isDataRoute:!1});Yn.displayName="Route";var Cp=F.createContext(null);Cp.displayName="RouteError";function sP(t,{relative:e}={}){fe(al(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=F.useContext(Qn),{hash:i,pathname:s,search:o}=ll(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Kn([n,s])),r.createHref({pathname:a,search:o,hash:i})}function al(){return F.useContext(zc)!=null}function Qi(){return fe(al(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(zc).location}var bE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ME(t){F.useContext(Qn).static||F.useLayoutEffect(t)}function kp(){let{isDataRoute:t}=F.useContext(Yn);return t?_P():oP()}function oP(){fe(al(),"useNavigate() may be used only in the context of a <Router> component.");let t=F.useContext(Wi),{basename:e,navigator:n}=F.useContext(Qn),{matches:r}=F.useContext(Yn),{pathname:i}=Qi(),s=JSON.stringify(Sp(r)),o=F.useRef(!1);return ME(()=>{o.current=!0}),F.useCallback((u,c={})=>{if(lt(o.current,bE),!o.current)return;if(typeof u=="number"){n.go(u);return}let d=Rp(u,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Kn([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,i,t])}F.createContext(null);function aP(){let{matches:t}=F.useContext(Yn),e=t[t.length-1];return e?e.params:{}}function ll(t,{relative:e}={}){let{matches:n}=F.useContext(Yn),{pathname:r}=Qi(),i=JSON.stringify(Sp(n));return F.useMemo(()=>Rp(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function lP(t,e,n,r){fe(al(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=F.useContext(Qn),{matches:o}=F.useContext(Yn),a=o[o.length-1],u=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",f=a&&a.route;{let g=f&&f.path||"";LE(c,!f||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let m=Qi(),_;_=m;let R=_.pathname||"/",C=R;if(d!=="/"){let g=d.replace(/^\//,"").split("/");C="/"+R.replace(/^\//,"").split("/").slice(g.length).join("/")}let D=!s&&n&&n.matches&&n.matches.length>0?n.matches:Dr(t,{pathname:C});return lt(f||D!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),lt(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),fP(D&&D.map(g=>Object.assign({},g,{params:Object.assign({},u,g.params),pathname:Kn([d,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?d:Kn([d,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,n,r)}function uP(){let t=vP(),e=za(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:s},"ErrorBoundary")," or"," ",F.createElement("code",{style:s},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,o)}var cP=F.createElement(uP,null),hP=class extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?F.createElement(Yn.Provider,{value:this.props.routeContext},F.createElement(Cp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dP({routeContext:t,match:e,children:n}){let r=F.useContext(Wi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Yn.Provider,{value:t},n)}function fP(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);fe(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let c=i[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=u),c.route.id){let{loaderData:d,errors:f}=n,m=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||m){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,c,d)=>{let f,m=!1,_=null,R=null;n&&(f=s&&c.route.id?s[c.route.id]:void 0,_=c.route.errorElement||cP,o&&(a<0&&d===0?(LE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,R=null):a===d&&(m=!0,R=c.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,d+1)),D=()=>{let w;return f?w=_:m?w=R:c.route.Component?w=F.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=u,F.createElement(dP,{match:c,routeContext:{outlet:u,matches:C,isDataRoute:n!=null},children:w})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?F.createElement(hP,{location:n.location,revalidation:n.revalidation,component:_,error:f,children:D(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):D()},null)}function Dp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pP(t){let e=F.useContext(Wi);return fe(e,Dp(t)),e}function mP(t){let e=F.useContext(ol);return fe(e,Dp(t)),e}function gP(t){let e=F.useContext(Yn);return fe(e,Dp(t)),e}function Vp(t){let e=gP(t),n=e.matches[e.matches.length-1];return fe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function yP(){return Vp("useRouteId")}function vP(){var r;let t=F.useContext(Cp),e=mP("useRouteError"),n=Vp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function _P(){let{router:t}=pP("useNavigate"),e=Vp("useNavigate"),n=F.useRef(!1);return ME(()=>{n.current=!0}),F.useCallback(async(i,s={})=>{lt(n.current,bE),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var by={};function LE(t,e,n){!e&&!by[t]&&(by[t]=!0,lt(!1,n))}var My={};function Ly(t,e){!t&&!My[e]&&(My[e]=!0,console.warn(e))}function wP(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&lt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:F.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&lt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:F.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&lt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:F.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var EP=["HydrateFallback","hydrateFallbackElement"],IP=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function TP({router:t,flushSync:e}){let[n,r]=F.useState(t.state),[i,s]=F.useState(),[o,a]=F.useState({isTransitioning:!1}),[u,c]=F.useState(),[d,f]=F.useState(),[m,_]=F.useState(),R=F.useRef(new Map),C=F.useCallback((I,{deletedFetchers:V,flushSync:B,viewTransitionOpts:P})=>{I.fetchers.forEach((y,T)=>{y.data!==void 0&&R.current.set(T,y.data)}),V.forEach(y=>R.current.delete(y)),Ly(B===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let E=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(Ly(P==null||E,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!P||!E){e&&B?e(()=>r(I)):F.startTransition(()=>r(I));return}if(e&&B){e(()=>{d&&(u&&u.resolve(),d.skipTransition()),a({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let y=t.window.document.startViewTransition(()=>{e(()=>r(I))});y.finished.finally(()=>{e(()=>{c(void 0),f(void 0),s(void 0),a({isTransitioning:!1})})}),e(()=>f(y));return}d?(u&&u.resolve(),d.skipTransition(),_({state:I,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(s(I),a({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[t.window,e,d,u]);F.useLayoutEffect(()=>t.subscribe(C),[t,C]),F.useEffect(()=>{o.isTransitioning&&!o.flushSync&&c(new IP)},[o]),F.useEffect(()=>{if(u&&i&&t.window){let I=i,V=u.promise,B=t.window.document.startViewTransition(async()=>{F.startTransition(()=>r(I)),await V});B.finished.finally(()=>{c(void 0),f(void 0),s(void 0),a({isTransitioning:!1})}),f(B)}},[i,u,t.window]),F.useEffect(()=>{u&&i&&n.location.key===i.location.key&&u.resolve()},[u,d,n.location,i]),F.useEffect(()=>{!o.isTransitioning&&m&&(s(m.state),a({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),_(void 0))},[o.isTransitioning,m]);let D=F.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:I=>t.navigate(I),push:(I,V,B)=>t.navigate(I,{state:V,preventScrollReset:B==null?void 0:B.preventScrollReset}),replace:(I,V,B)=>t.navigate(I,{replace:!0,state:V,preventScrollReset:B==null?void 0:B.preventScrollReset})}),[t]),w=t.basename||"/",g=F.useMemo(()=>({router:t,navigator:D,static:!1,basename:w}),[t,D,w]);return F.createElement(F.Fragment,null,F.createElement(Wi.Provider,{value:g},F.createElement(ol.Provider,{value:n},F.createElement(NE.Provider,{value:R.current},F.createElement(xp.Provider,{value:o},F.createElement(AP,{basename:w,location:n.location,navigationType:n.historyAction,navigator:D},F.createElement(SP,{routes:t.routes,future:t.future,state:n})))))),null)}var SP=F.memo(RP);function RP({routes:t,future:e,state:n}){return lP(t,void 0,n,e)}function Xd(t){fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function AP({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){fe(!al(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=F.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=ni(n));let{pathname:u="/",search:c="",hash:d="",state:f=null,key:m="default"}=n,_=F.useMemo(()=>{let R=vn(u,o);return R==null?null:{location:{pathname:R,search:c,hash:d,state:f,key:m},navigationType:r}},[o,u,c,d,f,m,r]);return lt(_!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:F.createElement(Qn.Provider,{value:a},F.createElement(zc.Provider,{children:e,value:_}))}function Zd(t,e=[]){let n=[];return F.Children.forEach(t,(r,i)=>{if(!F.isValidElement(r))return;let s=[...e,i];if(r.type===F.Fragment){n.push.apply(n,Zd(r.props.children,s));return}fe(r.type===Xd,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),fe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Zd(r.props.children,s)),n.push(o)}),n}var PP=Zd,Eu="get",Iu="application/x-www-form-urlencoded";function Uc(t){return t!=null&&typeof t.tagName=="string"}function xP(t){return Uc(t)&&t.tagName.toLowerCase()==="button"}function CP(t){return Uc(t)&&t.tagName.toLowerCase()==="form"}function kP(t){return Uc(t)&&t.tagName.toLowerCase()==="input"}function DP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function VP(t,e){return t.button===0&&(!e||e==="_self")&&!DP(t)}var tu=null;function NP(){if(tu===null)try{new FormData(document.createElement("form"),0),tu=!1}catch{tu=!0}return tu}var bP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kh(t){return t!=null&&!bP.has(t)?(lt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Iu}"`),null):t}function MP(t,e){let n,r,i,s,o;if(CP(t)){let a=t.getAttribute("action");r=a?vn(a,e):null,n=t.getAttribute("method")||Eu,i=Kh(t.getAttribute("enctype"))||Iu,s=new FormData(t)}else if(xP(t)||kP(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||a.getAttribute("action");if(r=u?vn(u,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Eu,i=Kh(t.getAttribute("formenctype"))||Kh(a.getAttribute("enctype"))||Iu,s=new FormData(a,t),!NP()){let{name:c,type:d,value:f}=t;if(d==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,f)}}else{if(Uc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Eu,r=null,i=Iu,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function Np(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function LP(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OP(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function FP(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await LP(s,n);return o.links?o.links():[]}return[]}));return jP(r.flat(1).filter(OP).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Oy(t,e,n,r,i,s){let o=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,a=(u,c)=>{var d;return n[c].pathname!==u.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,c)=>o(u,c)||a(u,c)):s==="data"?e.filter((u,c)=>{var f;let d=r.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,c)||a(u,c))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function BP(t,e,{includeHydrateFallback:n}={}){return zP(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function zP(t){return[...new Set(t)]}function UP(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function jP(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(UP(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}var $P=new Set([100,101,204,205]);function KP(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&vn(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function OE(){let t=F.useContext(Wi);return Np(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function qP(){let t=F.useContext(ol);return Np(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var bp=F.createContext(void 0);bp.displayName="FrameworkContext";function FE(){let t=F.useContext(bp);return Np(t,"You must render this element inside a <HydratedRouter> element"),t}function GP(t,e){let n=F.useContext(bp),[r,i]=F.useState(!1),[s,o]=F.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:f}=e,m=F.useRef(null);F.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let C=w=>{w.forEach(g=>{o(g.isIntersecting)})},D=new IntersectionObserver(C,{threshold:.5});return m.current&&D.observe(m.current),()=>{D.disconnect()}}},[t]),F.useEffect(()=>{if(r){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[r]);let _=()=>{i(!0)},R=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:Ko(a,_),onBlur:Ko(u,R),onMouseEnter:Ko(c,_),onMouseLeave:Ko(d,R),onTouchStart:Ko(f,_)}]:[!1,m,{}]}function Ko(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function HP({page:t,...e}){let{router:n}=OE(),r=F.useMemo(()=>Dr(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?F.createElement(QP,{page:t,matches:r,...e}):null}function WP(t){let{manifest:e,routeModules:n}=FE(),[r,i]=F.useState([]);return F.useEffect(()=>{let s=!1;return FP(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function QP({page:t,matches:e,...n}){let r=Qi(),{manifest:i,routeModules:s}=FE(),{basename:o}=OE(),{loaderData:a,matches:u}=qP(),c=F.useMemo(()=>Oy(t,e,u,i,r,"data"),[t,e,u,i,r]),d=F.useMemo(()=>Oy(t,e,u,i,r,"assets"),[t,e,u,i,r]),f=F.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let R=new Set,C=!1;if(e.forEach(w=>{var I;let g=i.routes[w.route.id];!g||!g.hasLoader||(!c.some(V=>V.route.id===w.route.id)&&w.route.id in a&&((I=s[w.route.id])!=null&&I.shouldRevalidate)||g.hasClientLoader?C=!0:R.add(w.route.id))}),R.size===0)return[];let D=KP(t,o);return C&&R.size>0&&D.searchParams.set("_routes",e.filter(w=>R.has(w.route.id)).map(w=>w.route.id).join(",")),[D.pathname+D.search]},[o,a,r,i,c,e,t,s]),m=F.useMemo(()=>BP(d,i),[d,i]),_=WP(d);return F.createElement(F.Fragment,null,f.map(R=>F.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...n})),m.map(R=>F.createElement("link",{key:R,rel:"modulepreload",href:R,...n})),_.map(({key:R,link:C})=>F.createElement("link",{key:R,...C})))}function YP(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var BE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{BE&&(window.__reactRouterVersion="7.5.3")}catch{}function JP(t,e){return BA({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:oA({window:e==null?void 0:e.window}),hydrationData:XP(),routes:t,mapRouteProperties:wP,hydrationRouteProperties:EP,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function XP(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:ZP(t.errors)}),t}function ZP(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new ic(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}var zE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UE=F.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:d,viewTransition:f,...m},_){let{basename:R}=F.useContext(Qn),C=typeof c=="string"&&zE.test(c),D,w=!1;if(typeof c=="string"&&C&&(D=c,BE))try{let T=new URL(window.location.href),A=c.startsWith("//")?new URL(T.protocol+c):new URL(c),k=vn(A.pathname,R);A.origin===T.origin&&k!=null?c=k+A.search+A.hash:w=!0}catch{lt(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=sP(c,{relative:i}),[I,V,B]=GP(r,m),P=rx(c,{replace:o,state:a,target:u,preventScrollReset:d,relative:i,viewTransition:f});function E(T){e&&e(T),T.defaultPrevented||P(T)}let y=F.createElement("a",{...m,...B,href:D||g,onClick:w||s?e:E,ref:YP(_,V),target:u,"data-discover":!C&&n==="render"?"true":void 0});return I&&!C?F.createElement(F.Fragment,null,y,F.createElement(HP,{page:g})):y});UE.displayName="Link";var ex=F.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...c},d){let f=ll(o,{relative:c.relative}),m=Qi(),_=F.useContext(ol),{navigator:R,basename:C}=F.useContext(Qn),D=_!=null&&lx(f)&&a===!0,w=R.encodeLocation?R.encodeLocation(f).pathname:f.pathname,g=m.pathname,I=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(g=g.toLowerCase(),I=I?I.toLowerCase():null,w=w.toLowerCase()),I&&C&&(I=vn(I,C)||I);const V=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let B=g===w||!i&&g.startsWith(w)&&g.charAt(V)==="/",P=I!=null&&(I===w||!i&&I.startsWith(w)&&I.charAt(w.length)==="/"),E={isActive:B,isPending:P,isTransitioning:D},y=B?e:void 0,T;typeof r=="function"?T=r(E):T=[r,B?"active":null,P?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let A=typeof s=="function"?s(E):s;return F.createElement(UE,{...c,"aria-current":y,className:T,ref:d,style:A,to:o,viewTransition:a},typeof u=="function"?u(E):u)});ex.displayName="NavLink";var tx=F.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Eu,action:a,onSubmit:u,relative:c,preventScrollReset:d,viewTransition:f,...m},_)=>{let R=ox(),C=ax(a,{relative:c}),D=o.toLowerCase()==="get"?"get":"post",w=typeof a=="string"&&zE.test(a),g=I=>{if(u&&u(I),I.defaultPrevented)return;I.preventDefault();let V=I.nativeEvent.submitter,B=(V==null?void 0:V.getAttribute("formmethod"))||o;R(V||I.currentTarget,{fetcherKey:e,method:B,navigate:n,replace:i,state:s,relative:c,preventScrollReset:d,viewTransition:f})};return F.createElement("form",{ref:_,method:D,action:C,onSubmit:r?u:g,...m,"data-discover":!w&&t==="render"?"true":void 0})});tx.displayName="Form";function nx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jE(t){let e=F.useContext(Wi);return fe(e,nx(t)),e}function rx(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=kp(),u=Qi(),c=ll(t,{relative:s});return F.useCallback(d=>{if(VP(d,e)){d.preventDefault();let f=n!==void 0?n:Qr(u)===Qr(c);a(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,c,n,r,e,t,i,s,o])}var ix=0,sx=()=>`__${String(++ix)}__`;function ox(){let{router:t}=jE("useSubmit"),{basename:e}=F.useContext(Qn),n=yP();return F.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:c}=MP(r,e);if(i.navigate===!1){let d=i.fetcherKey||sx();await t.fetch(d,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function ax(t,{relative:e}={}){let{basename:n}=F.useContext(Qn),r=F.useContext(Yn);fe(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ll(t||".",{relative:e})},o=Qi();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(d=>d==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Kn([n,s.pathname])),Qr(s)}function lx(t,e={}){let n=F.useContext(xp);fe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=jE("useViewTransitionState"),i=ll(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=vn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=vn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return rc(i.pathname,o)!=null||rc(i.pathname,s)!=null}new TextEncoder;[...$P];/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ux(t){return F.createElement(TP,{flushSync:vE.flushSync,...t})}var Fy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},KE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,_=c&63;u||(_=64,o||(m=64)),r.push(n[d],n[f],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($E(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new hx;const m=s<<2|a>>4;if(r.push(m),c!==64){const _=a<<4&240|c>>2;if(r.push(_),f!==64){const R=c<<6&192|f;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dx=function(t){const e=$E(t);return KE.encodeByteArray(e,!0)},qE=function(t){return dx(t).replace(/\./g,"")},fx=function(t){try{return KE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=()=>px().__FIREBASE_DEFAULTS__,gx=()=>{if(typeof process>"u"||typeof Fy>"u")return;const t=Fy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fx(t[1]);return e&&JSON.parse(e)},GE=()=>{try{return mx()||gx()||yx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vx=()=>{var t;return(t=GE())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wx(){var t;const e=(t=GE())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HE(){return!wx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WE(){try{return typeof indexedDB=="object"}catch{return!1}}function Ex(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="FirebaseError";class mo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ix,Object.setPrototypeOf(this,mo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,QE.prototype.create)}}class QE{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Tx(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new mo(i,a,r)}}function Tx(t,e){return t.replace(Sx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Sx=/\{\$([^}]+)}/g;function ac(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(By(s)&&By(o)){if(!ac(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function By(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t){return t&&t._delegate?t._delegate:t}class Ua{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _x;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Px(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ax(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ax(t){return t===gi?void 0:t}function Px(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Rx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const Cx={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},kx=Te.INFO,Dx={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},Vx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Dx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class YE{constructor(e){this.name=e,this._logLevel=kx,this._logHandler=Vx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const Nx=(t,e)=>e.some(n=>t instanceof n);let zy,Uy;function bx(){return zy||(zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mx(){return Uy||(Uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JE=new WeakMap,ef=new WeakMap,XE=new WeakMap,qh=new WeakMap,Mp=new WeakMap;function Lx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Kr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JE.set(n,t)}).catch(()=>{}),Mp.set(e,t),e}function Ox(t){if(ef.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ef.set(t,e)}let tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ef.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Fx(t){tf=t(tf)}function Bx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gh(this),e,...n);return XE.set(r,e.sort?e.sort():[e]),Kr(r)}:Mx().includes(t)?function(...e){return t.apply(Gh(this),e),Kr(JE.get(this))}:function(...e){return Kr(t.apply(Gh(this),e))}}function zx(t){return typeof t=="function"?Bx(t):(t instanceof IDBTransaction&&Ox(t),Nx(t,bx())?new Proxy(t,tf):t)}function Kr(t){if(t instanceof IDBRequest)return Lx(t);if(qh.has(t))return qh.get(t);const e=zx(t);return e!==t&&(qh.set(t,e),Mp.set(e,t)),e}const Gh=t=>Mp.get(t);function Ux(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Kr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Kr(o.result),u.oldVersion,u.newVersion,Kr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const jx=["get","getKey","getAll","getAllKeys","count"],$x=["put","add","delete","clear"],Hh=new Map;function jy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hh.get(e))return Hh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$x.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||jx.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Hh.set(e,s),s}Fx(t=>({...t,get:(e,n,r)=>jy(e,n)||t.get(e,n,r),has:(e,n)=>!!jy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",$y="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new YE("@firebase/app"),Gx="@firebase/app-compat",Hx="@firebase/analytics-compat",Wx="@firebase/analytics",Qx="@firebase/app-check-compat",Yx="@firebase/app-check",Jx="@firebase/auth",Xx="@firebase/auth-compat",Zx="@firebase/database",e1="@firebase/data-connect",t1="@firebase/database-compat",n1="@firebase/functions",r1="@firebase/functions-compat",i1="@firebase/installations",s1="@firebase/installations-compat",o1="@firebase/messaging",a1="@firebase/messaging-compat",l1="@firebase/performance",u1="@firebase/performance-compat",c1="@firebase/remote-config",h1="@firebase/remote-config-compat",d1="@firebase/storage",f1="@firebase/storage-compat",p1="@firebase/firestore",m1="@firebase/vertexai-preview",g1="@firebase/firestore-compat",y1="firebase",v1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="[DEFAULT]",w1={[nf]:"fire-core",[Gx]:"fire-core-compat",[Wx]:"fire-analytics",[Hx]:"fire-analytics-compat",[Yx]:"fire-app-check",[Qx]:"fire-app-check-compat",[Jx]:"fire-auth",[Xx]:"fire-auth-compat",[Zx]:"fire-rtdb",[e1]:"fire-data-connect",[t1]:"fire-rtdb-compat",[n1]:"fire-fn",[r1]:"fire-fn-compat",[i1]:"fire-iid",[s1]:"fire-iid-compat",[o1]:"fire-fcm",[a1]:"fire-fcm-compat",[l1]:"fire-perf",[u1]:"fire-perf-compat",[c1]:"fire-rc",[h1]:"fire-rc-compat",[d1]:"fire-gcs",[f1]:"fire-gcs-compat",[p1]:"fire-fst",[g1]:"fire-fst-compat",[m1]:"fire-vertex","fire-js":"fire-js",[y1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Map,E1=new Map,sf=new Map;function Ky(t,e){try{t.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lc(t){const e=t.name;if(sf.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;sf.set(e,t);for(const n of rf.values())Ky(n,t);for(const n of E1.values())Ky(n,t);return!0}function I1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ki=new QE("app","Firebase",T1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=v1;function A1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_1,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ki.create("bad-app-name",{appName:String(i)});if(n||(n=vx()),!n)throw ki.create("no-options");const s=rf.get(i);if(s){if(ac(n,s.options)&&ac(r,s.config))return s;throw ki.create("duplicate-app",{appName:i})}const o=new xx(i);for(const u of sf.values())o.addComponent(u);const a=new S1(n,r,o);return rf.set(i,a),a}function Ks(t,e,n){var r;let i=(r=w1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(a.join(" "));return}lc(new Ua(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="firebase-heartbeat-database",x1=1,ja="firebase-heartbeat-store";let Wh=null;function ZE(){return Wh||(Wh=Ux(P1,x1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ja)}catch(n){console.warn(n)}}}}).catch(t=>{throw ki.create("idb-open",{originalErrorMessage:t.message})})),Wh}async function C1(t){try{const n=(await ZE()).transaction(ja),r=await n.objectStore(ja).get(e0(t));return await n.done,r}catch(e){if(e instanceof mo)fr.warn(e.message);else{const n=ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(n.message)}}}async function qy(t,e){try{const r=(await ZE()).transaction(ja,"readwrite");await r.objectStore(ja).put(e,e0(t)),await r.done}catch(n){if(n instanceof mo)fr.warn(n.message);else{const r=ki.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fr.warn(r.message)}}}function e0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=1024,D1=30*24*60*60*1e3;class V1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new b1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Gy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=D1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gy(),{heartbeatsToSend:r,unsentEntries:i}=N1(this._heartbeatsCache.heartbeats),s=qE(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fr.warn(n),""}}}function Gy(){return new Date().toISOString().substring(0,10)}function N1(t,e=k1){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Hy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class b1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WE()?Ex().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hy(t){return qE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t){lc(new Ua("platform-logger",e=>new Kx(e),"PRIVATE")),lc(new Ua("heartbeat",e=>new V1(e),"PRIVATE")),Ks(nf,$y,t),Ks(nf,$y,"esm2017"),Ks("fire-js","")}M1("");var L1="firebase",O1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ks(L1,O1,"app");var Wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Di,t0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function T(){}T.prototype=y.prototype,E.D=y.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(A,k,b){for(var S=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)S[ge-2]=arguments[ge];return y.prototype[k].apply(A,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,T){T||(T=0);var A=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)A[k]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(k=0;16>k;++k)A[k]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=E.g[0],T=E.g[1],k=E.g[2];var b=E.g[3],S=y+(b^T&(k^b))+A[0]+3614090360&4294967295;y=T+(S<<7&4294967295|S>>>25),S=b+(k^y&(T^k))+A[1]+3905402710&4294967295,b=y+(S<<12&4294967295|S>>>20),S=k+(T^b&(y^T))+A[2]+606105819&4294967295,k=b+(S<<17&4294967295|S>>>15),S=T+(y^k&(b^y))+A[3]+3250441966&4294967295,T=k+(S<<22&4294967295|S>>>10),S=y+(b^T&(k^b))+A[4]+4118548399&4294967295,y=T+(S<<7&4294967295|S>>>25),S=b+(k^y&(T^k))+A[5]+1200080426&4294967295,b=y+(S<<12&4294967295|S>>>20),S=k+(T^b&(y^T))+A[6]+2821735955&4294967295,k=b+(S<<17&4294967295|S>>>15),S=T+(y^k&(b^y))+A[7]+4249261313&4294967295,T=k+(S<<22&4294967295|S>>>10),S=y+(b^T&(k^b))+A[8]+1770035416&4294967295,y=T+(S<<7&4294967295|S>>>25),S=b+(k^y&(T^k))+A[9]+2336552879&4294967295,b=y+(S<<12&4294967295|S>>>20),S=k+(T^b&(y^T))+A[10]+4294925233&4294967295,k=b+(S<<17&4294967295|S>>>15),S=T+(y^k&(b^y))+A[11]+2304563134&4294967295,T=k+(S<<22&4294967295|S>>>10),S=y+(b^T&(k^b))+A[12]+1804603682&4294967295,y=T+(S<<7&4294967295|S>>>25),S=b+(k^y&(T^k))+A[13]+4254626195&4294967295,b=y+(S<<12&4294967295|S>>>20),S=k+(T^b&(y^T))+A[14]+2792965006&4294967295,k=b+(S<<17&4294967295|S>>>15),S=T+(y^k&(b^y))+A[15]+1236535329&4294967295,T=k+(S<<22&4294967295|S>>>10),S=y+(k^b&(T^k))+A[1]+4129170786&4294967295,y=T+(S<<5&4294967295|S>>>27),S=b+(T^k&(y^T))+A[6]+3225465664&4294967295,b=y+(S<<9&4294967295|S>>>23),S=k+(y^T&(b^y))+A[11]+643717713&4294967295,k=b+(S<<14&4294967295|S>>>18),S=T+(b^y&(k^b))+A[0]+3921069994&4294967295,T=k+(S<<20&4294967295|S>>>12),S=y+(k^b&(T^k))+A[5]+3593408605&4294967295,y=T+(S<<5&4294967295|S>>>27),S=b+(T^k&(y^T))+A[10]+38016083&4294967295,b=y+(S<<9&4294967295|S>>>23),S=k+(y^T&(b^y))+A[15]+3634488961&4294967295,k=b+(S<<14&4294967295|S>>>18),S=T+(b^y&(k^b))+A[4]+3889429448&4294967295,T=k+(S<<20&4294967295|S>>>12),S=y+(k^b&(T^k))+A[9]+568446438&4294967295,y=T+(S<<5&4294967295|S>>>27),S=b+(T^k&(y^T))+A[14]+3275163606&4294967295,b=y+(S<<9&4294967295|S>>>23),S=k+(y^T&(b^y))+A[3]+4107603335&4294967295,k=b+(S<<14&4294967295|S>>>18),S=T+(b^y&(k^b))+A[8]+1163531501&4294967295,T=k+(S<<20&4294967295|S>>>12),S=y+(k^b&(T^k))+A[13]+2850285829&4294967295,y=T+(S<<5&4294967295|S>>>27),S=b+(T^k&(y^T))+A[2]+4243563512&4294967295,b=y+(S<<9&4294967295|S>>>23),S=k+(y^T&(b^y))+A[7]+1735328473&4294967295,k=b+(S<<14&4294967295|S>>>18),S=T+(b^y&(k^b))+A[12]+2368359562&4294967295,T=k+(S<<20&4294967295|S>>>12),S=y+(T^k^b)+A[5]+4294588738&4294967295,y=T+(S<<4&4294967295|S>>>28),S=b+(y^T^k)+A[8]+2272392833&4294967295,b=y+(S<<11&4294967295|S>>>21),S=k+(b^y^T)+A[11]+1839030562&4294967295,k=b+(S<<16&4294967295|S>>>16),S=T+(k^b^y)+A[14]+4259657740&4294967295,T=k+(S<<23&4294967295|S>>>9),S=y+(T^k^b)+A[1]+2763975236&4294967295,y=T+(S<<4&4294967295|S>>>28),S=b+(y^T^k)+A[4]+1272893353&4294967295,b=y+(S<<11&4294967295|S>>>21),S=k+(b^y^T)+A[7]+4139469664&4294967295,k=b+(S<<16&4294967295|S>>>16),S=T+(k^b^y)+A[10]+3200236656&4294967295,T=k+(S<<23&4294967295|S>>>9),S=y+(T^k^b)+A[13]+681279174&4294967295,y=T+(S<<4&4294967295|S>>>28),S=b+(y^T^k)+A[0]+3936430074&4294967295,b=y+(S<<11&4294967295|S>>>21),S=k+(b^y^T)+A[3]+3572445317&4294967295,k=b+(S<<16&4294967295|S>>>16),S=T+(k^b^y)+A[6]+76029189&4294967295,T=k+(S<<23&4294967295|S>>>9),S=y+(T^k^b)+A[9]+3654602809&4294967295,y=T+(S<<4&4294967295|S>>>28),S=b+(y^T^k)+A[12]+3873151461&4294967295,b=y+(S<<11&4294967295|S>>>21),S=k+(b^y^T)+A[15]+530742520&4294967295,k=b+(S<<16&4294967295|S>>>16),S=T+(k^b^y)+A[2]+3299628645&4294967295,T=k+(S<<23&4294967295|S>>>9),S=y+(k^(T|~b))+A[0]+4096336452&4294967295,y=T+(S<<6&4294967295|S>>>26),S=b+(T^(y|~k))+A[7]+1126891415&4294967295,b=y+(S<<10&4294967295|S>>>22),S=k+(y^(b|~T))+A[14]+2878612391&4294967295,k=b+(S<<15&4294967295|S>>>17),S=T+(b^(k|~y))+A[5]+4237533241&4294967295,T=k+(S<<21&4294967295|S>>>11),S=y+(k^(T|~b))+A[12]+1700485571&4294967295,y=T+(S<<6&4294967295|S>>>26),S=b+(T^(y|~k))+A[3]+2399980690&4294967295,b=y+(S<<10&4294967295|S>>>22),S=k+(y^(b|~T))+A[10]+4293915773&4294967295,k=b+(S<<15&4294967295|S>>>17),S=T+(b^(k|~y))+A[1]+2240044497&4294967295,T=k+(S<<21&4294967295|S>>>11),S=y+(k^(T|~b))+A[8]+1873313359&4294967295,y=T+(S<<6&4294967295|S>>>26),S=b+(T^(y|~k))+A[15]+4264355552&4294967295,b=y+(S<<10&4294967295|S>>>22),S=k+(y^(b|~T))+A[6]+2734768916&4294967295,k=b+(S<<15&4294967295|S>>>17),S=T+(b^(k|~y))+A[13]+1309151649&4294967295,T=k+(S<<21&4294967295|S>>>11),S=y+(k^(T|~b))+A[4]+4149444226&4294967295,y=T+(S<<6&4294967295|S>>>26),S=b+(T^(y|~k))+A[11]+3174756917&4294967295,b=y+(S<<10&4294967295|S>>>22),S=k+(y^(b|~T))+A[2]+718787259&4294967295,k=b+(S<<15&4294967295|S>>>17),S=T+(b^(k|~y))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(k+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+k&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var T=y-this.blockSize,A=this.B,k=this.h,b=0;b<y;){if(k==0)for(;b<=T;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<y;)if(A[k++]=E.charCodeAt(b++),k==this.blockSize){i(this,A),k=0;break}}else for(;b<y;)if(A[k++]=E[b++],k==this.blockSize){i(this,A),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var T=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=T&255,T/=256;for(this.u(E),E=Array(16),y=T=0;4>y;++y)for(var A=0;32>A;A+=8)E[T++]=this.g[y]>>>A&255;return E};function s(E,y){var T=a;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=y(E)}function o(E,y){this.h=y;for(var T=[],A=!0,k=E.length-1;0<=k;k--){var b=E[k]|0;A&&b==y||(T[k]=b,A=!1)}this.g=T}var a={};function u(E){return-128<=E&&128>E?s(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return D(c(-E));for(var y=[],T=1,A=0;E>=T;A++)y[A]=E/T|0,T*=4294967296;return new o(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return D(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(y,8)),A=f,k=0;k<E.length;k+=8){var b=Math.min(8,E.length-k),S=parseInt(E.substring(k,k+b),y);8>b?(b=c(Math.pow(y,b)),A=A.j(b).add(c(S))):(A=A.j(T),A=A.add(c(S)))}return A}var f=u(0),m=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-D(this).m();for(var E=0,y=1,T=0;T<this.g.length;T++){var A=this.i(T);E+=(0<=A?A:4294967296+A)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(C(this))return"-"+D(this).toString(E);for(var y=c(Math.pow(E,6)),T=this,A="";;){var k=V(T,y).g;T=w(T,k.j(y));var b=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=k,R(T))return b+A;for(;6>b.length;)b="0"+b;A=b+A}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function C(E){return E.h==-1}t.l=function(E){return E=w(this,E),C(E)?-1:R(E)?0:1};function D(E){for(var y=E.g.length,T=[],A=0;A<y;A++)T[A]=~E.g[A];return new o(T,~E.h).add(m)}t.abs=function(){return C(this)?D(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],A=0,k=0;k<=y;k++){var b=A+(this.i(k)&65535)+(E.i(k)&65535),S=(b>>>16)+(this.i(k)>>>16)+(E.i(k)>>>16);A=S>>>16,b&=65535,S&=65535,T[k]=S<<16|b}return new o(T,T[T.length-1]&-2147483648?-1:0)};function w(E,y){return E.add(D(y))}t.j=function(E){if(R(this)||R(E))return f;if(C(this))return C(E)?D(this).j(D(E)):D(D(this).j(E));if(C(E))return D(this.j(D(E)));if(0>this.l(_)&&0>E.l(_))return c(this.m()*E.m());for(var y=this.g.length+E.g.length,T=[],A=0;A<2*y;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<E.g.length;k++){var b=this.i(A)>>>16,S=this.i(A)&65535,ge=E.i(k)>>>16,Je=E.i(k)&65535;T[2*A+2*k]+=S*Je,g(T,2*A+2*k),T[2*A+2*k+1]+=b*Je,g(T,2*A+2*k+1),T[2*A+2*k+1]+=S*ge,g(T,2*A+2*k+1),T[2*A+2*k+2]+=b*ge,g(T,2*A+2*k+2)}for(A=0;A<y;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=y;A<2*y;A++)T[A]=0;return new o(T,0)};function g(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function I(E,y){this.g=E,this.h=y}function V(E,y){if(R(y))throw Error("division by zero");if(R(E))return new I(f,f);if(C(E))return y=V(D(E),y),new I(D(y.g),D(y.h));if(C(y))return y=V(E,D(y)),new I(D(y.g),y.h);if(30<E.g.length){if(C(E)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,A=y;0>=A.l(E);)T=B(T),A=B(A);var k=P(T,1),b=P(A,1);for(A=P(A,2),T=P(T,2);!R(A);){var S=b.add(A);0>=S.l(E)&&(k=k.add(T),b=S),A=P(A,1),T=P(T,1)}return y=w(E,k.j(y)),new I(k,y)}for(k=f;0<=E.l(y);){for(T=Math.max(1,Math.floor(E.m()/y.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),b=c(T),S=b.j(y);C(S)||0<S.l(E);)T-=A,b=c(T),S=b.j(y);R(b)&&(b=m),k=k.add(b),E=w(E,S)}return new I(k,E)}t.A=function(E){return V(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],A=0;A<y;A++)T[A]=this.i(A)&E.i(A);return new o(T,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],A=0;A<y;A++)T[A]=this.i(A)|E.i(A);return new o(T,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],A=0;A<y;A++)T[A]=this.i(A)^E.i(A);return new o(T,this.h^E.h)};function B(E){for(var y=E.g.length+1,T=[],A=0;A<y;A++)T[A]=E.i(A)<<1|E.i(A-1)>>>31;return new o(T,E.h)}function P(E,y){var T=y>>5;y%=32;for(var A=E.g.length-T,k=[],b=0;b<A;b++)k[b]=0<y?E.i(b+T)>>>y|E.i(b+T+1)<<32-y:E.i(b+T);return new o(k,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,t0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Di=o}).apply(typeof Wy<"u"?Wy:typeof self<"u"?self:typeof window<"u"?window:{});var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var n0,na,r0,Tu,of,i0,s0,o0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof nu=="object"&&nu];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var M=l[v];if(!(M in p))break e;p=p[M]}l=l[l.length-1],v=p[l],h=h(v),h!=v&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,v=!1,M={next:function(){if(!v&&p<l.length){var z=p++;return{value:h(z,l[z]),done:!1}}return v=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,v),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function _(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function R(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(v,M,z){for(var G=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)G[Ne-2]=arguments[Ne];return h.prototype[M].apply(v,G)}}function C(l){const h=l.length;if(0<h){const p=Array(h);for(let v=0;v<h;v++)p[v]=l[v];return p}return[]}function D(l,h){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(u(v)){const M=l.length||0,z=v.length||0;l.length=M+z;for(let G=0;G<z;G++)l[M+G]=v[G]}else l.push(v)}}class w{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function g(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function V(l){return V[" "](l),l}V[" "]=function(){};var B=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function P(l,h,p){for(const v in l)h.call(p,l[v],v,l)}function E(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,h){let p,v;for(let M=1;M<arguments.length;M++){v=arguments[M];for(p in v)l[p]=v[p];for(let z=0;z<T.length;z++)p=T[z],Object.prototype.hasOwnProperty.call(v,p)&&(l[p]=v[p])}}function k(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function b(l){a.setTimeout(()=>{throw l},0)}function S(){var l=re;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class ge{constructor(){this.h=this.g=null}add(h,p){const v=Je.get();v.set(h,p),this.h?this.h.next=v:this.g=v,this.h=v}}var Je=new w(()=>new ye,l=>l.reset());class ye{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,q=!1,re=new ge,oe=()=>{const l=a.Promise.resolve(void 0);Xe=()=>{l.then(we)}};var we=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(p){b(p)}var h=Je;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}q=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var mt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Ut(l,h){if(Ae.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(B){e:{try{V(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:gt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ut.aa.h.call(this)}}R(Ut,Ae);var gt={2:"touch",3:"pen",4:"mouse"};Ut.prototype.h=function(){Ut.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var _n="closure_listenable_"+(1e6*Math.random()|0),oh=0;function ah(l,h,p,v,M){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!v,this.ha=M,this.key=++oh,this.da=this.fa=!1}function st(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function wn(l){this.src=l,this.g={},this.h=0}wn.prototype.add=function(l,h,p,v,M){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var G=wo(l,h,v,M);return-1<G?(h=l[G],p||(h.fa=!1)):(h=new ah(h,this.src,z,!!v,M),h.fa=p,l.push(h)),h};function Zi(l,h){var p=h.type;if(p in l.g){var v=l.g[p],M=Array.prototype.indexOf.call(v,h,void 0),z;(z=0<=M)&&Array.prototype.splice.call(v,M,1),z&&(st(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function wo(l,h,p,v){for(var M=0;M<l.length;++M){var z=l[M];if(!z.da&&z.listener==h&&z.capture==!!p&&z.ha==v)return M}return-1}var En="closure_lm_"+(1e6*Math.random()|0),Eo={};function yl(l,h,p,v,M){if(Array.isArray(h)){for(var z=0;z<h.length;z++)yl(l,h[z],p,v,M);return null}return p=ts(p),l&&l[_n]?l.K(h,p,c(v)?!!v.capture:!1,M):vl(l,h,p,!1,v,M)}function vl(l,h,p,v,M,z){if(!h)throw Error("Invalid event type");var G=c(M)?!!M.capture:!!M,Ne=Xn(l);if(Ne||(l[En]=Ne=new wn(l)),p=Ne.add(h,p,v,G,z),p.proxy)return p;if(v=lh(),p.proxy=v,v.src=l,v.listener=p,l.addEventListener)mt||(M=G),M===void 0&&(M=!1),l.addEventListener(h.toString(),v,M);else if(l.attachEvent)l.attachEvent(wl(h.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function lh(){function l(p){return h.call(l.src,l.listener,p)}const h=Jn;return l}function _l(l,h,p,v,M){if(Array.isArray(h))for(var z=0;z<h.length;z++)_l(l,h[z],p,v,M);else v=c(v)?!!v.capture:!!v,p=ts(p),l&&l[_n]?(l=l.i,h=String(h).toString(),h in l.g&&(z=l.g[h],p=wo(z,p,v,M),-1<p&&(st(z[p]),Array.prototype.splice.call(z,p,1),z.length==0&&(delete l.g[h],l.h--)))):l&&(l=Xn(l))&&(h=l.g[h.toString()],l=-1,h&&(l=wo(h,p,v,M)),(p=-1<l?h[l]:null)&&Io(p))}function Io(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[_n])Zi(h.i,l);else{var p=l.type,v=l.proxy;h.removeEventListener?h.removeEventListener(p,v,l.capture):h.detachEvent?h.detachEvent(wl(p),v):h.addListener&&h.removeListener&&h.removeListener(v),(p=Xn(h))?(Zi(p,l),p.h==0&&(p.src=null,h[En]=null)):st(l)}}}function wl(l){return l in Eo?Eo[l]:Eo[l]="on"+l}function Jn(l,h){if(l.da)l=!0;else{h=new Ut(h,this);var p=l.listener,v=l.ha||l.src;l.fa&&Io(l),l=p.call(v,h)}return l}function Xn(l){return l=l[En],l instanceof wn?l:null}var es="__closure_events_fn_"+(1e9*Math.random()>>>0);function ts(l){return typeof l=="function"?l:(l[es]||(l[es]=function(h){return l.handleEvent(h)}),l[es])}function Le(){Se.call(this),this.i=new wn(this),this.M=this,this.F=null}R(Le,Se),Le.prototype[_n]=!0,Le.prototype.removeEventListener=function(l,h,p,v){_l(this,l,h,p,v)};function Oe(l,h){var p,v=l.F;if(v)for(p=[];v;v=v.F)p.push(v);if(l=l.M,v=h.type||h,typeof h=="string")h=new Ae(h,l);else if(h instanceof Ae)h.target=h.target||l;else{var M=h;h=new Ae(v,l),A(h,M)}if(M=!0,p)for(var z=p.length-1;0<=z;z--){var G=h.g=p[z];M=ai(G,v,!0,h)&&M}if(G=h.g=l,M=ai(G,v,!0,h)&&M,M=ai(G,v,!1,h)&&M,p)for(z=0;z<p.length;z++)G=h.g=p[z],M=ai(G,v,!1,h)&&M}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],v=0;v<p.length;v++)st(p[v]);delete l.g[h],l.h--}}this.F=null},Le.prototype.K=function(l,h,p,v){return this.i.add(String(l),h,!1,p,v)},Le.prototype.L=function(l,h,p,v){return this.i.add(String(l),h,!0,p,v)};function ai(l,h,p,v){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,z=0;z<h.length;++z){var G=h[z];if(G&&!G.da&&G.capture==p){var Ne=G.listener,yt=G.ha||G.src;G.fa&&Zi(l.i,G),M=Ne.call(yt,v)!==!1&&M}}return M&&!v.defaultPrevented}function ns(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function El(l){l.g=ns(()=>{l.g=null,l.i&&(l.i=!1,El(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Vn extends Se{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:El(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(l){Se.call(this),this.h=l,this.g={}}R(yr,Se);var To=[];function So(l){P(l.g,function(h,p){this.g.hasOwnProperty(p)&&Io(h)},l),l.g={}}yr.prototype.N=function(){yr.aa.N.call(this),So(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ro=a.JSON.stringify,Il=a.JSON.parse,rs=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function is(){}is.prototype.h=null;function ss(l){return l.h||(l.h=l.i())}function Tl(){}var vr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ao(){Ae.call(this,"d")}R(Ao,Ae);function os(){Ae.call(this,"c")}R(os,Ae);var cn={},li=null;function as(){return li=li||new Le}cn.La="serverreachability";function Sl(l){Ae.call(this,cn.La,l)}R(Sl,Ae);function x(l){const h=as();Oe(h,new Sl(h))}cn.STAT_EVENT="statevent";function N(l,h){Ae.call(this,cn.STAT_EVENT,l),this.stat=h}R(N,Ae);function O(l){const h=as();Oe(h,new N(h,l))}cn.Ma="timingevent";function $(l,h){Ae.call(this,cn.Ma,l),this.size=h}R($,Ae);function W(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function te(){this.g=!0}te.prototype.xa=function(){this.g=!1};function ue(l,h,p,v,M,z){l.info(function(){if(l.g)if(z)for(var G="",Ne=z.split("&"),yt=0;yt<Ne.length;yt++){var Pe=Ne[yt].split("=");if(1<Pe.length){var St=Pe[0];Pe=Pe[1];var Rt=St.split("_");G=2<=Rt.length&&Rt[1]=="type"?G+(St+"="+Pe+"&"):G+(St+"=redacted&")}}else G=null;else G=z;return"XMLHTTP REQ ("+v+") [attempt "+M+"]: "+h+`
`+p+`
`+G})}function X(l,h,p,v,M,z,G){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+M+"]: "+h+`
`+p+`
`+z+" "+G})}function ne(l,h,p,v){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+ce(l,p)+(v?" "+v:"")})}function ae(l,h){l.info(function(){return"TIMEOUT: "+h})}te.prototype.info=function(){};function ce(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var v=p[l];if(!(2>v.length)){var M=v[1];if(Array.isArray(M)&&!(1>M.length)){var z=M[0];if(z!="noop"&&z!="stop"&&z!="close")for(var G=1;G<M.length;G++)M[G]=""}}}}return Ro(p)}catch{return h}}var ie={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},de={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xe;function je(){}R(je,is),je.prototype.g=function(){return new XMLHttpRequest},je.prototype.i=function(){return{}},xe=new je;function Fe(l,h,p,v){this.j=l,this.i=h,this.l=p,this.R=v||1,this.U=new yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new It}function It(){this.i=null,this.g="",this.h=!1}var Ee={},Zn={};function In(l,h,p){l.L=1,l.v=xl(er(h)),l.m=p,l.P=!0,_r(l,null)}function _r(l,h){l.F=Date.now(),Nn(l),l.A=er(l.v);var p=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Om(p.i,"t",v),l.C=0,p=l.j.J,l.h=new It,l.g=tg(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Vn(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,v=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(To[0]=M.toString()),M=To);for(var z=0;z<M.length;z++){var G=yl(p,M[z],v||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),x(),ue(l.i,l.u,l.A,l.l,l.R,l.m)}Fe.prototype.ca=function(l){l=l.target;const h=this.M;h&&tr(l)==3?h.j():this.Y(l)},Fe.prototype.Y=function(l){try{if(l==this.g)e:{const Rt=tr(this.g);var h=this.g.Ba();const fs=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||Km(this.g)))){this.J||Rt!=4||h==7||(h==8||0>=fs?x(3):x(2)),Tn(this);var p=this.g.Z();this.X=p;t:if(Nt(this)){var v=Km(this.g);l="";var M=v.length,z=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ve(this),bn(this);var G="";break t}this.h.i=new a.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(v[h],{stream:!(z&&h==M-1)});v.length=0,this.h.g+=l,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=p==200,X(this.i,this.u,this.A,this.l,this.R,Rt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,yt=this.g;if((Ne=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(Ne)){var Pe=Ne;break t}}Pe=null}if(p=Pe)ne(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tt(this,p);else{this.o=!1,this.s=3,O(12),ve(this),bn(this);break e}}if(this.P){p=!0;let Sn;for(;!this.J&&this.C<G.length;)if(Sn=ui(this,G),Sn==Zn){Rt==4&&(this.s=4,O(14),p=!1),ne(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==Ee){this.s=4,O(15),ne(this.i,this.l,G,"[Invalid Chunk]"),p=!1;break}else ne(this.i,this.l,Sn,null),Tt(this,Sn);if(Nt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||G.length!=0||this.h.h||(this.s=1,O(16),p=!1),this.o=this.o&&p,!p)ne(this.i,this.l,G,"[Invalid Chunked Response]"),ve(this),bn(this);else if(0<G.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),dh(St),St.M=!0,O(11))}}else ne(this.i,this.l,G,null),Tt(this,G);Rt==4&&ve(this),this.o&&!this.J&&(Rt==4?Jm(this.j,this):(this.o=!1,Nn(this)))}else wT(this.g),p==400&&0<G.indexOf("Unknown SID")?(this.s=3,O(12)):(this.s=0,O(13)),ve(this),bn(this)}}}catch{}finally{}};function Nt(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ui(l,h){var p=l.C,v=h.indexOf(`
`,p);return v==-1?Zn:(p=Number(h.substring(p,v)),isNaN(p)?Ee:(v+=1,v+p>h.length?Zn:(h=h.slice(v,v+p),l.C=v+p,h)))}Fe.prototype.cancel=function(){this.J=!0,ve(this)};function Nn(l){l.S=Date.now()+l.I,ls(l,l.I)}function ls(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=W(m(l.ba,l),h)}function Tn(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Fe.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ae(this.i,this.A),this.L!=2&&(x(),O(17)),ve(this),this.s=2,bn(this)):ls(this,this.S-l)};function bn(l){l.j.G==0||l.J||Jm(l.j,l)}function ve(l){Tn(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,So(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Tt(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Ln(p.h,l))){if(!l.K&&Ln(p.h,l)&&p.G==3){try{var v=p.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var M=v;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)bl(p),Vl(p);else break e;hh(p),O(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=W(m(p.Za,p),6e3));if(1>=qe(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else di(p,11)}else if((l.K||p.g==l)&&bl(p),!g(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let Pe=M[h];if(p.T=Pe[0],Pe=Pe[1],p.G==2)if(Pe[0]=="c"){p.K=Pe[1],p.ia=Pe[2];const St=Pe[3];St!=null&&(p.la=St,p.j.info("VER="+p.la));const Rt=Pe[4];Rt!=null&&(p.Aa=Rt,p.j.info("SVER="+p.Aa));const fs=Pe[5];fs!=null&&typeof fs=="number"&&0<fs&&(v=1.5*fs,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const Sn=l.g;if(Sn){const Ll=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ll){var z=v.h;z.g||Ll.indexOf("spdy")==-1&&Ll.indexOf("quic")==-1&&Ll.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(cs(z,z.h),z.h=null))}if(v.D){const fh=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;fh&&(v.ya=fh,Be(v.I,v.D,fh))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var G=l;if(v.qa=eg(v,v.J?v.ia:null,v.W),G.K){Rl(v.h,G);var Ne=G,yt=v.L;yt&&(Ne.I=yt),Ne.B&&(Tn(Ne),Nn(Ne)),v.g=G}else Qm(v);0<p.i.length&&Nl(p)}else Pe[0]!="stop"&&Pe[0]!="close"||di(p,7);else p.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?di(p,7):ch(p):Pe[0]!="noop"&&p.l&&p.l.ta(Pe),p.v=0)}}x(4)}catch{}}var Mn=class{constructor(l,h){this.g=l,this.map=h}};function ci(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function us(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function qe(l){return l.h?1:l.g?l.g.size:0}function Ln(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function cs(l,h){l.g?l.g.add(h):l.h=h}function Rl(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}ci.prototype.cancel=function(){if(this.i=km(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function km(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return C(l.i)}function sT(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,v=0;v<p;v++)h.push(l[v]);return h}h=[],p=0;for(v in l)h[p++]=l[v];return h}function oT(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const v in l)h[p++]=v;return h}}}function Dm(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=oT(l),v=sT(l),M=v.length,z=0;z<M;z++)h.call(void 0,v[z],p&&p[z],l)}var Vm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aT(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var v=l[p].indexOf("="),M=null;if(0<=v){var z=l[p].substring(0,v);M=l[p].substring(v+1)}else z=l[p];h(z,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function hi(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof hi){this.h=l.h,Al(this,l.j),this.o=l.o,this.g=l.g,Pl(this,l.s),this.l=l.l;var h=l.i,p=new Co;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Nm(this,p),this.m=l.m}else l&&(h=String(l).match(Vm))?(this.h=!1,Al(this,h[1]||"",!0),this.o=Po(h[2]||""),this.g=Po(h[3]||"",!0),Pl(this,h[4]),this.l=Po(h[5]||"",!0),Nm(this,h[6]||"",!0),this.m=Po(h[7]||"")):(this.h=!1,this.i=new Co(null,this.h))}hi.prototype.toString=function(){var l=[],h=this.j;h&&l.push(xo(h,bm,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(xo(h,bm,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(xo(p,p.charAt(0)=="/"?cT:uT,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",xo(p,dT)),l.join("")};function er(l){return new hi(l)}function Al(l,h,p){l.j=p?Po(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Pl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Nm(l,h,p){h instanceof Co?(l.i=h,fT(l.i,l.h)):(p||(h=xo(h,hT)),l.i=new Co(h,l.h))}function Be(l,h,p){l.i.set(h,p)}function xl(l){return Be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Po(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function xo(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,lT),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function lT(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var bm=/[#\/\?@]/g,uT=/[#\?:]/g,cT=/[#\?]/g,hT=/[#\?@]/g,dT=/#/g;function Co(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function wr(l){l.g||(l.g=new Map,l.h=0,l.i&&aT(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Co.prototype,t.add=function(l,h){wr(this),this.i=null,l=hs(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Mm(l,h){wr(l),h=hs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Lm(l,h){return wr(l),h=hs(l,h),l.g.has(h)}t.forEach=function(l,h){wr(this),this.g.forEach(function(p,v){p.forEach(function(M){l.call(h,M,v,this)},this)},this)},t.na=function(){wr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let v=0;v<h.length;v++){const M=l[v];for(let z=0;z<M.length;z++)p.push(h[v])}return p},t.V=function(l){wr(this);let h=[];if(typeof l=="string")Lm(this,l)&&(h=h.concat(this.g.get(hs(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return wr(this),this.i=null,l=hs(this,l),Lm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Om(l,h,p){Mm(l,h),0<p.length&&(l.i=null,l.g.set(hs(l,h),C(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var v=h[p];const z=encodeURIComponent(String(v)),G=this.V(v);for(v=0;v<G.length;v++){var M=z;G[v]!==""&&(M+="="+encodeURIComponent(String(G[v]))),l.push(M)}}return this.i=l.join("&")};function hs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function fT(l,h){h&&!l.j&&(wr(l),l.i=null,l.g.forEach(function(p,v){var M=v.toLowerCase();v!=M&&(Mm(this,v),Om(this,M,p))},l)),l.j=h}function pT(l,h){const p=new te;if(a.Image){const v=new Image;v.onload=_(Er,p,"TestLoadImage: loaded",!0,h,v),v.onerror=_(Er,p,"TestLoadImage: error",!1,h,v),v.onabort=_(Er,p,"TestLoadImage: abort",!1,h,v),v.ontimeout=_(Er,p,"TestLoadImage: timeout",!1,h,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else h(!1)}function mT(l,h){const p=new te,v=new AbortController,M=setTimeout(()=>{v.abort(),Er(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:v.signal}).then(z=>{clearTimeout(M),z.ok?Er(p,"TestPingServer: ok",!0,h):Er(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Er(p,"TestPingServer: error",!1,h)})}function Er(l,h,p,v,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),v(p)}catch{}}function gT(){this.g=new rs}function yT(l,h,p){const v=p||"";try{Dm(l,function(M,z){let G=M;c(M)&&(G=Ro(M)),h.push(v+z+"="+encodeURIComponent(G))})}catch(M){throw h.push(v+"type="+encodeURIComponent("_badmap")),M}}function Cl(l){this.l=l.Ub||null,this.j=l.eb||!1}R(Cl,is),Cl.prototype.g=function(){return new kl(this.l,this.j)},Cl.prototype.i=function(l){return function(){return l}}({});function kl(l,h){Le.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(kl,Le),t=kl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Do(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ko(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Do(this)),this.g&&(this.readyState=3,Do(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?ko(this):Do(this),this.readyState==3&&Fm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ko(this))},t.Qa=function(l){this.g&&(this.response=l,ko(this))},t.ga=function(){this.g&&ko(this)};function ko(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Do(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Do(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(kl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Bm(l){let h="";return P(l,function(p,v){h+=v,h+=":",h+=p,h+=`\r
`}),h}function uh(l,h,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=Bm(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Be(l,h,p))}function Ze(l){Le.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ze,Le);var vT=/^https?$/i,_T=["POST","PUT"];t=Ze.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xe.g(),this.v=this.o?ss(this.o):ss(xe),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(z){zm(this,z);return}if(l=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var M in v)p.set(M,v[M]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const z of v.keys())p.set(z,v.get(z));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(z=>z.toLowerCase()=="content-type"),M=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_T,h,void 0))||v||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,G]of p)this.g.setRequestHeader(z,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$m(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){zm(this,z)}};function zm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Um(l),Dl(l)}function Um(l){l.A||(l.A=!0,Oe(l,"complete"),Oe(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Oe(this,"complete"),Oe(this,"abort"),Dl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dl(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jm(this):this.bb())},t.bb=function(){jm(this)};function jm(l){if(l.h&&typeof o<"u"&&(!l.v[1]||tr(l)!=4||l.Z()!=2)){if(l.u&&tr(l)==4)ns(l.Ea,0,l);else if(Oe(l,"readystatechange"),tr(l)==4){l.h=!1;try{const G=l.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var v;if(v=G===0){var M=String(l.D).match(Vm)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),v=!vT.test(M?M.toLowerCase():"")}p=v}if(p)Oe(l,"complete"),Oe(l,"success");else{l.m=6;try{var z=2<tr(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",Um(l)}}finally{Dl(l)}}}}function Dl(l,h){if(l.g){$m(l);const p=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Oe(l,"ready");try{p.onreadystatechange=v}catch{}}}function $m(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function tr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Il(h)}};function Km(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function wT(l){const h={};l=(l.g&&2<=tr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(g(l[v]))continue;var p=k(l[v]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const z=h[M]||[];h[M]=z,z.push(p)}E(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vo(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function qm(l){this.Aa=0,this.i=[],this.j=new te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vo("baseRetryDelayMs",5e3,l),this.cb=Vo("retryDelaySeedMs",1e4,l),this.Wa=Vo("forwardChannelMaxRetries",2,l),this.wa=Vo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ci(l&&l.concurrentRequestLimit),this.Da=new gT,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=qm.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,v){O(0),this.W=l,this.H=h||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=eg(this,null,this.W),Nl(this)};function ch(l){if(Gm(l),l.G==3){var h=l.U++,p=er(l.I);if(Be(p,"SID",l.K),Be(p,"RID",h),Be(p,"TYPE","terminate"),No(l,p),h=new Fe(l,l.j,h),h.L=2,h.v=xl(er(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=tg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Nn(h)}Zm(l)}function Vl(l){l.g&&(dh(l),l.g.cancel(),l.g=null)}function Gm(l){Vl(l),l.u&&(a.clearTimeout(l.u),l.u=null),bl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Nl(l){if(!us(l.h)&&!l.s){l.s=!0;var h=l.Ga;Xe||oe(),q||(Xe(),q=!0),re.add(h,l),l.B=0}}function ET(l,h){return qe(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=W(m(l.Ga,l,h),Xm(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Fe(this,this.j,l);let z=this.o;if(this.S&&(z?(z=y(z),A(z,this.S)):z=this.S),this.m!==null||this.O||(M.H=z,z=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Wm(this,M,h),p=er(this.I),Be(p,"RID",l),Be(p,"CVER",22),this.D&&Be(p,"X-HTTP-Session-Id",this.D),No(this,p),z&&(this.O?h="headers="+encodeURIComponent(String(Bm(z)))+"&"+h:this.m&&uh(p,this.m,z)),cs(this.h,M),this.Ua&&Be(p,"TYPE","init"),this.P?(Be(p,"$req",h),Be(p,"SID","null"),M.T=!0,In(M,p,null)):In(M,p,h),this.G=2}}else this.G==3&&(l?Hm(this,l):this.i.length==0||us(this.h)||Hm(this))};function Hm(l,h){var p;h?p=h.l:p=l.U++;const v=er(l.I);Be(v,"SID",l.K),Be(v,"RID",p),Be(v,"AID",l.T),No(l,v),l.m&&l.o&&uh(v,l.m,l.o),p=new Fe(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Wm(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),cs(l.h,p),In(p,v,h)}function No(l,h){l.H&&P(l.H,function(p,v){Be(h,v,p)}),l.l&&Dm({},function(p,v){Be(h,v,p)})}function Wm(l,h,p){p=Math.min(l.i.length,p);var v=l.l?m(l.l.Na,l.l,l):null;e:{var M=l.i;let z=-1;for(;;){const G=["count="+p];z==-1?0<p?(z=M[0].g,G.push("ofs="+z)):z=0:G.push("ofs="+z);let Ne=!0;for(let yt=0;yt<p;yt++){let Pe=M[yt].g;const St=M[yt].map;if(Pe-=z,0>Pe)z=Math.max(0,M[yt].g-100),Ne=!1;else try{yT(St,G,"req"+Pe+"_")}catch{v&&v(St)}}if(Ne){v=G.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,v}function Qm(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Xe||oe(),q||(Xe(),q=!0),re.add(h,l),l.v=0}}function hh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=W(m(l.Fa,l),Xm(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Ym(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=W(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,O(10),Vl(this),Ym(this))};function dh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Ym(l){l.g=new Fe(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=er(l.qa);Be(h,"RID","rpc"),Be(h,"SID",l.K),Be(h,"AID",l.T),Be(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Be(h,"TO",l.ja),Be(h,"TYPE","xmlhttp"),No(l,h),l.m&&l.o&&uh(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=xl(er(h)),p.m=null,p.P=!0,_r(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Vl(this),hh(this),O(19))};function bl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Jm(l,h){var p=null;if(l.g==h){bl(l),dh(l),l.g=null;var v=2}else if(Ln(l.h,h))p=h.D,Rl(l.h,h),v=1;else return;if(l.G!=0){if(h.o)if(v==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;v=as(),Oe(v,new $(v,p)),Nl(l)}else Qm(l);else if(M=h.s,M==3||M==0&&0<h.X||!(v==1&&ET(l,h)||v==2&&hh(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),M){case 1:di(l,5);break;case 4:di(l,10);break;case 3:di(l,6);break;default:di(l,2)}}}function Xm(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function di(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),v=l.Xa;const M=!v;v=new hi(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Al(v,"https"),xl(v),M?pT(v.toString(),p):mT(v.toString(),p)}else O(2);l.G=0,l.l&&l.l.sa(h),Zm(l),Gm(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),O(2)):(this.j.info("Failed to ping google.com"),O(1))};function Zm(l){if(l.G=0,l.ka=[],l.l){const h=km(l.h);(h.length!=0||l.i.length!=0)&&(D(l.ka,h),D(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function eg(l,h,p){var v=p instanceof hi?er(p):new hi(p);if(v.g!="")h&&(v.g=h+"."+v.g),Pl(v,v.s);else{var M=a.location;v=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var z=new hi(null);v&&Al(z,v),h&&(z.g=h),M&&Pl(z,M),p&&(z.l=p),v=z}return p=l.D,h=l.ya,p&&h&&Be(v,p,h),Be(v,"VER",l.la),No(l,v),v}function tg(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ze(new Cl({eb:p})):new Ze(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ng(){}t=ng.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ml(){}Ml.prototype.g=function(l,h){return new Jt(l,h)};function Jt(l,h){Le.call(this),this.g=new qm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!g(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!g(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new ds(this)}R(Jt,Le),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){ch(this.g)},Jt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Ro(l),l=p);h.i.push(new Mn(h.Ya++,l)),h.G==3&&Nl(h)},Jt.prototype.N=function(){this.g.l=null,delete this.j,ch(this.g),delete this.g,Jt.aa.N.call(this)};function rg(l){Ao.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}R(rg,Ao);function ig(){os.call(this),this.status=1}R(ig,os);function ds(l){this.g=l}R(ds,ng),ds.prototype.ua=function(){Oe(this.g,"a")},ds.prototype.ta=function(l){Oe(this.g,new rg(l))},ds.prototype.sa=function(l){Oe(this.g,new ig)},ds.prototype.ra=function(){Oe(this.g,"b")},Ml.prototype.createWebChannel=Ml.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,o0=function(){return new Ml},s0=function(){return as()},i0=cn,of={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ie.NO_ERROR=0,ie.TIMEOUT=8,ie.HTTP_ERROR=6,Tu=ie,de.COMPLETE="complete",r0=de,Tl.EventType=vr,vr.OPEN="a",vr.CLOSE="b",vr.ERROR="c",vr.MESSAGE="d",Le.prototype.listen=Le.prototype.K,na=Tl,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,n0=Ze}).apply(typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{});const Qy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new YE("@firebase/firestore");function ws(){return Fi.logLevel}function j(t,...e){if(Fi.logLevel<=Te.DEBUG){const n=e.map(Lp);Fi.debug(`Firestore (${go}): ${t}`,...n)}}function rt(t,...e){if(Fi.logLevel<=Te.ERROR){const n=e.map(Lp);Fi.error(`Firestore (${go}): ${t}`,...n)}}function $a(t,...e){if(Fi.logLevel<=Te.WARN){const n=e.map(Lp);Fi.warn(`Firestore (${go}): ${t}`,...n)}}function Lp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: `+t;throw rt(e),new Error(e)}function se(t,e){t||Z()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends mo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class z1{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){se(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string"),new F1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string"),new Ct(e)}}class U1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class j1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new U1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){se(this.o===void 0);const r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(se(typeof n.token=="string"),this.R=n.token,new $1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=q1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Zs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function l0(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new Qe(0,0))}static max(){return new le(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ka.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ka?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends Ka{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const G1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends Ka{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return G1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Ce.fromString(e))}static fromName(e){return new Q(Ce.fromString(e).popFirst(5))}static empty(){return new Q(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Ce(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function af(t){return t.fields.find(e=>e.kind===2)}function yi(t){return t.fields.filter(e=>e.kind!==2)}uc.UNKNOWN_ID=-1;class Su{constructor(e,n){this.fieldPath=e,this.kind=n}}class qa{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new qa(0,an.min())}}function u0(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new an(i,Q.empty(),e)}function c0(t){return new an(t.readTime,t.key,-1)}class an{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new an(le.min(),Q.empty(),-1)}static max(){return new an(le.max(),Q.empty(),-1)}}function Op(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ri(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==h0)throw t;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new qn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ga(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Fp(r.target.error);this.V.reject(new ga(e,i))}}static open(e,n,r,i){try{return new jc(n,e.transaction(i,r))}catch(s){throw new ga(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new W1(n)}}class qr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,qr.S(oc())===12.2&&rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),wi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!WE())return!1;if(qr.v())return!0;const e=oc(),n=qr.S(e),r=0<n&&n<10,i=f0(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(j("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new ga(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new H(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new H(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ga(e,o))},i.onupgradeneeded=s=>{j("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{j("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=jc.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),L.reject(c))).toPromise();return u.catch(()=>{}),await a.m,u}catch(a){const u=a,c=u.name!=="FirebaseError"&&o<3;if(j("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function f0(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class H1{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return wi(this.B.delete())}}class ga extends H{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ii(t){return t.name==="IndexedDbTransactionError"}class W1{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(j("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wi(r)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),wi(this.store.add(e))}get(e){return wi(this.store.get(e)).next(n=>(n===void 0&&(n=null),j("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),wi(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),wi(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){j("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=Fp(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new H1(a),c=n(a.primaryKey,a.value,u);if(c instanceof L){const d=c.catch(f=>(u.done(),L.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function wi(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Fp(r.target.error);n(i)}})}let Yy=!1;function Fp(t){const e=qr.S(oc());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yy||(Yy=!0,setTimeout(()=>{throw r},0)),r}}return t}class Q1{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){j("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{j("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ii(n)?j("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ri(n)}await this.X(6e4)})}}class Y1{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return j("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(j("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=c0(s);Op(o,r)>0&&(r=o)}),new an(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}qt.oe=-1;function $c(t){return t==null}function Ga(t){return t===0&&1/t==-1/0}function p0(t){return typeof t=="number"&&Number.isInteger(t)&&!Ga(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Jy(e)),e=J1(t.get(n),e);return Jy(e)}function J1(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Jy(t){return t+""}function zn(t){const e=t.length;if(se(e>=2),e===2)return se(t.charAt(0)===""&&t.charAt(1)===""),Ce.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Z(),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Z()}s=o+2}return new Ce(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t,e){return[t,Lt(e)]}function m0(t,e,n){return[t,Lt(e),n]}const X1={},Z1=["prefixPath","collectionGroup","readTime","documentId"],eC=["prefixPath","collectionGroup","documentId"],tC=["collectionGroup","readTime","prefixPath","documentId"],nC=["canonicalId","targetId"],rC=["targetId","path"],iC=["path","targetId"],sC=["collectionId","parent"],oC=["indexId","uid"],aC=["uid","sequenceNumber"],lC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uC=["indexId","uid","orderedDocumentKey"],cC=["userId","collectionPath","documentId"],hC=["userId","collectionPath","largestBatchId"],dC=["userId","collectionGroup","largestBatchId"],g0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fC=[...g0,"documentOverlays"],y0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],v0=y0,Bp=[...v0,"indexConfiguration","indexState","indexEntries"],pC=Bp,mC=[...Bp,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends d0{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function ht(t,e){const n=ee(t);return qr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ru(this.root,e,this.comparator,!0)}}class ru{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??_t.RED,this.left=i??_t.EMPTY,this.right=s??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ev(this.data.getIterator())}getIteratorFrom(e){return new ev(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ve)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ve(this.comparator);return n.data=e,n}}class ev{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ms(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new Ve(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new w0("Invalid base64 string: "+s):s}}(e);return new it(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const gC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(t){if(se(!!t),typeof t=="string"){let e=0;const n=gC.exec(t);if(se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Up(t){const e=t.mapValue.fields.__previous_value__;return zp(e)?Up(e):e}function Ha(t){const e=pr(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Bi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Au={nullValue:"NULL_VALUE"};function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zp(t)?4:E0(t)?9007199254740991:Kc(t)?10:11:Z()}function Wn(t,e){if(t===e)return!0;const n=zi(t);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ha(t).isEqual(Ha(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=pr(i.timestampValue),a=pr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Yr(i.bytesValue).isEqual(Yr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return $e(i.geoPointValue.latitude)===$e(s.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return $e(i.integerValue)===$e(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=$e(i.doubleValue),a=$e(s.doubleValue);return o===a?Ga(o)===Ga(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Zs(t.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Zy(o)!==Zy(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Wn(o[u],a[u])))return!1;return!0}(t,e);default:return Z()}}function Wa(t,e){return(t.values||[]).find(n=>Wn(n,e))!==void 0}function Jr(t,e){if(t===e)return 0;const n=zi(t),r=zi(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=$e(s.integerValue||s.doubleValue),u=$e(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return tv(t.timestampValue,e.timestampValue);case 4:return tv(Ha(t),Ha(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Yr(s),u=Yr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=he(a[c],u[c]);if(d!==0)return d}return he(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he($e(s.latitude),$e(o.latitude));return a!==0?a:he($e(s.longitude),$e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,d;const f=s.fields||{},m=o.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,R=(u=m.value)===null||u===void 0?void 0:u.arrayValue,C=he(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((d=R==null?void 0:R.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:nv(_,R)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Mr.mapValue&&o===Mr.mapValue)return 0;if(s===Mr.mapValue)return 1;if(o===Mr.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){const m=he(u[f],d[f]);if(m!==0)return m;const _=Jr(a[u[f]],c[d[f]]);if(_!==0)return _}return he(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Z()}}function tv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=pr(t),r=pr(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function nv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Jr(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function eo(t){return uf(t)}function uf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=uf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${uf(n.fields[o])}`;return i+"}"}(t.mapValue):Z()}function Qa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cf(t){return!!t&&"integerValue"in t}function Ya(t){return!!t&&"arrayValue"in t}function rv(t){return!!t&&"nullValue"in t}function iv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pu(t){return!!t&&"mapValue"in t}function Kc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ya(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ya(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ya(t.arrayValue.values[n]);return e}return Object.assign({},t)}function E0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const I0={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function vC(t){return"nullValue"in t?Au:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Qa(Bi.empty(),Q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Kc(t)?I0:{mapValue:{}}:Z()}function _C(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Qa(Bi.empty(),Q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?I0:"mapValue"in t?Kc(t)?{mapValue:{}}:Mr:Z()}function sv(t,e){const n=Jr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ov(t,e){const n=Jr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ya(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ya(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Pu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Yi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Dt(ya(this.value))}}function T0(t){const e=[];return Yi(t.fields,(n,r)=>{const i=new He([n]);if(Pu(r)){const s=T0(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new tt(e,0,le.min(),le.min(),le.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,i){return new tt(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new tt(e,2,n,le.min(),le.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new tt(e,3,n,le.min(),le.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n){this.position=e,this.inclusive=n}}function av(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Jr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function lv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n="asc"){this.field=e,this.dir=n}}function wC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{}class _e extends S0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new EC(e,n,r):n==="array-contains"?new SC(e,r):n==="in"?new k0(e,r):n==="not-in"?new RC(e,r):n==="array-contains-any"?new AC(e,r):new _e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new IC(e,r):new TC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Jr(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison(Jr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ke extends S0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ke(e,n)}matches(e){return no(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function no(t){return t.op==="and"}function hf(t){return t.op==="or"}function jp(t){return R0(t)&&no(t)}function R0(t){for(const e of t.filters)if(e instanceof ke)return!1;return!0}function df(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+eo(t.value);if(jp(t))return t.filters.map(e=>df(e)).join(",");{const e=t.filters.map(n=>df(n)).join(",");return`${t.op}(${e})`}}function A0(t,e){return t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&Wn(r.value,i.value)}(t,e):t instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&A0(o,i.filters[a]),!0):!1}(t,e):void Z()}function P0(t,e){const n=t.filters.concat(e);return ke.create(n,t.op)}function x0(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`}(t):t instanceof ke?function(n){return n.op.toString()+" {"+n.getFilters().map(x0).join(" ,")+"}"}(t):"Filter"}class EC extends _e{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class IC extends _e{constructor(e,n){super(e,"in",n),this.keys=C0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class TC extends _e{constructor(e,n){super(e,"not-in",n),this.keys=C0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function C0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class SC extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ya(n)&&Wa(n.arrayValue,this.value)}}class k0 extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wa(this.value.arrayValue,n)}}class RC extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Wa(this.value.arrayValue,n)}}class AC extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ya(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function ff(t,e=null,n=[],r=[],i=null,s=null,o=null){return new PC(t,e,n,r,i,s,o)}function Ui(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>df(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$c(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>eo(r)).join(",")),e.ue=n}return e.ue}function ul(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!A0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lv(t.startAt,e.startAt)&&lv(t.endAt,e.endAt)}function hc(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function dc(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function uv(t,e,n){let r=Au,i=!0;for(const s of dc(t,e)){let o=Au,a=!0;switch(s.op){case"<":case"<=":o=vC(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Au}sv({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];sv({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function cv(t,e,n){let r=Mr,i=!0;for(const s of dc(t,e)){let o=Mr,a=!0;switch(s.op){case">=":case">":o=_C(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Mr}ov({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];ov({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function D0(t,e,n,r,i,s,o,a){return new cl(t,e,n,r,i,s,o,a)}function hl(t){return new cl(t)}function hv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V0(t){return t.collectionGroup!==null}function va(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ve(He.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new cc(s,r))}),n.has(He.keyField().canonicalString())||e.ce.push(new cc(He.keyField(),r))}return e.ce}function sn(t){const e=ee(t);return e.le||(e.le=xC(e,va(t))),e.le}function xC(t,e){if(t.limitType==="F")return ff(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new cc(i.field,s)});const n=t.endAt?new to(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new to(t.startAt.position,t.startAt.inclusive):null;return ff(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pf(t,e){const n=t.filters.concat([e]);return new cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mf(t,e,n){return new cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qc(t,e){return ul(sn(t),sn(e))&&t.limitType===e.limitType}function N0(t){return`${Ui(sn(t))}|lt:${t.limitType}`}function Es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>x0(i)).join(", ")}]`),$c(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>eo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>eo(i)).join(",")),`Target(${r})`}(sn(t))}; limitType=${t.limitType})`}function dl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of va(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=av(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,va(r),i)||r.endAt&&!function(o,a,u){const c=av(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,va(r),i))}(t,e)}function b0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function M0(t){return(e,n)=>{let r=!1;for(const i of va(t)){const s=CC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function CC(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?Jr(u,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Me(Q.comparator);function nn(){return kC}const L0=new Me(Q.comparator);function ra(...t){let e=L0;for(const n of t)e=e.insert(n.key,n);return e}function O0(t){let e=L0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Un(){return _a()}function F0(){return _a()}function _a(){return new si(t=>t.toString(),(t,e)=>t.isEqual(e))}const DC=new Me(Q.comparator),VC=new Ve(Q.comparator);function pe(...t){let e=VC;for(const n of t)e=e.add(n);return e}const NC=new Ve(he);function $p(){return NC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ga(e)?"-0":e}}function B0(t){return{integerValue:""+t}}function bC(t,e){return p0(e)?B0(e):Kp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this._=void 0}}function MC(t,e,n){return t instanceof Ja?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&zp(s)&&(s=Up(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ro?U0(t,e):t instanceof io?j0(t,e):function(i,s){const o=z0(i,s),a=dv(o)+dv(i.Pe);return cf(o)&&cf(i.Pe)?B0(a):Kp(i.serializer,a)}(t,e)}function LC(t,e,n){return t instanceof ro?U0(t,e):t instanceof io?j0(t,e):n}function z0(t,e){return t instanceof Xa?function(r){return cf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ja extends Gc{}class ro extends Gc{constructor(e){super(),this.elements=e}}function U0(t,e){const n=$0(e);for(const r of t.elements)n.some(i=>Wn(i,r))||n.push(r);return{arrayValue:{values:n}}}class io extends Gc{constructor(e){super(),this.elements=e}}function j0(t,e){let n=$0(e);for(const r of t.elements)n=n.filter(i=>!Wn(i,r));return{arrayValue:{values:n}}}class Xa extends Gc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function dv(t){return $e(t.integerValue||t.doubleValue)}function $0(t){return Ya(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.field=e,this.transform=n}}function FC(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ro&&i instanceof ro||r instanceof io&&i instanceof io?Zs(r.elements,i.elements,Wn):r instanceof Xa&&i instanceof Xa?Wn(r.Pe,i.Pe):r instanceof Ja&&i instanceof Ja}(t.transform,e.transform)}class BC{constructor(e,n){this.version=e,this.transformResults=n}}class Ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hc{}function K0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qp(t.key,Ht.none()):new yo(t.key,t.data,Ht.none());{const n=t.data,r=Dt.empty();let i=new Ve(He.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new gr(t.key,r,new Gt(i.toArray()),Ht.none())}}function zC(t,e,n){t instanceof yo?function(i,s,o){const a=i.value.clone(),u=pv(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof gr?function(i,s,o){if(!xu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=pv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(q0(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wa(t,e,n,r){return t instanceof yo?function(s,o,a,u){if(!xu(s.precondition,o))return a;const c=s.value.clone(),d=mv(s.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof gr?function(s,o,a,u){if(!xu(s.precondition,o))return a;const c=mv(s.fieldTransforms,u,o),d=o.data;return d.setAll(q0(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return xu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function UC(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=z0(r.transform,i||null);s!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,s))}return n||null}function fv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zs(r,i,(s,o)=>FC(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yo extends Hc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class gr extends Hc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function q0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function pv(t,e,n){const r=new Map;se(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,LC(o,a,n[i]))}return r}function mv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,MC(s,o,e))}return r}class qp extends Hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G0 extends Hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zC(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=F0();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=K0(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(n,r)=>fv(n,r))&&Zs(this.baseMutations,e.baseMutations,(n,r)=>fv(n,r))}}class Hp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){se(e.mutations.length===r.length);let i=function(){return DC}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Hp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,Ie;function $C(t){switch(t){default:return Z();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function H0(t){if(t===void 0)return rt("GRPC error has no .code"),U.UNKNOWN;switch(t){case ot.OK:return U.OK;case ot.CANCELLED:return U.CANCELLED;case ot.UNKNOWN:return U.UNKNOWN;case ot.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ot.INTERNAL:return U.INTERNAL;case ot.UNAVAILABLE:return U.UNAVAILABLE;case ot.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ot.NOT_FOUND:return U.NOT_FOUND;case ot.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ot.ABORTED:return U.ABORTED;case ot.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ot.DATA_LOSS:return U.DATA_LOSS;default:return Z()}}(Ie=ot||(ot={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new Di([4294967295,4294967295],0);function gv(t){const e=KC().encode(t),n=new t0;return n.update(e),new Uint8Array(n.digest())}function yv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Di([n,r],0),new Di([i,s],0)]}class Qp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ia(`Invalid padding: ${n}`);if(r<0)throw new ia(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ia(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ia(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Di.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Di.fromNumber(r)));return i.compare(qC)===1&&(i=new Di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=gv(e),[r,i]=yv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Qp(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=gv(e),[r,i]=yv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ia extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,pl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fl(le.min(),i,new Me(he),nn(),pe())}}class pl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pl(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class W0{constructor(e,n){this.targetId=e,this.me=n}}class Q0{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class vv{constructor(){this.fe=0,this.ge=wv(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new pl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=wv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GC{constructor(e){this.Le=e,this.Be=new Map,this.ke=nn(),this.qe=_v(),this.Qe=new Me(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(hc(s))if(r===0){const o=new Q(s.path);this.Ue(n,o,tt.newNoDocument(o,le.min()))}else se(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Yr(r).toUint8Array()}catch(u){if(u instanceof w0)return $a("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Qp(o,i,s)}catch(u){return $a(u instanceof ia?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&hc(a.target)){const u=new Q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,tt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new fl(e,n,this.Qe,this.ke,r);return this.ke=nn(),this.qe=_v(),this.Qe=new Me(he),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new vv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ve(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _v(){return new Me(Q.comparator)}function wv(){return new Me(Q.comparator)}const HC={asc:"ASCENDING",desc:"DESCENDING"},WC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QC={and:"AND",or:"OR"};class YC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gf(t,e){return t.useProto3Json||$c(e)?e:{value:e}}function so(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JC(t,e){return so(t,e.toTimestamp())}function Ot(t){return se(!!t),le.fromTimestamp(function(n){const r=pr(n);return new Qe(r.seconds,r.nanos)}(t))}function Yp(t,e){return yf(t,e).canonicalString()}function yf(t,e){const n=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function J0(t){const e=Ce.fromString(t);return se(oI(e)),e}function fc(t,e){return Yp(t.databaseId,e.path)}function Vi(t,e){const n=J0(e);if(n.get(1)!==t.databaseId.projectId)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(eI(n))}function X0(t,e){return Yp(t.databaseId,e)}function Z0(t){const e=J0(t);return e.length===4?Ce.emptyPath():eI(e)}function vf(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eI(t){return se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ev(t,e,n){return{name:fc(t,e),fields:n.value.mapValue.fields}}function XC(t,e,n){const r=Vi(t,e.name),i=Ot(e.updateTime),s=e.createTime?Ot(e.createTime):le.min(),o=new Dt({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ZC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(se(d===void 0||typeof d=="string"),it.fromBase64String(d||"")):(se(d===void 0||d instanceof Buffer||d instanceof Uint8Array),it.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?U.UNKNOWN:H0(c.code);return new H(d,c.message||"")}(o);n=new Q0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vi(t,r.document.name),s=Ot(r.document.updateTime),o=r.document.createTime?Ot(r.document.createTime):le.min(),a=new Dt({mapValue:{fields:r.document.fields}}),u=tt.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Cu(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Vi(t,r.document),s=r.readTime?Ot(r.readTime):le.min(),o=tt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Cu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Vi(t,r.document),s=r.removedTargetIds||[];n=new Cu([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new jC(i,s),a=r.targetId;n=new W0(a,o)}}return n}function pc(t,e){let n;if(e instanceof yo)n={update:Ev(t,e.key,e.value)};else if(e instanceof qp)n={delete:fc(t,e.key)};else if(e instanceof gr)n={update:Ev(t,e.key,e.data),updateMask:sk(e.fieldMask)};else{if(!(e instanceof G0))return Z();n={verify:fc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ja)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ro)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof io)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:JC(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function _f(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ht.updateTime(Ot(s.updateTime)):s.exists!==void 0?Ht.exists(s.exists):Ht.none()}(e.currentDocument):Ht.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;if("setToServerValue"in a)se(a.setToServerValue==="REQUEST_TIME"),u=new Ja;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];u=new ro(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];u=new io(d)}else"increment"in a?u=new Xa(o,a.increment):Z();const c=He.fromServerFormat(a.fieldPath);return new OC(c,u)}(t,i)):[];if(e.update){e.update.name;const i=Vi(t,e.update.name),s=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const c=u.fieldPaths||[];return new Gt(c.map(d=>He.fromServerFormat(d)))}(e.updateMask);return new gr(i,s,o,n,r)}return new yo(i,s,n,r)}if(e.delete){const i=Vi(t,e.delete);return new qp(i,n)}if(e.verify){const i=Vi(t,e.verify);return new G0(i,n)}return Z()}function ek(t,e){return t&&t.length>0?(se(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ot(i.updateTime):Ot(s);return o.isEqual(le.min())&&(o=Ot(s)),new BC(o,i.transformResults||[])}(n,e))):[]}function tI(t,e){return{documents:[X0(t,e.path)]}}function nI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=X0(t,i);const s=function(c){if(c.length!==0)return sI(ke.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Is(m.field),direction:nk(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function rI(t){let e=Z0(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){se(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const m=iI(f);return m instanceof ke&&jp(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(R){return new cc(Ts(R.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,$c(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,_=f.values||[];return new to(_,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,_=f.values||[];return new to(_,m)}(n.endAt)),D0(e,i,o,s,a,"F",u,c)}function tk(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ts(n.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ts(n.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ts(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ts(n.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return _e.create(Ts(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ke.create(n.compositeFilter.filters.map(r=>iI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function nk(t){return HC[t]}function rk(t){return WC[t]}function ik(t){return QC[t]}function Is(t){return{fieldPath:t.canonicalString()}}function Ts(t){return He.fromServerFormat(t.fieldPath)}function sI(t){return t instanceof _e?function(n){if(n.op==="=="){if(iv(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NAN"}};if(rv(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iv(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NAN"}};if(rv(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(n.field),op:rk(n.op),value:n.value}}}(t):t instanceof ke?function(n){const r=n.getFilters().map(i=>sI(i));return r.length===1?r[0]:{compositeFilter:{op:ik(n.op),filters:r}}}(t):Z()}function sk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r,i,s=le.min(),o=le.min(),a=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.ct=e}}function ok(t,e){let n;if(e.document)n=XC(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Q.fromSegments(e.noDocument.path),i=$i(e.noDocument.readTime);n=tt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z();{const r=Q.fromSegments(e.unknownDocument.path),i=$i(e.unknownDocument.version);n=tt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Qe(i[0],i[1]);return le.fromTimestamp(s)}(e.readTime)),n}function Iv(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:mc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:fc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:so(s,o.version.toTimestamp()),createTime:so(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ji(e.version)};else{if(!e.isUnknownDocument())return Z();r.unknownDocument={path:n.path.toArray(),version:ji(e.version)}}return r}function mc(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ji(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $i(t){const e=new Qe(t.seconds,t.nanoseconds);return le.fromTimestamp(e)}function Ei(t,e){const n=(e.baseMutations||[]).map(s=>_f(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>_f(t.ct,s)),i=Qe.fromMillis(e.localWriteTimeMs);return new Gp(e.batchId,i,n,r)}function sa(t){const e=$i(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$i(t.lastLimboFreeSnapshotVersion):le.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return se(s.documents.length===1),sn(hl(Z0(s.documents[0])))}(t.query):function(s){return sn(rI(s))}(t.query),new ar(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,it.fromBase64String(t.resumeToken))}function lI(t,e){const n=ji(e.snapshotVersion),r=ji(e.lastLimboFreeSnapshotVersion);let i;i=hc(e.target)?tI(t.ct,e.target):nI(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ui(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uI(t){const e=rI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mf(e,e.limit,"L"):e}function Qh(t,e){return new Wp(e.largestBatchId,_f(t.ct,e.overlayMutation))}function Tv(t,e){const n=e.path.lastSegment();return[t,Lt(e.path.popLast()),n]}function Sv(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ji(r.readTime),documentKey:Lt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{getBundleMetadata(e,n){return Rv(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:$i(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return Rv(e).put(function(i){return{bundleId:i.id,createTime:ji(Ot(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Av(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:uI(s.bundledQuery),readTime:$i(s.readTime)}}(r)})}saveNamedQuery(e,n){return Av(e).put(function(i){return{name:i.name,readTime:ji(Ot(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function Rv(t){return ht(t,"bundles")}function Av(t){return ht(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Wc(e,r)}getOverlay(e,n){return qo(e).get(Tv(this.userId,n)).next(r=>r?Qh(this.serializer,r):null)}getOverlays(e,n){const r=Un();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Wp(n,o);i.push(this.ht(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Lt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(qo(e).j("collectionPathOverlayIndex",a))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Un(),s=Lt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return qo(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const c=Qh(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Un();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return qo(e).J({index:"collectionGroupOverlayIndex",range:a},(u,c,d)=>{const f=Qh(this.serializer,c);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return qo(e).put(function(i,s,o){const[a,u,c]=Tv(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:pc(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function qo(t){return ht(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{Pt(e){return ht(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?it.fromUint8Array(r):it.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At($e(e.integerValue));else if("doubleValue"in e){const r=$e(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ga(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=pr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Yr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?E0(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Kc(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Z()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At($e(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),Q.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Ii.vt=new Ii;function uk(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Pv(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=uk(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class ck{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=Pv(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=Pv(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class hk{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class dk{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Go{constructor(){this.jt=new ck,this.Ht=new hk(this.jt),this.Jt=new dk(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ti(this.indexId,this.documentKey,this.arrayValue,r)}}function Tr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=xv(t.arrayValue,e.arrayValue),n!==0?n:(n=xv(t.directionalValue,e.directionalValue),n!==0?n:Q.comparator(t.documentKey,e.documentKey)))}function xv(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.Xt=new Ve((n,r)=>He.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(se(e.collectionGroup===this.collectionId),this.nn)return!1;const n=af(e);if(n!==void 0&&!this.sn(n))return!1;const r=yi(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ve(He.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Su(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Su(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Su(r.field,r.dir==="asc"?0:1)));return new uc(uc.UNKNOWN_ID,this.collectionId,n,qa.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){var e,n;if(se(t instanceof _e||t instanceof ke),t instanceof _e){if(t instanceof k0){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>_e.create(t.field,"==",s)))||[];return ke.create(i,"or")}return t}const r=t.filters.map(i=>cI(i));return ke.create(r,t.op)}function fk(t){if(t.getFilters().length===0)return[];const e=If(cI(t));return se(hI(e)),wf(e)||Ef(e)?[e]:e.getFilters()}function wf(t){return t instanceof _e}function Ef(t){return t instanceof ke&&jp(t)}function hI(t){return wf(t)||Ef(t)||function(n){if(n instanceof ke&&hf(n)){for(const r of n.getFilters())if(!wf(r)&&!Ef(r))return!1;return!0}return!1}(t)}function If(t){if(se(t instanceof _e||t instanceof ke),t instanceof _e)return t;if(t.filters.length===1)return If(t.filters[0]);const e=t.filters.map(r=>If(r));let n=ke.create(e,t.op);return n=gc(n),hI(n)?n:(se(n instanceof ke),se(no(n)),se(n.filters.length>1),n.filters.reduce((r,i)=>Jp(r,i)))}function Jp(t,e){let n;return se(t instanceof _e||t instanceof ke),se(e instanceof _e||e instanceof ke),n=t instanceof _e?e instanceof _e?function(i,s){return ke.create([i,s],"and")}(t,e):kv(t,e):e instanceof _e?kv(e,t):function(i,s){if(se(i.filters.length>0&&s.filters.length>0),no(i)&&no(s))return P0(i,s.getFilters());const o=hf(i)?i:s,a=hf(i)?s:i,u=o.filters.map(c=>Jp(c,a));return ke.create(u,"or")}(t,e),gc(n)}function kv(t,e){if(no(e))return P0(e,t.getFilters());{const n=e.filters.map(r=>Jp(t,r));return ke.create(n,"or")}}function gc(t){if(se(t instanceof _e||t instanceof ke),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return gc(e[0]);if(R0(t))return t;const n=e.map(i=>gc(i)),r=[];return n.forEach(i=>{i instanceof _e?r.push(i):i instanceof ke&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ke.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(){this.un=new Xp}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(an.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(an.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class Xp{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ve(Ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ve(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new Uint8Array(0);class mk{constructor(e,n){this.databaseId=n,this.cn=new Xp,this.ln=new si(r=>Ui(r),(r,i)=>ul(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Lt(i)};return Dv(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[l0(n),""],!1,!0);return Dv(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(zn(o.parent))}return r})}addFieldIndex(e,n){const r=Ho(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=ys(e);return s.next(a=>{o.put(Sv(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Ho(e),i=ys(e),s=gs(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ho(e),r=gs(e),i=ys(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return L.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new Cv(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=gs(e);let i=!0;const s=new Map;return L.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=pe();const a=[];return L.forEach(s,(u,c)=>{j("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(V=>`${V.fieldPath}:${V.kind}`).join(",")}`}(u)} to execute ${Ui(n)}`);const d=function(I,V){const B=af(V);if(B===void 0)return null;for(const P of dc(I,B.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null}(c,u),f=function(I,V){const B=new Map;for(const P of yi(V))for(const E of dc(I,P.fieldPath))switch(E.op){case"==":case"in":B.set(P.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return B.set(P.fieldPath.canonicalString(),E.value),Array.from(B.values())}return null}(c,u),m=function(I,V){const B=[];let P=!0;for(const E of yi(V)){const y=E.kind===0?uv(I,E.fieldPath,I.startAt):cv(I,E.fieldPath,I.startAt);B.push(y.value),P&&(P=y.inclusive)}return new to(B,P)}(c,u),_=function(I,V){const B=[];let P=!0;for(const E of yi(V)){const y=E.kind===0?cv(I,E.fieldPath,I.endAt):uv(I,E.fieldPath,I.endAt);B.push(y.value),P&&(P=y.inclusive)}return new to(B,P)}(c,u),R=this.In(u,c,m),C=this.In(u,c,_),D=this.Tn(u,c,f),w=this.En(u.indexId,d,R,m.inclusive,C,_.inclusive,D);return L.forEach(w,g=>r.G(g,n.limit).next(I=>{I.forEach(V=>{const B=Q.fromSegments(V.documentKey);o.has(B)||(o=o.add(B),a.push(B))})}))}).next(()=>a)}return L.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=fk(ke.create(e.filters,"and")).map(r=>ff(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),d=[];for(let f=0;f<u;++f){const m=n?this.dn(n[f/c]):iu,_=this.An(e,m,r[f%c],i),R=this.Rn(e,m,s[f%c],o),C=a.map(D=>this.An(e,m,D,!0));d.push(...this.createRange(_,R,C))}return d}An(e,n,r,i){const s=new Ti(e,Q.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Ti(e,Q.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new Cv(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return L.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let c=new Ve(He.comparator),d=!1;for(const f of u.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:c=c.add(m.field));for(const f of u.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new Go;for(const i of yi(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);Ii.vt.It(s,o)}return r.zt()}dn(e){const n=new Go;return Ii.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Go;return Ii.vt.It(Qa(this.databaseId,n),r.Yt(function(s){const o=yi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Go);let s=0;for(const o of yi(e)){const a=r[s++];for(const u of i)if(this.fn(n,o.fieldPath)&&Ya(a))i=this.gn(i,o,a);else{const c=u.Yt(o.kind);Ii.vt.It(a,c)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Go;u.seed(a.zt()),Ii.vt.It(o,u.Yt(n.kind)),s.push(u)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Ho(e),i=ys(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(d,f){const m=f?new qa(f.sequenceNumber,new an($i(f.readTime),new Q(zn(f.documentKey)),f.largestBatchId)):qa.empty(),_=d.fields.map(([R,C])=>new Su(He.fromServerFormat(R),C));return new uc(d.indexId,d.collectionGroup,_,m)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Ho(e),s=ys(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,u=>s.put(Sv(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,u=>this.wn(e,i,u).next(c=>{const d=this.Sn(s,u);return c.isEqual(d)?L.resolve():this.bn(e,s,u,c,d)}))))})}Dn(e,n,r,i){return gs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return gs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=gs(e);let s=new Ve(Tr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Ti(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Ve(Tr);const i=this.Vn(n,e);if(i==null)return r;const s=af(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Ya(o))for(const a of o.arrayValue.values||[])r=r.add(new Ti(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Ti(n.indexId,e.key,iu,i));return r}bn(e,n,r,i,s){j("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,c,d,f,m){const _=u.getIterator(),R=c.getIterator();let C=ms(_),D=ms(R);for(;C||D;){let w=!1,g=!1;if(C&&D){const I=d(C,D);I<0?g=!0:I>0&&(w=!0)}else C!=null?g=!0:w=!0;w?(f(D),D=ms(R)):g?(m(C),C=ms(_)):(C=ms(_),D=ms(R))}}(i,s,Tr,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),L.waitFor(o)}yn(e){let n=1;return ys(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Tr(o,a)).filter((o,a,u)=>!a||Tr(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Tr(o,e),u=Tr(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,iu,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,iu,[]];s.push(IDBKeyRange.bound(a,u))}return s}Cn(e,n){return Tr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Vv)}getMinOffset(e,n){return L.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||Z())).next(Vv)}}function Dv(t){return ht(t,"collectionParents")}function gs(t){return ht(t,"indexEntries")}function Ho(t){return ht(t,"indexConfiguration")}function ys(t){return ht(t,"indexState")}function Vv(t){se(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Op(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new an(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class jt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new jt(e,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.J({range:o},(d,f,m)=>(a++,m.delete()));s.push(u.next(()=>{se(a===1)}));const c=[];for(const d of n.mutations){const f=m0(e,d.key.path,n.batchId);s.push(i.delete(f)),c.push(d.key)}return L.waitFor(s).next(()=>c)}function yc(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Z();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt.DEFAULT_COLLECTION_PERCENTILE=10,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jt.DEFAULT=new jt(41943040,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jt.DISABLED=new jt(-1,0,0);class Qc{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){se(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Qc(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ss(e),o=Sr(e);return o.add({}).next(a=>{se(typeof a=="number");const u=new Gp(a,n,r,i),c=function(_,R,C){const D=C.baseMutations.map(g=>pc(_.ct,g)),w=C.mutations.map(g=>pc(_.ct,g));return{userId:R,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:D,mutations:w}}(this.serializer,this.userId,u),d=[];let f=new Ve((m,_)=>he(m.canonicalString(),_.canonicalString()));for(const m of i){const _=m0(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(o.put(c)),d.push(s.put(_,X1))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),L.waitFor(d).next(()=>u)})}lookupMutationBatch(e,n){return Sr(e).get(n).next(r=>r?(se(r.userId===this.userId),Ei(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?L.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Sr(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(se(a.batchId>=r),s=Ei(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Sr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sr(e).U("userMutationsIndex",n).next(r=>r.map(i=>Ei(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Ru(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ss(e).J({range:i},(o,a,u)=>{const[c,d,f]=o,m=zn(d);if(c===this.userId&&n.path.isEqual(m))return Sr(e).get(f).next(_=>{if(!_)throw Z();se(_.userId===this.userId),s.push(Ei(this.serializer,_))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ve(he);const i=[];return n.forEach(s=>{const o=Ru(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Ss(e).J({range:a},(c,d,f)=>{const[m,_,R]=c,C=zn(_);m===this.userId&&s.path.isEqual(C)?r=r.add(R):f.done()});i.push(u)}),L.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Ru(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ve(he);return Ss(e).J({range:o},(u,c,d)=>{const[f,m,_]=u,R=zn(m);f===this.userId&&r.isPrefixOf(R)?R.length===i&&(a=a.add(_)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Sr(e).get(s).next(o=>{if(o===null)throw Z();se(o.userId===this.userId),r.push(Ei(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return dI(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ss(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=zn(s[1]);i.push(u)}else a.done()}).next(()=>{se(i.length===0)})})}containsKey(e,n){return fI(e,this.userId,n)}Nn(e){return pI(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fI(t,e,n){const r=Ru(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ss(t).J({range:s,H:!0},(a,u,c)=>{const[d,f,m]=a;d===e&&f===i&&(o=!0),c.done()}).next(()=>o)}function Sr(t){return ht(t,"mutations")}function Ss(t){return ht(t,"documentMutations")}function pI(t){return ht(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ki(0)}static kn(){return new Ki(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Ki(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>le.fromTimestamp(new Qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>vs(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(se(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return vs(e).J((o,a)=>{const u=sa(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return vs(e).J((r,i)=>{const s=sa(i);n(s)})}qn(e){return bv(e).get("targetGlobalKey").next(n=>(se(n!==null),n))}Qn(e,n){return bv(e).put("targetGlobalKey",n)}Kn(e,n){return vs(e).put(lI(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ui(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return vs(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const c=sa(a);ul(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Vr(e);return n.forEach(o=>{const a=Lt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=Vr(e);return L.forEach(n,s=>{const o=Lt(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Vr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Vr(e);let s=pe();return i.J({range:r,H:!0},(o,a,u)=>{const c=zn(o[1]),d=new Q(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Lt(n.path),i=IDBKeyRange.bound([r],[l0(r)],!1,!0);let s=0;return Vr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return vs(e).get(n).next(r=>r?sa(r):null)}}function vs(t){return ht(t,"targets")}function bv(t){return ht(t,"targetGlobal")}function Vr(t){return ht(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class yk{constructor(e){this.Un=e,this.buffer=new Ve(Mv),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Mv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ii(n)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ri(n)}await this.Hn(3e5)})}}class _k{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(qt.oe);const r=new yk(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Nv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nv):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),ws()<=Te.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function wk(t,e){return new _k(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n){this.db=e,this.garbageCollector=wk(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return su(e,r)}removeReference(e,n,r){return su(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return su(e,n)}nr(e,n){return function(i,s){let o=!1;return pI(i).Y(a=>fI(i,a,s).next(u=>(u&&(o=!0),L.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const u=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,le.min()),Vr(e).delete(function(f){return[0,Lt(f.path)]}(o))))});i.push(u)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return su(e,n)}tr(e,n){const r=Vr(e);let i,s=qt.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:c})=>{o===0?(s!==qt.oe&&n(new Q(zn(i)),s),s=c,i=u):s=qt.oe}).next(()=>{s!==qt.oe&&n(new Q(zn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function su(t,e){return Vr(t).put(function(r,i){return{targetId:0,path:Lt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.changes=new si(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return fi(e).put(r)}removeEntry(e,n,r){return fi(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],mc(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=tt.newInvalidDocument(n);return fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wo(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:tt.newInvalidDocument(n)};return fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wo(n))},(i,s)=>{r={document:this.ir(n,s),size:yc(s)}}).next(()=>r)}getEntries(e,n){let r=nn();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=nn(),i=new Me(Q.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,yc(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return L.resolve();let i=new Ve(Fv);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Wo(i.first()),Wo(i.last())),o=i.getIterator();let a=o.getNext();return fi(e).J({index:"documentKeyIndex",range:s},(u,c,d)=>{const f=Q.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Fv(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(Wo(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),mc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fi(e).U(IDBKeyRange.bound(a,u,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=nn();for(const f of c){const m=this.ir(Q.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(dl(n,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=nn();const o=Ov(n,r),a=Ov(n,an.max());return fi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,c,d)=>{const f=this.ir(Q.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Tk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Lv(e).get("remoteDocumentGlobalKey").next(n=>(se(!!n),n))}rr(e,n){return Lv(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=ok(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(le.min())))return r}return tt.newInvalidDocument(e)}}function gI(t){return new Ik(t)}class Tk extends mI{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new si(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ve((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=Iv(this.cr.serializer,o);i=i.add(s.path.popLast());const c=yc(u);r+=c-a.size,n.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=Iv(this.cr.serializer,o.convertToNoDocument(le.min()));n.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Lv(t){return ht(t,"remoteDocumentGlobal")}function fi(t){return ht(t,"remoteDocumentsV14")}function Wo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ov(t,e){const n=e.documentKey.path.toArray();return[t,mc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Fv(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wa(r.mutation,i,Gt.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=Un();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ra();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Un();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=nn();const o=_a(),a=function(){return _a()}();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof gr)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),wa(d.mutation,c,d.mutation.getFieldMask(),Qe.now())):o.set(c.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new Sk(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_a();let i=new Me((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||Gt.empty();d=a.applyToLocalView(c,d),r.set(u,d);const f=(i.get(a.batchId)||pe()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,f=F0();d.forEach(m=>{if(!s.has(m)){const _=K0(n.get(m),r.get(m));_!==null&&f.set(m,_),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Un());let a=-1,u=s;return o.next(c=>L.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,pe())).next(d=>({batchId:a,changes:O0(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=ra();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ra();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,u=>{const c=function(f,m){return new cl(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,tt.newInvalidDocument(d)))});let a=ra();return o.forEach((u,c)=>{const d=s.get(u);d!==void 0&&wa(d.mutation,c,Gt.empty(),Qe.now()),dl(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ot(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:uI(i.bundledQuery),readTime:Ot(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.overlays=new Me(Q.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Un();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Un(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Me((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Un(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Un(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return L.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Wp(n,r));let s=this.Ir.get(n);s===void 0&&(s=pe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.Tr=new Ve(dt.Er),this.dr=new Ve(dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new Ce([])),r=new dt(n,e),i=new dt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new Ce([])),r=new dt(n,e),i=new dt(n,e+1);let s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ve(dt.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Gp(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),i=new dt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ve(he);return n.forEach(i=>{const s=new dt(i,0),o=new dt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const o=new dt(new Q(s),0);let a=new Ve(he);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},o),L.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){se(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,i=>{const s=new dt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new dt(n,0),i=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.Mr=e,this.docs=function(){return new Me(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(n))}getEntries(e,n){let r=nn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tt.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=nn();const o=n.path,a=new Q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Op(c0(d),r)<=0||(i.has(d.key)||dl(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kk(this)}getSize(e){return L.resolve(this.size)}}class kk extends mI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.persistence=e,this.Nr=new si(n=>Ui(n),ul),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Zp,this.targetCount=0,this.kr=Ki.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ki(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.qr={},this.overlays={},this.Qr=new qt(0),this.Kr=!1,this.Kr=!0,this.$r=new Pk,this.referenceDelegate=e(this),this.Ur=new Dk(this),this.indexManager=new pk,this.remoteDocumentCache=function(i){return new Ck(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new aI(n),this.Gr=new Rk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ak,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new xk(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new Vk(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Vk extends d0{constructor(e){super(),this.currentSequenceNumber=e}}class Yc{constructor(e){this.persistence=e,this.Jr=new Zp,this.Yr=null}static Zr(e){return new Yc(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const i=Q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.serializer=e}O(e,n,r,i){const s=new jc("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xy,{unique:!0}),u.createObjectStore("documentMutations")}(e),Bv(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),Bv(e)),o=o.next(()=>function(u){const c=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,c){return c.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xy,{unique:!0});const f=c.store("mutations"),m=d.map(_=>f.put(_));return L.waitFor(m)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const c=u.createObjectStore("documentOverlays",{keyPath:cC});c.createIndex("collectionPathOverlayIndex",hC,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",dC,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const c=u.createObjectStore("remoteDocumentsV14",{keyPath:Z1});c.createIndex("documentKeyIndex",eC),c.createIndex("collectionGroupIndex",tC)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:oC}).createIndex("sequenceNumberIndex",aC,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:lC}).createIndex("documentKeyIndex",uC,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=yc(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>L.forEach(a,u=>{se(u.userId===s.userId);const c=Ei(this.serializer,u);return dI(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new Ce(o),c=function(f){return[0,Lt(f)]}(u);s.push(n.get(c).next(d=>d?L.resolve():(f=>n.put({targetId:0,path:Lt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>L.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:sC});const r=n.store("collectionParents"),i=new Xp,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Lt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new Ce(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],c)=>{const d=zn(a);return s(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=sa(i),o=lI(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),u=function(f){return f.document?new Q(Ce.fromString(f.document.name).popFirst(5)):f.noDocument?Q.fromSegments(f.noDocument.path):f.unknownDocument?Q.fromSegments(f.unknownDocument.path):Z()}(o).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>L.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=gI(this.serializer),s=new vI(Yc.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var c;let d=(c=a.get(u.userId))!==null&&c!==void 0?c:pe();Ei(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),L.forEach(a,(u,c)=>{const d=new Ct(c),f=Wc.lt(this.serializer,d),m=s.getIndexManager(d),_=Qc.lt(d,this.serializer,m,s.referenceDelegate);return new yI(i,_,f,m).recalculateAndSaveOverlaysForDocumentKeys(new lf(n,qt.oe),u).next()})})}}function Bv(t){t.createObjectStore("targetDocuments",{keyPath:rC}).createIndex("documentTargetsIndex",iC,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nC,{unique:!0}),t.createObjectStore("targetGlobal")}const Yh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class em{constructor(e,n,r,i,s,o,a,u,c,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!em.D())throw new H(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ek(this,i),this.Ai=n+"main",this.serializer=new aI(u),this.Ri=new qr(this.Ai,this.hi,new Nk(this.serializer)),this.$r=new lk,this.Ur=new gk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gI(this.serializer),this.Gr=new ak,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(U.FAILED_PRECONDITION,Yh);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new qt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ou(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ii(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Qo(e).get("owner").next(n=>L.resolve(this.vi(n)))}Ci(e){return ou(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=ht(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?L.resolve(!0):Qo(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new H(U.FAILED_PRECONDITION,Yh);return!1}}return!(!this.networkEnabled||!this.inForeground)||ou(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&j("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new lf(e,qt.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ou(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Qc.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mk(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Wc.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){j("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===17?mC:u===16?pC:u===15?Bp:u===14?v0:u===13?y0:u===12?fC:u===11?g0:void Z()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new lf(a,this.Qr?this.Qr.next():qt.oe),n==="readwrite-primary"?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new H(U.FAILED_PRECONDITION,h0);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Qo(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H(U.FAILED_PRECONDITION,Yh)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qo(e).put("owner",n)}static D(){return qr.D()}bi(e){const n=Qo(e);return n.get("owner").next(r=>this.vi(r)?(j("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):L.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;HE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return j("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){rt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qo(t){return ht(t,"owner")}function ou(t){return ht(t,"clientMetadata")}function _I(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new tm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return HE()?8:f0(oc())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new bk;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ws()<=Te.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(ws()<=Te.DEBUG&&j("QueryEngine","Query:",Es(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ws()<=Te.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(n))):L.resolve())}Yi(e,n){if(hv(n))return L.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=mf(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,mf(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return hv(n)||i.isEqual(le.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?L.resolve(null):(ws()<=Te.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Es(n)),this.rs(e,o,n,u0(i,-1)).next(a=>a))})}ts(e,n){let r=new Ve(M0(e));return n.forEach((i,s)=>{dl(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ws()<=Te.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Es(n)),this.Ji.getDocumentsMatchingQuery(e,n,an.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Me(he),this._s=new si(s=>Ui(s),ul),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function EI(t,e,n,r){return new Mk(t,e,n,r)}async function II(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=pe();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Lk(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const f=c.batch,m=f.keys();let _=L.resolve();return m.forEach(R=>{_=_.next(()=>d.getEntry(u,R)).next(C=>{const D=c.docVersions.get(R);se(D!==null),C.version.compareTo(D)<0&&(f.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),d.addEntry(C)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function TI(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Ok(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,f)=>{const m=i.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let _=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(it.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(f,_),function(C,D,w){return C.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,_,d)&&a.push(n.Ur.updateTargetData(s,_))});let u=nn(),c=pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Fk(s,o,e.documentUpdates).next(d=>{u=d.Ps,c=d.Is})),!r.isEqual(le.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function Fk(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=nn();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function Bk(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vc(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ar(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function oo(t,e,n){const r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ii(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Tf(t,e,n){const r=ee(t);let i=le.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const f=ee(u),m=f._s.get(d);return m!==void 0?L.resolve(f.os.get(m)):f.Ur.getTargetData(c,d)}(r,o,sn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:pe())).next(a=>(AI(r,b0(e),a),{documents:a,Ts:s})))}function SI(t,e){const n=ee(t),r=ee(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function RI(t,e){const n=ee(t),r=n.us.get(e)||le.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,u0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(AI(n,e,i),i))}function AI(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}function zv(t,e){return`firestore_clients_${t}_${e}`}function Uv(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Jh(t,e){return`firestore_targets_${t}_${e}`}class _c{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new H(i.error.code,i.error.message))),o?new _c(e,n,i.state,s):(rt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ea{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new H(r.error.code,r.error.message))),s?new Ea(e,r.state,i):(rt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wc{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=$p();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=p0(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new wc(e,s):(rt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class nm{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new nm(n.clientId,n.onlineState):(rt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Sf{constructor(){this.activeTargetIds=$p()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xh{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Me(he),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=zv(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Sf),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(zv(this.persistenceKey,r));if(i){const s=wc.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Jh(this.persistenceKey,e));if(i){const s=Ea.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jh(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return j("SharedClientState","READ",e,n),n}setItem(e,n){j("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(j("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=qt.oe;if(s!=null)try{const a=JSON.parse(s);se(typeof a=="number"),o=a}catch(a){rt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==qt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new _c(this.currentUser,e,n,r),s=Uv(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=Uv(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Jh(this.persistenceKey,e),s=new Ea(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return wc.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return _c.Rs(new Ct(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Ea.Rs(i,n)}Ls(e){return nm.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);j("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=$p();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class PI{constructor(){this.so=new Sf,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Sf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au=null;function Zh(){return au===null?au=function(){return 268435456+Math.round(2147483648*Math.random())}():au++,"0x"+au.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="WebChannelConnection";class $k extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Zh(),u=this.xo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(d=>(j("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw $a("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+go}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Uk[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Zh();return new Promise((o,a)=>{const u=new n0;u.setWithCredentials(!0),u.listenOnce(r0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Tu.NO_ERROR:const d=u.getResponseJson();j(xt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Tu.TIMEOUT:j(xt,`RPC '${e}' ${s} timed out`),a(new H(U.DEADLINE_EXCEEDED,"Request time out"));break;case Tu.HTTP_ERROR:const f=u.getStatus();if(j(xt,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const R=function(D){const w=D.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(_.status);a(new H(R,_.message))}else a(new H(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new H(U.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{j(xt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);j(xt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Zh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=o0(),a=s0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");j(xt,`Creating RPC '${e}' stream ${i}: ${d}`,u);const f=o.createWebChannel(d,u);let m=!1,_=!1;const R=new jk({Io:D=>{_?j(xt,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(m||(j(xt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),j(xt,`RPC '${e}' stream ${i} sending:`,D),f.send(D))},To:()=>f.close()}),C=(D,w,g)=>{D.listen(w,I=>{try{g(I)}catch(V){setTimeout(()=>{throw V},0)}})};return C(f,na.EventType.OPEN,()=>{_||(j(xt,`RPC '${e}' stream ${i} transport opened.`),R.yo())}),C(f,na.EventType.CLOSE,()=>{_||(_=!0,j(xt,`RPC '${e}' stream ${i} transport closed`),R.So())}),C(f,na.EventType.ERROR,D=>{_||(_=!0,$a(xt,`RPC '${e}' stream ${i} transport errored:`,D),R.So(new H(U.UNAVAILABLE,"The operation could not be completed")))}),C(f,na.EventType.MESSAGE,D=>{var w;if(!_){const g=D.data[0];se(!!g);const I=g,V=I.error||((w=I[0])===null||w===void 0?void 0:w.error);if(V){j(xt,`RPC '${e}' stream ${i} received error:`,V);const B=V.status;let P=function(T){const A=ot[T];if(A!==void 0)return H0(A)}(B),E=V.message;P===void 0&&(P=U.INTERNAL,E="Unknown error status: "+B+" with message "+V.message),_=!0,R.So(new H(P,E)),f.close()}else j(xt,`RPC '${e}' stream ${i} received:`,g),R.bo(g)}}),C(a,i0.STAT_EVENT,D=>{D.stat===of.PROXY?j(xt,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===of.NOPROXY&&j(xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return typeof window<"u"?window:null}function ku(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t){return new YC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new CI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(rt(n.toString()),rt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new H(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kk extends kI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=ZC(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Ot(o.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=vf(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=hc(u)?{documents:tI(s,u)}:{query:nI(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Y0(s,o.resumeToken);const c=gf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=so(s,o.snapshotVersion.toTimestamp());const c=gf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=tk(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=vf(this.serializer),n.removeTarget=e,this.a_(n)}}class qk extends kI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return se(!!e.streamToken),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ek(e.writeResults,e.commitTime),r=Ot(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=vf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pc(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,yf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(U.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,yf(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Hk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rt(n),this.D_=!1):j("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ji(this)&&(j("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ee(u);c.L_.add(4),await ml(c),c.q_.set("Unknown"),c.L_.delete(4),await Xc(c)}(this))})}),this.q_=new Hk(r,i)}}async function Xc(t){if(Ji(t))for(const e of t.B_)await e(!0)}async function ml(t){for(const e of t.B_)await e(!1)}function Zc(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),sm(n)?im(n):_o(n).r_()&&rm(n,e))}function ao(t,e){const n=ee(t),r=_o(n);n.N_.delete(e),r.r_()&&DI(n,e),n.N_.size===0&&(r.r_()?r.o_():Ji(n)&&n.q_.set("Unknown"))}function rm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_o(t).A_(e)}function DI(t,e){t.Q_.xe(e),_o(t).R_(e)}function im(t){t.Q_=new GC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_o(t).start(),t.q_.v_()}function sm(t){return Ji(t)&&!_o(t).n_()&&t.N_.size>0}function Ji(t){return ee(t).L_.size===0}function VI(t){t.Q_=void 0}async function Qk(t){t.q_.set("Online")}async function Yk(t){t.N_.forEach((e,n)=>{rm(t,e)})}async function Jk(t,e){VI(t),sm(t)?(t.q_.M_(e),im(t)):t.q_.set("Unknown")}async function Xk(t,e,n){if(t.q_.set("Online"),e instanceof Q0&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ec(t,r)}else if(e instanceof Cu?t.Q_.Ke(e):e instanceof W0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await TI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=s.N_.get(u);if(!d)return;s.N_.set(u,d.withResumeToken(it.EMPTY_BYTE_STRING,d.snapshotVersion)),DI(s,u);const f=new ar(d.target,u,c,d.sequenceNumber);rm(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){j("RemoteStore","Failed to raise snapshot:",r),await Ec(t,r)}}async function Ec(t,e,n){if(!ii(e))throw e;t.L_.add(1),await ml(t),t.q_.set("Offline"),n||(n=()=>TI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Xc(t)})}function NI(t,e){return e().catch(n=>Ec(t,n,e))}async function vo(t){const e=ee(t),n=Xr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Zk(e);)try{const i=await Bk(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,eD(e,i)}catch(i){await Ec(e,i)}bI(e)&&MI(e)}function Zk(t){return Ji(t)&&t.O_.length<10}function eD(t,e){t.O_.push(e);const n=Xr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function bI(t){return Ji(t)&&!Xr(t).n_()&&t.O_.length>0}function MI(t){Xr(t).start()}async function tD(t){Xr(t).p_()}async function nD(t){const e=Xr(t);for(const n of t.O_)e.m_(n.mutations)}async function rD(t,e,n){const r=t.O_.shift(),i=Hp.from(r,e,n);await NI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vo(t)}async function iD(t,e){e&&Xr(t).V_&&await async function(r,i){if(function(o){return $C(o)&&o!==U.ABORTED}(i.code)){const s=r.O_.shift();Xr(r).s_(),await NI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vo(r)}}(t,e),bI(t)&&MI(t)}async function $v(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const r=Ji(n);n.L_.add(3),await ml(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Xc(n)}async function Rf(t,e){const n=ee(t);e?(n.L_.delete(2),await Xc(n)):e||(n.L_.add(2),await ml(n),n.q_.set("Unknown"))}function _o(t){return t.K_||(t.K_=function(n,r,i){const s=ee(n);return s.w_(),new Kk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Qk.bind(null,t),Ro:Yk.bind(null,t),mo:Jk.bind(null,t),d_:Xk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),sm(t)?im(t):t.q_.set("Unknown")):(await t.K_.stop(),VI(t))})),t.K_}function Xr(t){return t.U_||(t.U_=function(n,r,i){const s=ee(n);return s.w_(),new qk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tD.bind(null,t),mo:iD.bind(null,t),f_:nD.bind(null,t),g_:rD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vo(t)):(await t.U_.stop(),t.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new om(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function am(t,e){if(rt("AsyncQueue",`${e}: ${t}`),ii(t))return new H(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=ra(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new qs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.W_=new Me(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class lo{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new lo(e,n,qs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class oD{constructor(){this.queries=qv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),s=i.queries;i.queries=qv(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new H(U.ABORTED,"Firestore shutting down"))}}function qv(){return new si(t=>N0(t),qc)}async function lm(t,e){const n=ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new sD,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=am(o,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&cm(n)}async function um(t,e){const n=ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aD(t,e){const n=ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&cm(n)}function lD(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function cm(t){t.Y_.forEach(e=>{e.next()})}var Af,Gv;(Gv=Af||(Af={})).ea="default",Gv.Cache="cache";class hm{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Af.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.key=e}}class OI{constructor(e){this.key=e}}class uD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=M0(e),this.Ra=new qs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Kv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const m=i.get(d),_=dl(this.query,f)?f:null,R=!!m&&this.mutatedKeys.has(m.key),C=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let D=!1;m&&_?m.data.isEqual(_.data)?R!==C&&(r.track({type:3,doc:_}),D=!0):this.ga(m,_)||(r.track({type:2,doc:_}),D=!0,(u&&this.Aa(_,u)>0||c&&this.Aa(_,c)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),D=!0):m&&!_&&(r.track({type:1,doc:m}),D=!0,(u||c)&&(a=!0)),D&&(_?(o=o.add(_),s=C?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(_,R){const C=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return C(_)-C(R)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new lo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Kv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new OI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new LI(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return lo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class cD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hD{constructor(e){this.key=e,this.va=!1}}class dD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new si(a=>N0(a),qc),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(Q.comparator),this.Na=new Map,this.La=new Zp,this.Ba={},this.ka=new Map,this.qa=Ki.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fD(t,e,n=!0){const r=eh(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await FI(r,e,n,!0),i}async function pD(t,e){const n=eh(t);await FI(n,e,!0,!1)}async function FI(t,e,n,r){const i=await vc(t.localStore,sn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await dm(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Zc(t.remoteStore,i),a}async function dm(t,e,n,r,i){t.Ka=(f,m,_)=>async function(C,D,w,g){let I=D.view.ma(w);I.ns&&(I=await Tf(C.localStore,D.query,!1).then(({documents:E})=>D.view.ma(E,I)));const V=g&&g.targetChanges.get(D.targetId),B=g&&g.targetMismatches.get(D.targetId)!=null,P=D.view.applyChanges(I,C.isPrimaryClient,V,B);return Pf(C,D.targetId,P.wa),P.snapshot}(t,f,m,_);const s=await Tf(t.localStore,e,!0),o=new uD(e,s.Ts),a=o.ma(s.documents),u=pl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);Pf(t,n,c.wa);const d=new cD(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function mD(t,e,n){const r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!qc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await oo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ao(r.remoteStore,i.targetId),uo(r,i.targetId)}).catch(ri)):(uo(r,i.targetId),await oo(r.localStore,i.targetId,!0))}async function gD(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ao(n.remoteStore,r.targetId))}async function yD(t,e,n){const r=gm(t);try{const i=await function(o,a){const u=ee(o),c=Qe.now(),d=a.reduce((_,R)=>_.add(R.key),pe());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let R=nn(),C=pe();return u.cs.getEntries(_,d).next(D=>{R=D,R.forEach((w,g)=>{g.isValidDocument()||(C=C.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,R)).next(D=>{f=D;const w=[];for(const g of a){const I=UC(g,f.get(g.key).overlayedDocument);I!=null&&w.push(new gr(g.key,I,T0(I.value.mapValue),Ht.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,w,a)}).next(D=>{m=D;const w=D.applyToLocalDocumentSet(f,C);return u.documentOverlayCache.saveOverlays(_,D.batchId,w)})}).then(()=>({batchId:m.batchId,changes:O0(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Me(he)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await oi(r,i.changes),await vo(r.remoteStore)}catch(i){const s=am(i,"Failed to persist write");n.reject(s)}}async function BI(t,e){const n=ee(t);try{const r=await Ok(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?se(o.va):i.removedDocuments.size>0&&(se(o.va),o.va=!1))}),await oi(n,r,e)}catch(r){await ri(r)}}function Hv(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ee(o);u.onlineState=a;let c=!1;u.queries.forEach((d,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&cm(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vD(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Me(Q.comparator);o=o.insert(s,tt.newNoDocument(s,le.min()));const a=pe().add(s),u=new fl(le.min(),new Map,new Me(he),o,a);await BI(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),mm(r)}else await oo(r.localStore,e,!1).then(()=>uo(r,e,n)).catch(ri)}async function _D(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await Lk(n.localStore,e);pm(n,r,null),fm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oi(n,i)}catch(i){await ri(i)}}async function wD(t,e,n){const r=ee(t);try{const i=await function(o,a){const u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(se(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);pm(r,e,n),fm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await oi(r,i)}catch(i){await ri(i)}}function fm(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function pm(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function uo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||zI(t,r)})}function zI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ao(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),mm(t))}function Pf(t,e,n){for(const r of n)r instanceof LI?(t.La.addReference(r.key,e),ED(t,r)):r instanceof OI?(j("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zI(t,r.key)):Z()}function ED(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(j("SyncEngine","New document in limbo: "+n),t.xa.add(r),mm(t))}function mm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(Ce.fromString(e)),r=t.qa.next();t.Na.set(r,new hD(n)),t.Oa=t.Oa.insert(n,r),Zc(t.remoteStore,new ar(sn(hl(n.path)),r,"TargetPurposeLimboResolution",qt.oe))}}async function oi(t,e,n){const r=ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=tm.Wi(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const d=ee(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(c,m=>L.forEach(m.$i,_=>d.persistence.referenceDelegate.addReference(f,m.targetId,_)).next(()=>L.forEach(m.Ui,_=>d.persistence.referenceDelegate.removeReference(f,m.targetId,_)))))}catch(f){if(!ii(f))throw f;j("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const _=d.os.get(m),R=_.snapshotVersion,C=_.withLastLimboFreeSnapshotVersion(R);d.os=d.os.insert(m,C)}}}(r.localStore,s))}async function ID(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const r=await II(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new H(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oi(n,r.hs)}}function TD(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function SD(t,e){const n=ee(t),r=await Tf(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Pf(n,e.targetId,i.wa),i}async function RD(t,e){const n=ee(t);return RI(n.localStore,e).then(r=>oi(n,r))}async function AD(t,e,n,r){const i=ee(t),s=await function(a,u){const c=ee(a),d=ee(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,u).next(m=>m?c.localDocuments.getDocuments(f,m):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await vo(i.remoteStore):n==="acknowledged"||n==="rejected"?(pm(i,e,r||null),fm(i,e),function(a,u){ee(ee(a).mutationQueue).On(u)}(i.localStore,e)):Z(),await oi(i,s)):j("SyncEngine","Cannot apply mutation batch with id: "+e)}async function PD(t,e){const n=ee(t);if(eh(n),gm(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Wv(n,r.toArray());n.Qa=!0,await Rf(n.remoteStore,!0);for(const s of i)Zc(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(uo(n,o),oo(n.localStore,o,!0))),ao(n.remoteStore,o)}),await i,await Wv(n,r),function(o){const a=ee(o);a.Na.forEach((u,c)=>{ao(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Me(Q.comparator)}(n),n.Qa=!1,await Rf(n.remoteStore,!1)}}async function Wv(t,e,n){const r=ee(t),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&u.length!==0){a=await vc(r.localStore,sn(u[0]));for(const c of u){const d=r.Fa.get(c),f=await SD(r,d);f.snapshot&&s.push(f.snapshot)}}else{const c=await SI(r.localStore,o);a=await vc(r.localStore,c),await dm(r,UI(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function UI(t){return D0(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xD(t){return function(n){return ee(ee(n).persistence).Qi()}(ee(t).localStore)}async function CD(t,e,n,r){const i=ee(t);if(i.Qa)return void j("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await RI(i.localStore,b0(s[0])),a=fl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",it.EMPTY_BYTE_STRING);await oi(i,o,a);break}case"rejected":await oo(i.localStore,e,!0),uo(i,e,r);break;default:Z()}}async function kD(t,e,n){const r=eh(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){j("SyncEngine","Adding an already active target "+i);continue}const s=await SI(r.localStore,i),o=await vc(r.localStore,s);await dm(r,UI(s),o.targetId,!1,o.resumeToken),Zc(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await oo(r.localStore,i,!1).then(()=>{ao(r.remoteStore,i),uo(r,i)}).catch(ri)}}function eh(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vD.bind(null,e),e.Ca.d_=aD.bind(null,e.eventManager),e.Ca.$a=lD.bind(null,e.eventManager),e}function gm(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_D.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wD.bind(null,e),e}class Za{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return EI(this.persistence,new wI,e.initialUser,this.serializer)}Ga(e){return new vI(Yc.Zr,this.serializer)}Wa(e){return new PI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Za.provider={build:()=>new Za};class jI extends Za{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await gm(this.Ja.syncEngine),await vo(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return EI(this.persistence,new wI,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new vk(r,e.asyncQueue,n)}Ha(e,n){const r=new Y1(n,this.persistence);return new Q1(e.asyncQueue,r)}Ga(e){const n=_I(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?jt.withCacheSize(this.cacheSizeBytes):jt.DEFAULT;return new em(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,xI(),ku(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new PI}}class DD extends jI{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Xh&&(this.sharedClientState.syncEngine={no:AD.bind(null,n),ro:CD.bind(null,n),io:kD.bind(null,n),Qi:xD.bind(null,n),eo:RD.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await PD(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=xI();if(!Xh.D(n))throw new H(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_I(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xh(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class el{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ID.bind(null,this.syncEngine),await Rf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oD}()}createDatastore(e){const n=Jc(e.databaseInfo.databaseId),r=function(s){return new $k(s)}(e.databaseInfo);return function(s,o,a,u){return new Gk(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Wk(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Hv(this.syncEngine,n,0),function(){return jv.D()?new jv:new zk}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,d){const f=new dD(i,s,o,a,u,c);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ee(i);j("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ml(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}el.provider={build:()=>new el};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=a0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{j("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(j("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=am(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ed(t,e){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await II(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ND(t);j("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$v(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>$v(e.remoteStore,i)),t._onlineComponents=e}async function ND(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{await ed(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;$a("Error using user provided cache. Falling back to memory cache: "+n),await ed(t,new Za)}}else j("FirestoreClient","Using default OfflineComponentProvider"),await ed(t,new Za);return t._offlineComponents}async function $I(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),await Qv(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),await Qv(t,new el))),t._onlineComponents}function bD(t){return $I(t).then(e=>e.syncEngine)}async function Ic(t){const e=await $I(t),n=e.eventManager;return n.onListen=fD.bind(null,e.syncEngine),n.onUnlisten=mD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gD.bind(null,e.syncEngine),n}function MD(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new ym({next:m=>{d.Za(),o.enqueueAndForget(()=>um(s,f));const _=m.docs.has(a);!_&&m.fromCache?c.reject(new H(U.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?c.reject(new H(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new hm(hl(a.path),d,{includeMetadataChanges:!0,_a:!0});return lm(s,f)}(await Ic(t),t.asyncQueue,e,n,r)),r.promise}function LD(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new ym({next:m=>{d.Za(),o.enqueueAndForget(()=>um(s,f)),m.fromCache&&u.source==="server"?c.reject(new H(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new hm(a,d,{includeMetadataChanges:!0,_a:!0});return lm(s,f)}(await Ic(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e,n){if(!n)throw new H(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OD(t,e,n,r){if(e===!0&&r===!0)throw new H(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jv(t){if(!Q.isDocumentKey(t))throw new H(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xv(t){if(Q.isDocumentKey(t))throw new H(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function th(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=th(t);throw new H(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new B1;switch(r.type){case"firstParty":return new j1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Yv.get(n);r&&(j("ComponentProvider","Removing Datastore"),Yv.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class Ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}}class Gr extends Xi{constructor(e,n,r){super(e,n,hl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Q(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function e_(t,e,...n){if(t=Hn(t),qI("collection","path",e),t instanceof vm){const r=Ce.fromString(e,...n);return Xv(r),new Gr(t,null,r)}{if(!(t instanceof Ft||t instanceof Gr))throw new H(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Xv(r),new Gr(t.firestore,null,r)}}function xr(t,e,...n){if(t=Hn(t),arguments.length===1&&(e=a0.newId()),qI("doc","path",e),t instanceof vm){const r=Ce.fromString(e,...n);return Jv(r),new Ft(t,null,new Q(r))}{if(!(t instanceof Ft||t instanceof Gr))throw new H(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Jv(r),new Ft(t.firestore,t instanceof Gr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new CI(this,"async_queue_retry"),this.Vu=()=>{const r=ku();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ku();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ku();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new qn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ii(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=om.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function n_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class qi extends vm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new t_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new t_(e),this._firestoreClient=void 0,await e}}}function FD(t,e,n){n||(n="(default)");const r=I1(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(ac(s,e))return i;throw new H(U.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new H(U.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function nh(t){if(t._terminated)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BD(t),t._firestoreClient}function BD(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,d){return new yC(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,KI(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new VD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new co(it.fromBase64String(e))}catch(n){throw new H(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new co(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=/^__.*__$/;class UD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new yo(e,this.data,n,this.fieldTransforms)}}class GI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Im{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Im(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Tc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HI(this.Cu)&&zD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class jD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Jc(e)}Qu(e,n,r,i=!1){return new Im({Cu:e,methodName:n,qu:r,path:He.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tm(t){const e=t._freezeSettings(),n=Jc(t._databaseId);return new jD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $D(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Sm("Data must be an object, but it was:",o,r);const a=WI(r,o);let u,c;if(s.merge)u=new Gt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const m=xf(e,f,n);if(!o.contains(m))throw new H(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);YI(d,m)||d.push(m)}u=new Gt(d),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new UD(new Dt(a),u,c)}class ih extends _m{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ih}}function KD(t,e,n,r){const i=t.Qu(1,e,n);Sm("Data must be an object, but it was:",i,r);const s=[],o=Dt.empty();Yi(r,(u,c)=>{const d=Rm(e,u,n);c=Hn(c);const f=i.Nu(d);if(c instanceof ih)s.push(d);else{const m=gl(c,f);m!=null&&(s.push(d),o.set(d,m))}});const a=new Gt(s);return new GI(o,a,i.fieldTransforms)}function qD(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[xf(e,r,n)],u=[i];if(s.length%2!=0)throw new H(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(xf(e,s[m])),u.push(s[m+1]);const c=[],d=Dt.empty();for(let m=a.length-1;m>=0;--m)if(!YI(c,a[m])){const _=a[m];let R=u[m];R=Hn(R);const C=o.Nu(_);if(R instanceof ih)c.push(_);else{const D=gl(R,C);D!=null&&(c.push(_),d.set(_,D))}}const f=new Gt(c);return new GI(d,f,o.fieldTransforms)}function GD(t,e,n,r=!1){return gl(n,t.Qu(r?4:3,e))}function gl(t,e){if(QI(t=Hn(t)))return Sm("Unsupported field value:",e,t),WI(t,e);if(t instanceof _m)return function(r,i){if(!HI(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=gl(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Qe.fromDate(r);return{timestampValue:so(i.serializer,s)}}if(r instanceof Qe){const s=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:so(i.serializer,s)}}if(r instanceof wm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof co)return{bytesValue:Y0(i.serializer,r._byteString)};if(r instanceof Ft){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Yp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Em)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Kp(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${th(r)}`)}(t,e)}function WI(t,e){const n={};return _0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(t,(r,i)=>{const s=gl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function QI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof wm||t instanceof co||t instanceof Ft||t instanceof _m||t instanceof Em)}function Sm(t,e,n){if(!QI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=th(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function xf(t,e,n){if((e=Hn(e))instanceof rh)return e._internalPath;if(typeof e=="string")return Rm(t,e);throw Tc("Field path arguments must be of type string or ",t,!1,void 0,n)}const HD=new RegExp("[~\\*/\\[\\]]");function Rm(t,e,n){if(e.search(HD)>=0)throw Tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rh(...e.split("."))._internalPath}catch{throw Tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new H(U.INVALID_ARGUMENT,a+t+u)}function YI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Am("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WD extends JI{data(){return super.data()}}function Am(t,e){return typeof e=="string"?Rm(t,e):e instanceof rh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pm{}class QD extends Pm{}function YD(t,e,...n){let r=[];e instanceof Pm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof xm).length,a=s.filter(u=>u instanceof sh).length;if(o>1||o>0&&a>0)throw new H(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class sh extends QD{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new sh(e,n,r)}_apply(e){const n=this._parse(e);return ZI(e._query,n),new Xi(e.firestore,e.converter,pf(e._query,n))}_parse(e){const n=Tm(e.firestore);return function(s,o,a,u,c,d,f){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new H(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){i_(f,d);const _=[];for(const R of f)_.push(r_(u,s,R));m={arrayValue:{values:_}}}else m=r_(u,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||i_(f,d),m=GD(a,o,f,d==="in"||d==="not-in");return _e.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function JD(t,e,n){const r=e,i=Am("where",t);return sh._create(i,r,n)}class xm extends Pm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ke.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)ZI(o,u),o=pf(o,u)}(e._query,n),new Xi(e.firestore,e.converter,pf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function r_(t,e,n){if(typeof(n=Hn(n))=="string"){if(n==="")throw new H(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V0(e)&&n.indexOf("/")!==-1)throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!Q.isDocumentKey(r))throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qa(t,new Q(r))}if(n instanceof Ft)return Qa(t,n._key);throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${th(n)}.`)}function i_(t,e){if(!Array.isArray(t)||t.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XD{convertValue(e,n="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>$e(o.doubleValue));return new Em(s)}convertGeoPoint(e){return new wm($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Up(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const n=pr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);se(oI(r));const i=new Bi(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||rt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eT extends JI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Du extends eT{data(e={}){return super.data(e)}}class tT{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new oa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Du(this._firestore,this._userDataWriter,r.key,r,new oa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new Du(i._firestore,i._userDataWriter,a.doc.key,a.doc,new oa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new Du(i._firestore,i._userDataWriter,a.doc.key,a.doc,new oa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:eV(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function eV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t){t=Gn(t,Ft);const e=Gn(t.firestore,qi);return MD(nh(e),t._key).then(n=>rT(e,t,n))}class Cm extends XD{constructor(e){super(),this.firestore=e}convertBytes(e){return new co(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function nV(t){t=Gn(t,Xi);const e=Gn(t.firestore,qi),n=nh(e),r=new Cm(e);return XI(t._query),LD(n,t._query).then(i=>new tT(e,r,t,i))}function vi(t,e,n,...r){t=Gn(t,Ft);const i=Gn(t.firestore,qi),s=Tm(i);let o;return o=typeof(e=Hn(e))=="string"||e instanceof rh?qD(s,"updateDoc",t._key,e,n,r):KD(s,"updateDoc",t._key,e),nT(i,[o.toMutation(t._key,Ht.exists(!0))])}function rV(t,e){const n=Gn(t.firestore,qi),r=xr(t),i=ZD(t.converter,e);return nT(n,[$D(Tm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ht.exists(!1))]).then(()=>r)}function iV(t,...e){var n,r,i;t=Hn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||n_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(n_(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,c,d;if(t instanceof Ft)c=Gn(t.firestore,qi),d=hl(t._key.path),u={next:f=>{e[o]&&e[o](rT(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Gn(t,Xi);c=Gn(f.firestore,qi),d=f._query;const m=new Cm(c);u={next:_=>{e[o]&&e[o](new tT(c,m,f,_))},error:e[o+1],complete:e[o+2]},XI(t._query)}return function(m,_,R,C){const D=new ym(C),w=new hm(_,D,R);return m.asyncQueue.enqueueAndForget(async()=>lm(await Ic(m),w)),()=>{D.Za(),m.asyncQueue.enqueueAndForget(async()=>um(await Ic(m),w))}}(nh(c),d,a,u)}function nT(t,e){return function(r,i){const s=new qn;return r.asyncQueue.enqueueAndForget(async()=>yD(await bD(r),i,s)),s.promise}(nh(t),e)}function rT(t,e,n){const r=n.docs.get(e._key),i=new Cm(t);return new eT(t,i,e._key,r,new oa(n.hasPendingWrites,n.fromCache),e.converter)}class sV{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=uV(),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function oV(t){return new sV(t)}class aV{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=el.provider,this._offlineComponentProvider={build:n=>new jI(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class lV{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=el.provider,this._offlineComponentProvider={build:n=>new DD(n,e==null?void 0:e.cacheSizeBytes)}}}function uV(t){return new aV(void 0)}function cV(){return new lV}(function(e,n=!0){(function(i){go=i})(R1),lc(new Ua("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new qi(new z1(r.getProvider("auth-internal")),new K1(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bi(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ks(Qy,"4.7.3",e),Ks(Qy,"4.7.3","esm2017")})();const hV={apiKey:"AIzaSyCGr_dvCZ7z0d7vN3G0D55lBaVpFTKPoWI",authDomain:"gomoku-online-109c0.firebaseapp.com",projectId:"gomoku-online-109c0",storageBucket:"gomoku-online-109c0.firebasestorage.app",messagingSenderId:"529662015444",appId:"1:529662015444:web:22a0881c512df48808c841"},dV=A1(hV),ir=FD(dV,{localCache:oV({tabManager:cV()})}),fV="/assets/background-FXnxXm72.jpg",pV=()=>Math.floor(1e5+Math.random()*9e5).toString(),mV=()=>{const t=kp(),[e,n]=F.useState(""),[r,i]=F.useState(""),s=async()=>{try{const a=pV(),u={};for(let d=0;d<10;d++)for(let f=0;f<10;f++)u[`${d},${f}`]=null;const c=await rV(e_(ir,"rooms"),{roomCode:a,board:u,currentTurn:"B",winner:null,gameStarted:!1,players:{black:null,white:null,current:null},ready:{black:!1,white:!1},createdAt:new Date().toISOString()});t(`/room/${c.id}`)}catch(a){console.error("Error creating room:",a),i("Failed to create room. Please try again.")}},o=async()=>{if(!e||e.length!==6){i("Please enter a valid 6-digit room code");return}try{const a=e_(ir,"rooms"),u=YD(a,JD("roomCode","==",e)),c=await nV(u);if(c.empty)i("Room not found. Please check the room code.");else{const d=c.docs[0];t(`/room/${d.id}`)}}catch(a){console.error("Error joining room:",a),i("Failed to join room. Please try again.")}};return Y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${fV})`},children:Y.jsxs("div",{className:"bg-white/90 backdrop-blur-sm p-8 rounded-lg shadow-md w-96",children:[Y.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:""}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsx("button",{onClick:s,className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition-colors",children:"Create New Room"}),Y.jsxs("div",{className:"relative",children:[Y.jsxs("div",{className:"flex space-x-2",children:[Y.jsx("input",{type:"text",maxLength:6,placeholder:"Enter 6-digit room code",value:e,onChange:a=>{i(""),n(a.target.value.replace(/[^0-9]/g,""))},className:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),Y.jsx("button",{onClick:o,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors",children:"Join"})]}),r&&Y.jsx("p",{className:"text-red-500 text-sm mt-2",children:r})]})]})]})})};function iT(t){const[e,n]=F.useState(null),[r]=F.useState(()=>{const c=localStorage.getItem("playerId");if(c)return c;const d=Math.random().toString(36).substr(2,9);return localStorage.setItem("playerId",d),d});return F.useEffect(()=>{const c=xr(ir,"rooms",t),d=iV(c,f=>{f.exists()&&n(f.data())},f=>{console.error("Error listening to room:",f),setTimeout(()=>{d()},5e3)});return()=>d()},[t]),F.useEffect(()=>{(async()=>{if(!e||!r)return;const d=xr(ir,"rooms",t),{players:f}=e;f.black===r||f.white===r||(f.black?f.white||await vi(d,{"players.white":r,"players.current":f.black}):await vi(d,{"players.black":r,"players.current":r}))})()},[e,r,t]),{state:e,makeMove:async(c,d)=>{if(!e||e.winner||e.board[`${c},${d}`]||!e.gameStarted)return;const f=e.currentTurn==="B"?"black":"white";if(e.players[f]!==r)return;const m=xr(ir,"rooms",t);if(!(await tV(m)).exists())return;const R=e.currentTurn==="B"?"W":"B",C=R==="B"?e.players.black:e.players.white;await vi(m,{[`board.${c},${d}`]:e.currentTurn,currentTurn:R,"players.current":C})},setReady:async(c,d)=>{if(!e||e.players[c]!==r)return;const f=xr(ir,"rooms",t);await vi(f,{[`ready.${c}`]:d})},startGame:async()=>{if(!e||e.players.black!==r||!e.ready.black||!e.ready.white)return;const c=xr(ir,"rooms",t);await vi(c,{gameStarted:!0,"players.current":e.players.black})},resetGame:async()=>{if(!e||e.players.black!==r)return;const c=xr(ir,"rooms",t),d={};for(let f=0;f<10;f++)for(let m=0;m<10;m++)d[`${f},${m}`]=null;await vi(c,{board:d,currentTurn:"B",winner:null,gameStarted:!1,"ready.black":!1,"ready.white":!1,"players.current":e.players.black})},playerId:r,playerRole:e?e.players.black===r?"black":e.players.white===r?"white":null:null}}const gV=({roomId:t})=>{const{state:e,makeMove:n,playerRole:r}=iT(t),i=F.useRef(null),[s,o]=F.useState(32),[a,u]=F.useState(null);F.useEffect(()=>{const w=()=>{if(i.current){const g=window.innerWidth,I=window.innerHeight,B=Math.min(g-32*2,I-250),P=Math.floor(B/9),y=Math.max(P,30);o(y)}};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const c=(w,g)=>{!e||e.board[`${w},${g}`]||e.winner||!e.gameStarted||!r||e.players.current!==e.players[r]||a||u({row:w,col:g})},d=async()=>{if(!a||!e)return;await n(a.row,a.col);const w=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],g=e.currentTurn;let I=1;for(const[V,B]of w){let P=1,E=a.row+V,y=a.col+B;for(;E>=0&&E<10&&y>=0&&y<10&&e.board[`${E},${y}`]===g;)P++,E+=V,y+=B;for(E=a.row-V,y=a.col-B;E>=0&&E<10&&y>=0&&y<10&&e.board[`${E},${y}`]===g;)P++,E-=V,y-=B;I=Math.max(I,P)}if(I>=5){const V=xr(ir,"rooms",t);await vi(V,{winner:g})}u(null)},f=()=>{u(null)},m=(w,g)=>{const I=e==null?void 0:e.board[`${w},${g}`],V=Math.max(1,Math.floor(s/32)),B=(a==null?void 0:a.row)===w&&(a==null?void 0:a.col)===g;return Y.jsxs("div",{className:"relative cursor-pointer touch-manipulation",style:{width:s,height:s,position:"relative",backgroundColor:"transparent"},onClick:()=>e!=null&&e.gameStarted?c(w,g):null,children:[Y.jsx("div",{style:{position:"absolute",left:0,top:"50%",width:"100%",height:V,backgroundColor:"black",transform:"translateY(-50%)"}}),Y.jsx("div",{style:{position:"absolute",top:0,left:"50%",height:"100%",width:V,backgroundColor:"black",transform:"translateX(-50%)"}}),(I||B&&(e==null?void 0:e.gameStarted))&&Y.jsx("div",{className:"absolute",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:Math.floor(s*.8),height:Math.floor(s*.8),borderRadius:"50%",backgroundColor:B?(e==null?void 0:e.currentTurn)==="B"?"#000":"#fff":I==="B"?"#000":"#fff",border:B&&(e==null?void 0:e.currentTurn)==="W"||I==="W"?`${V}px solid #000`:"none",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",opacity:B?.6:1,outline:B?"2px solid #3b82f6":"none",zIndex:10}})]},`${w}-${g}`)},_=r&&(e==null?void 0:e.players.current)===(e==null?void 0:e.players[r]),R=s*9+s,C=Math.max(1,Math.floor(s/32)),D=Math.floor(s/2)+C*2;return Y.jsxs("div",{className:"w-full flex flex-col items-center gap-4",children:[Y.jsx("div",{className:"text-lg font-bold p-2 rounded",style:{backgroundColor:e!=null&&e.gameStarted?_?"#4ade80":"#ef4444":"#9ca3af",color:"white"},children:e!=null&&e.gameStarted?_?"":"":"..."}),Y.jsx("div",{ref:i,className:"w-full flex justify-center touch-none",children:Y.jsxs("div",{className:"relative rounded-lg shadow-lg overflow-hidden",style:{width:R+D*2,height:R+D*2,backgroundColor:"#DEB887",padding:D,touchAction:"none"},children:[Y.jsx("div",{className:"absolute inset-0 rounded-lg",style:{border:`${C}px solid black`,pointerEvents:"none"}}),Y.jsx("div",{className:"grid grid-cols-10 gap-0",children:Array(10).fill(null).map((w,g)=>Y.jsx(m_.Fragment,{children:Array(10).fill(null).map((I,V)=>m(g,V))},g))}),[{top:2.5,left:2.5},{top:2.5,right:2.5},{bottom:2.5,left:2.5},{bottom:2.5,right:2.5}].map((w,g)=>Y.jsx("div",{className:"absolute",style:{...Object.fromEntries(Object.entries(w).map(([I,V])=>[I,Math.floor(s*V)])),width:Math.floor(s*.2),height:Math.floor(s*.2),borderRadius:"50%",backgroundColor:"black",transform:`translate(${w.left?"-50%":"50%"}, ${w.top?"-50%":"50%"})`,zIndex:5}},g))]})}),a&&(e==null?void 0:e.gameStarted)&&Y.jsxs("div",{className:"flex gap-4 mt-4",children:[Y.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:""}),Y.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:""})]})]})},yV=()=>{const{id:t}=aP(),e=kp(),{state:n,setReady:r,startGame:i,resetGame:s,playerRole:o}=iT(t);if(!n)return Y.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:Y.jsx("div",{className:"text-xl",children:"Loading..."})});const a=n.ready.black&&n.ready.white&&o==="black"&&!n.gameStarted;return Y.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col md:flex-row",children:[Y.jsxs("div",{className:"flex-1 p-4 md:p-8",children:[Y.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[Y.jsxs("div",{className:"space-y-1",children:[Y.jsx("h2",{className:"text-xl md:text-2xl font-bold",children:"Room Code:"}),Y.jsx("div",{className:"text-lg md:text-xl font-mono bg-white px-3 py-1 rounded shadow",children:n.roomCode})]}),Y.jsx("button",{onClick:()=>e("/"),className:"px-3 py-1 md:px-4 md:py-2 bg-gray-500 text-white text-sm md:text-base rounded hover:bg-gray-600",children:"Leave Room"})]}),Y.jsx(gV,{roomId:t})]}),Y.jsxs("div",{className:"w-full md:w-80 bg-white shadow-lg p-4 md:p-6",children:[Y.jsx("h2",{className:"text-lg md:text-xl font-bold mb-4 md:mb-6",children:"Game Status"}),Y.jsxs("div",{className:"space-y-4 md:space-y-6",children:[Y.jsxs("div",{className:"space-y-3 md:space-y-4",children:[Y.jsxs("div",{className:"flex justify-between items-center",children:[Y.jsxs("div",{children:[Y.jsx("span",{className:"font-medium",children:"Black (Player 1)"}),Y.jsx("div",{className:"text-sm text-gray-500",children:n.players.black?n.gameStarted?"Playing":n.ready.black?"Ready":"Not Ready":"Waiting..."})]}),o==="black"&&Y.jsx("button",{onClick:()=>r("black",!n.ready.black),disabled:n.gameStarted,className:`px-3 py-1 rounded text-sm md:text-base ${n.gameStarted?"bg-blue-500 text-white":n.ready.black?"bg-green-500 text-white":"bg-gray-200 text-gray-700"} ${n.gameStarted&&"opacity-50 cursor-not-allowed"}`,children:n.gameStarted?"Playing":n.ready.black?"Ready":"Not Ready"})]}),Y.jsxs("div",{className:"flex justify-between items-center",children:[Y.jsxs("div",{children:[Y.jsx("span",{className:"font-medium",children:"White (Player 2)"}),Y.jsx("div",{className:"text-sm text-gray-500",children:n.players.white?n.gameStarted?"Playing":n.ready.white?"Ready":"Not Ready":"Waiting..."})]}),o==="white"&&Y.jsx("button",{onClick:()=>r("white",!n.ready.white),disabled:n.gameStarted,className:`px-3 py-1 rounded text-sm md:text-base ${n.gameStarted?"bg-blue-500 text-white":n.ready.white?"bg-green-500 text-white":"bg-gray-200 text-gray-700"} ${n.gameStarted&&"opacity-50 cursor-not-allowed"}`,children:n.gameStarted?"Playing":n.ready.white?"Ready":"Not Ready"})]})]}),Y.jsxs("div",{className:"space-y-3 md:space-y-4",children:[Y.jsx("div",{className:"text-center p-2 md:p-3 bg-gray-50 rounded text-sm md:text-base",children:n.gameStarted?Y.jsxs("p",{className:"font-medium",children:["Current Turn: ",n.currentTurn==="B"?"Black":"White"]}):Y.jsx("p",{className:"text-gray-600",children:!n.players.black||!n.players.white?"Waiting for players to join...":!n.ready.black||!n.ready.white?"Waiting for players to ready up...":"Ready to start!"})}),a&&Y.jsx("button",{onClick:i,className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 text-sm md:text-base",children:"Start Game"})]})]}),n.winner&&Y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:Y.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-lg shadow-xl w-full max-w-sm",children:[Y.jsxs("h3",{className:"text-xl md:text-2xl font-bold mb-4 text-center",children:[n.winner==="B"?"Black":"White"," Wins!"]}),o==="black"&&Y.jsx("button",{onClick:s,className:"w-full bg-blue-500 text-white py-2 px-6 rounded hover:bg-blue-600",children:"Play Again"})]})})]})]})},vV=JP(PP(Y.jsxs(Y.Fragment,{children:[Y.jsx(Xd,{path:"/",element:Y.jsx(mV,{})}),Y.jsx(Xd,{path:"/room/:id",element:Y.jsx(yV,{})})]})));function _V(){return Y.jsx(ux,{router:vV})}td.createRoot(document.getElementById("root")).render(Y.jsx(m_.StrictMode,{children:Y.jsx(_V,{})}));
